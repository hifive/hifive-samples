/* Copyright (C) 2012-2016 NS Solutions Corporation. Licensed under the Apache License, Version 2.0. hifive version 1.2.3 gitCommitId 5bbc4f92599e17e185094aa9b12fd926cbaaa626 (scopedglobals,util,async,resource,controller,dataModel,view,modelWithBinding,validation,ui,api.geo,api.sqldb,api.storage,scene) */
(function(a){var ha,Ea,qa,xa;function m(a,d,h){var j=null,w=ya[a],n=wb[a];n&&(j=n(a,w,d,h));!j&&w&&(j=f.u.str.format.apply(null,[w].concat(d)));j&&(j+="(code="+a+")");d=j?Error(j):Error("FwError: code = "+a);a&&(d.code=a);h&&(d.detail=h);throw d;}function xb(a){for(var d in a)a.hasOwnProperty(d)&&(ya[d]=a[d])}function da(a,d,h){var j=null,w=ya[a];w&&(d=[w].concat(d),j=f.u.str.format.apply(null,d));return{code:a,message:j,detail:h}}function I(a){return null==a?a:E(a)?a:[a]}function t(a){return"string"===
typeof a}function va(a){return a.isRejected?a.isRejected():"rejected"===a.state()}function Ma(a){return a.isResolved?a.isResolved():"resolved"===a.state()}function wa(a){return!t(a)?!1:!!a.match(/^[A-Za-z_\$][\w|\$]*$/)}function Fa(c){if("regexp"===a.type(c))return c;var d="",d=-1!==c.indexOf("*")?a.map(c.split("*"),function(a){return a.replace(/\W/g,"\\$&")}).join(".*"):c;return RegExp("^"+d+"$")}function ra(a,d,h){a&&(a._h5UnwrappedCall?a._h5UnwrappedCall(d,h):a[d](h))}function fa(c,d,h,j){return c[a.hasOwnProperty("curCSS")?
"pipe":"then"](d,h,j)}function sb(a){return a&&a.document&&a.document.nodeType===jb&&U(a.document)===a}function M(a){return typeof a.nodeType===ja?sb(a)?a.document:null:a.nodeType===jb?a:a.ownerDocument}function U(a){return window.document===a?window:a.defaultView||a.parentWindow}function Ga(c,d,h,j){function w(b){return function(){if(!m._rejected){var e=f.u.obj.argsToArray(arguments),i=a.inArray(b,c);C[i]=2>e.length?e[0]:e;++m._resolveCount===m._promisesLength&&m._doneCallbackExecuter()}}}var n=
c?c.length:0,p=f.async.isPromise,m=this,C=null;this._doneCallbackExecuter=function(){m._resolved=!0;d&&(C?d.call(this,C):d.apply(this,arguments))};this._failCallbackExecuter=function(){m._rejected=!0;h?h.apply(this,arguments):j&&f.settings.commonFailHandler&&f.settings.commonFailHandler.call(this,arguments)};if(1===n||p(c)){var B=1===n?c[0]:c;p(B)?(this.remove=function(a){!this._resolved&&!this._rejected&&B===a&&this._doneCallbackExecuter()},B.done(this._doneCallbackExecuter),B.fail(this._failCallbackExecuter)):
this._doneCallbackExecuter()}else{for(var n=[],e=0,k=c.length;e<k;e++){var b=c[e];p(b)&&n.push(b)}p=n.length;if(0===p)this._resolved=!0,d&&d();else{this._promises=n;C=[];this._resolveArgs=[];this._resolveCount=0;this._promisesLength=p;for(e=0;e<p;e++)k=n[e],k.done(w(k)).fail(this._failCallbackExecuter)}}}function ea(a,d,h,j){return new Ga(a,d,h,j)}var tb=void 0;if(window.h5){if(window.h5.env&&"1.2.3"===window.h5.env.version)return;tb=window.h5}var f={};window.h5=f;f.coexist=function(){window.h5=tb;
return f};f.env={version:"1.2.3"};var ya={},wb={},ub=12029,ja="undefined",$=1,jb=9,P=function(){var a=null,d=null,h=null;return function(j){a||(a=document.createElement("a"));null===h&&(a.setAttribute("href","./"),h="./"!==a.href);if(h)return a.setAttribute("href",j),a.href;d||(d=document.createElement("span"));d.innerHTML='<a href="'+j+'" />';return d.firstChild.href}}();parseHTML=a.parseHTML?a.parseHTML:function(c,d,h){if(!c||!t(c))return null;"boolean"===typeof d&&(h=d,d=!1);d=d||document;c=a("<div>"+
c+"</div>",d);h||c.find("script").remove();for(var h=c[0].childNodes,d=d.createDocumentFragment(),c=0,j=h.length;c<j;c++)d.appendChild(h[c]);return d.childNodes};var E=Array.isArray||function(){var a=Object.prototype.toString;return function(d){return"[object Array]"===a.call(d)}}(),F=function(){if("function"===typeof RegExp()){var a=Object.prototype.toString;return function(d){return"[object Function]"===a.call(d)}}return function(a){return"function"===typeof a}}();Ga.prototype=a.extend(Ga.prototype,
{remove:function(c){if(!this._resolved&&!this._rejected)if(promsie===this._promises)this._doneCallback&&doneCallback(),this._resolved=!0;else{var d=a.inArray(c,this._promises);-1!==d&&(this._promises.splice(d,1),this._resolveArgs.splice(d,1),Ma(c)||(this._promisesLength--,that._resolveCount===this._promisesLength&&this._doneCallbackExecuter()))}}});ha={controllerInternal:null};xa=qa=Ea=void 0;(function(){function c(a){switch(a){case "string":return"s";case "number":return"n";case "boolean":return"b";
case "String":return"S";case "Number":return"N";case "Boolean":return"B";case "infinity":return"i";case "-infinity":return"I";case "nan":return"x";case "date":return"d";case "regexp":return"r";case "array":return"a";case "object":return"o";case "null":return"l";case e:return"u";case "undefElem":return"_";case "objElem":return"@"}}function d(a,b){if(t(a)){var e=a;b&&(e=e.replace(/\\n/g,"\n").replace(/\\r/g,"\r"));return e=e.replace(/\\/g,"\\\\").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\b]/g,
"\\b").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}return a instanceof String?new String(d(a.toString())):a}function h(a,b){return"1"===b?a:t(a)?a.replace(/\\\\/g,"\\-").replace(/\\b/g,"").replace(/\\f/g,"").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\-/g,"\\"):a instanceof String?new String(h(a.toString())):a}function j(a){return a.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function w(a,b,e){var g=f.async.deferred();f.ajax({url:a,async:b,cache:e,dataType:"script",converters:{"text script":function(a){return a}}}).done(function(){var a=
C(arguments);a.push(this.url);g.notifyWith(g,a);g.resolveWith(g,a)}).fail(function(){g.rejectWith(g,C(arguments))});return g.promise()}function n(a){t(a)||m(k,"h5.u.obj.ns()");for(var a=a.split("."),b=a.length,g=0;g<b;g++)wa(a[g])||m(k,"h5.u.obj.ns()");for(var c=window,g=0;g<b;g++){var i=a[g];typeof c[i]===e&&(c[i]={});c=c[i]}return c}function p(a,e){var g=n(a),c;for(c in e)e.hasOwnProperty(c)&&(void 0!==g[c]&&m(b,[a,c]),g[c]=e[c])}function x(b){return!b||!b.jquery?!1:b.jquery===a().jquery}function C(a){return Array.prototype.slice.call(a)}
function B(a,b){t(a)||m(k,"h5.u.obj.getByPath()");var a=a.replace(/\[(\d+)\]/g,function(a,b,e){return e?"."+b:b}),e=a.split("."),g=0;if("window"===e[0]&&(!b||b===window))g=1;for(var c=b||window,i=e.length;g<i&&!(c=c[e[g]],null==c);g++);return c}var e="undefined",k=11E3,b=11001,q=11004,l=11005,i=11006,g={},v={"&":"&amp;",'"':"&quot;","<":"&lt;",">":"&gt;","'":"&#39;"},y=void 0!==document.createElement("script").onload,S=-1===/\r\n/.toString().indexOf("\r\n");p("h5.u",{loadScript:function(b,e){var c=
f.async.deferred,i=I(b);(!i||0===i.length)&&m(11007);for(var d=0,q=i.length;d<q;d++)b=i[d],(!t(b)||!a.trim(b))&&m(11007);null!=e&&!a.isPlainObject(e)&&m(11008,"h5.u.loadScript()");var j=e&&!1===e.async?!1:!0,h=!!(e&&!0===e.force),d=!!(e&&!0===e.parallel),l=!!(e&&!0===e.atomic),k=!h,v=j?c():null,n=j?function(a){v.reject(da(11010,[a]))}:null,q=j?function(){var a=c();setTimeout(function(){a.resolve([])},0);return a.promise()}:null,p=d?[]:null,S=[],x={};if(j){if(!l&&y){var B=a("head"),D=function(a){var b=
c(),e=document.createElement("script");e.onload=function(){e.onload=null;g[a]=a;b.resolve()};e.onerror=function(){e.onerror=null;b.reject(a)};e.type="text/javascript";e.src=k?a:a+(-1<a.indexOf("?")?"&_":"?_")+ +new Date;B[0].appendChild(e);return b.promise()};if(d)p.push(q()),a.each(i,function(){var a=P(this.toString());if(!h&&a in g)return!0;p.push(D(a))}),ea(p,function(){v.resolve()},n);else{var J=fa(c().resolve(),q);a.each(i,function(){var a=P(this.toString());J=fa(J,function(){if(h||!(a in g))return D(a)},
n)});fa(J,function(){v.resolve()},n)}}else if(d){var R=[];p.push(q());R.push(null);a.each(i,function(){var a=P(this.toString());if(!h&&(a in g||a in x))return!0;p.push(w(a,j,k));l?x[a]=a:R.push(null)});d=i=null;l?(i=function(){a.each(C(arguments),function(b,e){a.globalEval(e[0])});a.extend(g,x);v.resolve()},d=a.noop):(i=function(){v.resolve()},d=function(){for(var b=C(arguments),e=0;e<R.length;e++)if(b[e]){var g=b[e][3];R[e]!==g&&(a.globalEval(b[e][0]),R.splice(e,1,g))}});f.async.when(p).done(i).fail(n).progress(d)}else J=
fa(c().resolve(),q),a.each(i,function(){var b=P(this.toString());J=fa(J,function(){var e=c();!h&&(b in g||b in x)?e.resolve():w(b,j,k).done(function(c){l?(S.push(c),x[b]=b):(a.globalEval(c),g[b]=b);e.resolve()}).fail(function(){e.reject(this.url)});return e.promise()},n)}),fa(J,function(){l&&(a.each(S,function(b,e){a.globalEval(e)}),a.extend(g,x));v.resolve()},n);return v.promise()}a.each(i,function(){var b=P(this.toString());if(!h&&(b in g||b in x))return!0;w(b,j,k).done(function(e){l?(S.push(e),
x[b]=b):(a.globalEval(e),g[b]=b)}).fail(function(){m(11010,[b])})});l&&(a.each(S,function(b,e){a.globalEval(e)}),a.extend(g,x))},createInterceptor:function(a,b){return function(e){var g={},c=a?a.call(this,e,g):e.proceed();e.result=c;if(!b)return c;if(c&&F(c.promise)&&!x(c)){var i=this;ra(c,"always",function(){b.call(i,e,g)});return c}b.call(this,e,g);return c}}});p("h5.u.str",{startsWith:function(a,b){return 0===a.lastIndexOf(b,0)},endsWith:function(a,b){var e=a.length-b.length;return 0<=e&&a.lastIndexOf(b)===
e},format:function(a,b){if(null==a)return"";var g=C(arguments).slice(1);return a.replace(/\{(.+?)\}/g,function(a,b){if(/^\d+$/.test(b)){var c=g[parseInt(b,10)];return typeof c===e?e:c}c=/^\d+[\.|\[]/.test(b)?b:"0."+b;c=B(c,g);return typeof c===e?e:c})},escapeHtml:function(b){return"string"!==a.type(b)?b:b.replace(/[&"'<>]/g,function(a){return v[a]})}});p("h5.u.obj",{expose:p,ns:n,serialize:function(b){function g(a){for(var b=0,e=h.length;b<e;b++)if(a===h[b])return!0;return!1}function i(a){for(var b=
0,e=h.length;b<e;b++)a===h[b]&&h.splice(b,1)}function q(b){var k=b,f=a.type(b);"object"===typeof b&&(b instanceof String?f="String":b instanceof Number?f="Number":b instanceof Boolean&&(f="Boolean"));switch(f){case "String":case "string":k=c(f)+d(k);break;case "Boolean":k=k.valueOf();case "boolean":k=c(f)+(k?1:0);break;case "Number":k=k.valueOf();if(a.isNaN&&a.isNaN(b)||a.isNumeric&&!a.isNumeric(b))k=Infinity===b.valueOf()?c("infinity"):-Infinity===b.valueOf()?c("-infinity"):c("nan");k=c(f)+k;break;
case "number":k=a.isNaN&&a.isNaN(b)||a.isNumeric&&!a.isNumeric(b)?Infinity===b?c("infinity"):-Infinity===b?c("-infinity"):c("nan"):c(f)+k;break;case "regexp":k=c(f)+d(k.toString(),S);break;case "date":k=c(f)+ +k;break;case "array":g(b)&&m(ERR_CODE_REFERENCE_CYCLE);h.push(b);for(var v=[],k=c(f)+"[",f=0,n=b.length;f<n;f++){v[f.toString()]=!0;var p;p=b.hasOwnProperty(f)?"function"===a.type(b[f])?c(e):j(q(b[f])):c("undefElem");k+='"'+p+'"';f!==b.length-1&&(k+=",")}var f="",y;for(y in b)v[y]||"function"!==
a.type(b[y])&&(f+='"'+j(d(y))+'":"'+j(q(b[y]))+'",');f&&(k+=(b.length?",":"")+'"'+c("objElem")+"{"+j(f),k=k.replace(/,$/,""),k+='}"');k+="]";i(b);break;case "object":g(b)&&m(l);h.push(b);k=c(f)+"{";for(y in b)b.hasOwnProperty(y)&&"function"!==a.type(b[y])&&(k+='"'+j(d(y))+'":"'+j(q(b[y]))+'",');k=k.replace(/,$/,"");k+="}";i(b);break;case "null":case e:k=c(f)}return k}F(b)&&m(11002);var h=[];return"2|"+q(b)},deserialize:function(b){function g(b){function k(a){switch(a){case "s":return"string";case "n":return"number";
case "b":return"boolean";case "S":return"String";case "N":return"Number";case "B":return"Boolean";case "i":return"infinity";case "I":return"-infinity";case "x":return"nan";case "d":return"date";case "r":return"regexp";case "a":return"array";case "o":return"object";case "l":return"null";case "u":return e;case "_":return"undefElem";case "@":return"objElem"}}b.match(/^(.)(.*)/);b=RegExp.$1;l=RegExp.$2?RegExp.$2:"";if(void 0!==b&&""!==b)switch(k(b)){case "String":l=new String(h(l,d));break;case "string":break;
case "Boolean":"0"===l||"1"===l?l=new Boolean("1"===l):m(i);break;case "boolean":"0"===l||"1"===l?l="1"===l:m(i);break;case "nan":""!==l&&m(i);l=NaN;break;case "infinity":""!==l&&m(i);l=Infinity;break;case "-infinity":""!==l&&m(i);l=-Infinity;break;case "Number":"infinity"===k(l)?l=new Number(Infinity):"-infinity"===k(l)?l=new Number(-Infinity):"nan"===k(l)?l=new Number(NaN):(l=new Number(l),isNaN(l.valueOf())&&m(i));break;case "number":l=(new Number(l)).valueOf();isNaN(l)&&m(i);break;case "array":var j;
try{j=a.parseJSON(l)}catch(f){m(i)}E(j)||m(i);for(var l=[],v=0,n=j.length;v<n;v++)switch(k(j[v].substring(0,1))){case "undefElem":l[v]=void 0;delete l[v];break;case "objElem":var b=g(c("object")+j[v].substring(1)),y;for(y in b)l[h(y)]=b[y];break;default:l[v]=g(j[v])}break;case "object":try{j=a.parseJSON(l)}catch(p){m(i)}a.isPlainObject(j)||m(i);l={};for(y in j)b=g(j[y]),l[h(y)]=b;break;case "date":l=new Date(parseInt(l,10));break;case "regexp":try{v=l.match(/^\/(.*)\/(.*)$/),n=h(v[1],d),l=RegExp(n,
v[2])}catch(w){m(i)}break;case "null":""!==l&&m(i);l=null;break;case e:""!==l&&m(i);l=void 0;break;default:m(q)}return h(l,d)}t(b)||m(11009);b.match(/^(.)\|(.*)/);var d=RegExp.$1;"1"!==d&&"2"!==d&&m(11003,[d,"2"]);return g(RegExp.$2)},isJQueryObject:x,argsToArray:C,getByPath:B})})();(function(){function c(a,c){a.target||(a.target=c);a.timeStamp||(a.timeStamp=(new Date).getTime());if(!a.isDefaultPrevented){var d=!1;a.isDefaultPrevented=function(){return d};a.preventDefault=function(){d=true}}if(!a.isImmediatePropagationStopped){var h=
!1;a.isImmediatePropagationStopped=function(){return h};a.stopImmediatePropagation=function(){h=true}}}function d(a){var c={},d;for(d in a){var h=a[d];if(a.hasOwnProperty(d)&&(F(h)||null===h||"string"===typeof h||"number"===typeof h||"boolean"===typeof h))c[d]=h}this._mix=function(a){for(var d in c)a[d]=c[d]};this._hasInterface=function(a){for(var d in c)if(!f.u.str.startsWith(d,"_")&&typeof a[d]===ja)return!1;return!0}}function h(a){return new d(a)}a.extend(d.prototype,{mix:function(a){return this._mix(a)},
hasInterface:function(a){return this._hasInterface(a)}});f.u.obj.expose("h5.mixin",{createMixin:h,eventDispatcher:h({hasEventListener:function(a,c){if(!this._eventListeners)return!1;var d=this._eventListeners[a];if(!d||!this._eventListeners.hasOwnProperty(a))return!1;for(var h=0,f=d.length;h<f;h++)if(d[h]===c)return!0;return!1},addEventListener:function(a,c){(2>arguments.length||!t(a))&&m(16E3);null==c||this.hasEventListener(a,c)||(this._eventListeners||(this._eventListeners={}),this._eventListeners.hasOwnProperty(a)||
(this._eventListeners[a]=[]),this._eventListeners[a].push(c))},removeEventListener:function(a,c){if(this.hasEventListener(a,c))for(var d=this._eventListeners[a],h=0,f=d.length;h<f;h++)if(d[h]===c){d.splice(h,1);break}},dispatchEvent:function(a){if(this._eventListeners){var d=this._eventListeners[a.type];if(d){d=d.slice(0);c(a,this);for(var h=0,f=d.length;h<f&&!a.isImmediatePropagationStopped();h++)F(d[h])?d[h].call(a.target,a):d[h].handleEvent&&d[h].handleEvent(a);return a.isDefaultPrevented()}}}})})})();
(function(){var c,d,h,j,w,n,p;function x(a){return a.match(/^error$/i)?c:a.match(/^warn$/i)?d:a.match(/^info$/i)?h:a.match(/^debug$/i)?j:a.match(/^trace$/i)?w:a.match(/^all$/i)?n:a.match(/^none$/i)?p:null}function C(a,b){var e={},c=a.slice(0,b),g=Math.min(S,b),d=c.slice(0,g).join(" <- ");c.length>g&&(d+=" ...");e.preview=d;e.all=c.join("\n");return e}function B(a){var b="";a.name?b=a.name:(/^\s*function\s*([\w\-\$]+)?\s*\(/i.test(a.toString()),b=RegExp.$1);return b}function e(b){for(var b=f.u.obj.argsToArray(b),
e=[],c=0,g=b.length;c<g;c++)e.push(a.type(b[c]));return e.join(", ")}function k(){}function b(b){(!t(b)||0===a.trim(b).length)&&m(i);this.category=a.trim(b)}var q=10003,l=10004,i=10005,g=10007,v=10008,y=10010,S=3;c=50;d=40;h=30;j=20;w=10;n=0;p=-1;var A=null;k.prototype={init:function(){},log:function(a){window.console&&(t(a.args[0])?this._logMsg(a):this._logObj(a))},_logMsg:function(a){var b=a.args,e=null,e=1===b.length?b[0]:f.u.str.format.apply(f.u.str,b),b=this._getLogPrefix(a)+e;a.logger.enableStackTrace&&
(b+="  ["+a.stackTrace.preview+"]");a.logger.enableStackTrace&&console.groupCollapsed?console.groupCollapsed(b):this._consoleOut(a.level,b);a.logger.enableStackTrace&&this._consoleOut(a.level,a.stackTrace.all);a.logger.enableStackTrace&&console.groupEnd&&console.groupEnd()},_consoleOut:function(a,b){var e=!1;a==c&&console.error?(console.error(b),e=!0):a==d&&console.warn?(console.warn(b),e=!0):a==h&&console.info?(console.info(b),e=!0):a==j&&console.debug&&(console.debug(b),e=!0);!e&&console.log&&console.log(b)},
_getLogPrefix:function(a){return"["+a.levelString+"]"+a.date.getHours()+":"+a.date.getMinutes()+":"+a.date.getSeconds()+","+a.date.getMilliseconds()+": "},_logObj:function(a){var b=a.args,e=this._getLogPrefix(a);b.unshift(e);a.level==c&&console.error?this._output(console.error,b):a.level==d&&console.warn?this._output(console.warn,b):a.level==h&&console.info?this._output(console.info,b):a.level==j&&console.debug?this._output(console.debug,b):this._output(console.log,b)},_output:function(a,b){try{if(a.apply){a.apply(console,
b);return}}catch(e){}a(b)}};b.prototype={enableStackTrace:!1,maxStackSize:10,error:function(a){this._log(c,arguments,this.error)},warn:function(a){this._log(d,arguments,this.warn)},info:function(a){this._log(h,arguments,this.info)},debug:function(a){this._log(j,arguments,this.debug)},trace:function(a){this._log(w,arguments,this.trace)},_traceFunctionName:function(b){var c=[],g=Error();if(g=g.stack||g.stacktrace)var d=/_traceFunctionName/,c=g.replace(/\r\n/,"\n").replace(/at\b|@|Error\b|\t|\[arguments not available\]/ig,
"").replace(/(http|https|file):.+[0-9]/g,"").replace(/ +/g," ").split("\n"),i=null,l=null,c=a.map(c,function(b,e){if(0===b.length)return null==l?"":null;i=""===a.trim(b)?"{anonymous}":a.trim(b);null===l&&d.test(b)&&(l=e);return i}).slice(l+3);else for(var b=b.caller,g=0,k=this.maxStackSize;g<k;g++){var h=B(b),q=e(b.arguments),f;try{f=b.caller}catch(v){c.push("{unable to trace}");break}h?c.push("{"+h+"}("+q+")"):f?c.push("{anonymous}("+q+")"):c.push("{root}("+q+")");if(!f)break;b=f}return C(c,this.maxStackSize)},
_log:function(a,b,e){var b={level:a,args:f.u.obj.argsToArray(b),stackTrace:this.enableStackTrace?this._traceFunctionName(e):""},c=A.out,g=A.defaultOut,e=[],d=!1;if(c)for(var c=I(c),i=0,l=c.length;i<l;i++){var k=c[i];if(k.compiledCategory.test(this.category)&&a>=k.compiledLevel&&0<=k.compiledLevel&&(e.push(k),!1!==k.terminate)){d=!0;break}}(!e.length||!d)&&e.push(g);i=0;for(c=e.length;i<c;i++){g=e[i];l=g.compiledLevel;g=g.compiledTargets;if(a<l||0>l)break;b.logger=this;b.date=new Date;b.levelString=
this._levelToString(a);if(!g||0===g.length)break;d=0;for(l=g.length;d<l;d++)g[d].log(b)}},_levelToString:function(a){if(a===c)return"ERROR";if(a===d)return"WARN";if(a===h)return"INFO";if(a===j)return"DEBUG";if(a===w)return"TRACE"}};f.u.obj.expose("h5.log",{createLogger:function(a){return new b(a)},configure:function(){function b(c,k,h){if(!h){var f=k.category;(!t(f)||0===a.trim(f).length)&&m(y);f=a.trim(f);k.compiledCategory=Fa(f);i.push(f)}h=null==k.level?x(h?e.level:d.level):t(k.level)?x(a.trim(k.level)):
k.level;"number"!==typeof h&&m(q,k.level);k.compiledLevel=h;h=[];f=k.targets;if(null!=f){var j=[];null==f||E(f)||t(f)&&a.trim(f).length||m(v);for(var f=I(f),n=0,D=f.length;n<D;n++){null==f[n]||t(f[n])&&a.trim(f[n]).length||m(v);var p=f[n];if(p){-1!==a.inArray(p,j)&&m(g,p);var w=c[p];w||m(l,p);j.push(p);h.push(w.compiledTarget)}}}k.compiledTargets=h}var e={level:"NONE",targets:null},c=a.extend(!0,{},f.settings.log),d=c.defaultOut;d||(d=e,c.defaultOut=d);var i=[],h=c.target;h||(h={},c.target=h);(function(b){a.isPlainObject(b)||
m(10009);for(var e in b){var c=b[e];a.type(c.type)!=="object"&&c.type!=="console"&&m(1E4);var g=null,g=c.type==="console"?new k:a.extend(true,{},c.type);g.init&&g.init(c);c.compiledTarget=g}b.console={type:"console",compiledTarget:new k}})(h);b(h,d,!0);var j=c.out;if(j)for(var j=I(j),n=0,p=j.length;n<p;n++)b(h,j[n]);A=c}})})();(function(){function c(c){f.settings.aspects=a.map(I(c),function(a){a.target&&(a.compiledTarget=Fa(a.target));a.pointCut&&(a.compiledPointCut=Fa(a.pointCut));return a})}f.u.obj.ns("h5.settings");
f.settings={commonFailHandler:null,aspects:null,log:null,listenerElementType:1,dynamicLoading:{retryCount:3,retryInterval:500},ajax:{retryCount:0,retryInterval:500,retryFilter:function(a){a=a.status;if("POST"===this.type||!(0===a||a===ub))return!1}},trackstartTouchAction:"none",res:{baseUrl:null,resolveTimeout:1E4},scene:{followTitle:!0,clientQueryStringPrefix:"",clientFWQueryStringPrefix:"_h5_",urlHistoryMode:"history",urlMaxLength:1800,baseUrl:null,autoInit:!1}};var d=f.u.createInterceptor(function(a,
c){this.log.info("{0}.{1}が開始されました。",this.__name,a.funcName);this.log.info(a.args);c.start=new Date;return a.proceed()},function(a,c){var d=(new Date).getTime()-c.start.getTime();this.log.info("{0}.{1}が終了しました。 Time={2}ms",this.__name,a.funcName,d)});f.u.obj.expose("h5.core.interceptor",{lapInterceptor:d,logInterceptor:d,errorInterceptor:function(a){var c=null;try{c=a.proceed()}catch(d){f.settings.commonFailHandler&&F(f.settings.commonFailHandler)&&f.settings.commonFailHandler.call(null,d)}return c}});
a(document).trigger("h5preinit");f.settings.aspects&&c(f.settings.aspects);f.log.configure()})();(function(){f.u.obj.expose("h5.env",{ua:function(c){function d(a,b){var e=t(a,"[^;)]*",b).split(" ");return 1===e.length?"":e[e.length-1]}function h(a,b){var e=t(a,"[^;) ]*",b).split("/");return 1===e.length?"":e[e.length-1]}function f(a,b){var e=t(a,"[^;) ]*",b).split(":");return 1===e.length?"":e[e.length-1]}var m=!!c.match(/iPhone/i),n=!!c.match(/iPad/i),p=m||n,x=!!c.match(/android/i),C=!!c.match(/Windows Phone/i),
B=!!c.match(/Edge/),e=!!c.match(/MSIE/)||!!c.match(/Trident/),k=!!c.match(/Firefox/i),b=!B&&!!c.match(/Chrome/i)||!!c.match(/CrMo/)||!!c.match(/CriOS/),q=!B&&!x&&!b&&!!c.match(/Safari/i),l=!B&&!!c.match(/Webkit/i),i=!!c.match(/Opera/i),g=x&&!!c.match(/Safari/i)&&!b,v=!(!m&&!C&&!(g&&c.match(/Mobile/)&&!c.match(/SC-01C/)||x&&b&&c.match(/Mobile/)||c.match(/Fennec/i)||c.match(/Opera Mobi/i))),y=!(!n&&!(g&&!c.match(/Mobile/)||x&&b&&!c.match(/Mobile/)||c.match(/SC-01C/)||c.match(/Fennec/i)||c.match(/Opera Tablet/i))),
S=!v&&!y,A=null,G=null,Y=function(b,e){return a.trim(c.substring(c.indexOf(b)+b.length,c.indexOf(e))).split("_")},t=function(b,e,g){return a.trim(c.match(!1===g?RegExp(b+e):RegExp(b+e,"i")))};if(m)G=Y("iPhone OS","like"),A=parseInt(G[0]),G=G.join(".");else if(n)G=Y("CPU OS","like"),A=parseInt(G[0]),G=G.join(".");else if(!x||!k)x?(G=d("Android"),A=parseInt(G.split(".")[0])):C&&((G=d("Windows Phone OS"))||(G=d("Windows Phone")),A=parseInt(G.split(".")[0]));e&&i&&(e=!1);var za=Y=null;if(p||x&&g)Y=A,
za=G;else{var L=null;e?L=d("MSIE",!1)||f("rv"):b?(L=h("Chrome",!1))||(L=h("CrMo",!1)):q?L=h("Version"):k?L=h("Firefox"):i?((L=h("Version"))||(L=h("Opera")),L||(L=d("Opera"))):B&&(L=h("Edge"));L&&(Y=parseInt(L.split(".")[0]),za=L)}return{osVersion:A,osVersionFull:G,browserVersion:Y,browserVersionFull:za,isiPhone:m,isiPad:n,isiOS:p,isAndroid:x,isWindowsPhone:C,isIE:e,isFirefox:k,isChrome:b,isSafari:q,isOpera:i,isEdge:B,isAndroidDefaultBrowser:g,isSmartPhone:v,isTablet:y,isDesktop:S,isWebkit:l}}(navigator.userAgent)})})();
(function(){function c(a){function c(){b=!0;d=this;l=p(arguments);if(va(a)||Ma(a))return a;var g=p(arguments);if(0<i.length)for(var k=0,h=i.length;k<h;k++){var f=g;f!==arguments&&(f=I(f));F(i[k])&&i[k].apply(this,f)}return a}var b=!1,d=null,l=null,i=[];a.progress=function(){for(var c=p(arguments),k=0,h=c.length;k<h;k++){var f=c[k];if(E(f))a.progress.apply(this,f);else if(F(f))if(b){var j=l;j!==l&&(j=I(j));f.apply(d,j)}else i.push(f)}return this};a.notify=c;a.notifyWith=function(a,b){return!b?c.apply(a):
c.apply(a,b)}}function d(a){if(!a)return!1;for(var a=I(a),c=0,b=a.length;c<b;c++)if(F(a[c]))return!0;return!1}function h(e,k){function b(a){k?k[a]&&(e[a]=k[a]):(v[a]=e[a],e[a]=function(){return function(){if(!i){var b=p(arguments);if("then"===a||"pipe"===a)b=b[1];d(b)&&(i=!0)}return e._h5UnwrappedCall.call(this,a,p(arguments))}}(a),y[a]=e[a])}function q(a){return function(){var b=f.settings.commonFailHandler;!i&&b&&!g&&(e.fail.call(this,b),g=!0);return a.apply(this,arguments)}}if(e._h5UnwrappedCall)return e;
var l=!!e.progress;!l&&!B(e)?c(e):k&&(e.progress=k.progress);var i=!1,g=!1,v={},y={};e._h5UnwrappedCall=k?k._h5UnwrappedCall:function(b,c){c=I(c);a.extend(e,v);var g=e[b].apply(this,c);a.extend(e,y);return g};for(var m=0,A=j.length;m<A;m++){var C=j[m];e[C]&&b(C)}e.pipe&&!k&&(e.pipe=function(){for(var a=f.async.deferred(),b=p(arguments),e=0,c=w.length;e<c;e++){var g=this;(function(b,e,c){function d(){if(i){var e=b.apply(this,arguments);if(e&&F(e.promise)){h(e);e.done(a.resolve);e._h5UnwrappedCall("fail",
a.reject);F(e.progress)&&e.progress(a.notify)}else a[c+"With"](this,[e])}else a[c+"With"](this,arguments)}var i=F(b);if(!i&&e==="fail")g._h5UnwrappedCall(e,d);else g[e](d)})(b[e],w[e],n[e])}return a.promise()},y.pipe=e.pipe);if(e.then&&!k){var t=e.then;e.then=x?e.pipe:function(){var a=arguments,b=t.apply(this,a);!l&&d(a[2])&&e.progress.call(e,a[2]);return b};y.then=e.then}e.reject&&(e.reject=k&&k.reject?k.reject:q(e.reject));e.rejectWith&&(e.rejectWith=k&&k.rejectWith?k.rejectWith:q(e.rejectWith));
if(e.promise)if(k&&k.promise)e.promise=k.promise;else{var ga=e.promise;e.promise=function(){return h(ga.apply(this,arguments),e)}}return e}var j=["fail","always","pipe","then"],w=["done","fail","progress"],n=["resolve","reject","notify"],p=f.u.obj.argsToArray,x=function(){var e=a.Deferred();return e!==e.then()}(),C=function(){var e=a.Deferred();return h(e)},B=function(a){return!!a&&a.done&&a.fail&&!a.resolve&&!a.reject};f.u.obj.expose("h5.async",{deferred:C,when:function(){var e=p(arguments);1===
e.length&&E(e[0])&&(e=e[0]);var c=e.length,b=f.async.deferred(),d=b.promise(),l=a.when.apply(a,e).done(function(){b.resolveWith(this&&this.promise&&this.promise()===l?b:this,p(arguments))}).fail(function(){b.rejectWith(this,p(arguments))});if(l.progress)l.progress(function(){b.notifyWith(this===l?d:this,p(arguments))});else{for(var i=[],g=0;g<c;g++)i[g]=void 0;for(var h=function(a){return function(e){i[a]=1<arguments.length?p(arguments):e;b.notifyWith(d,i)}},g=0;g<c;g++){var j=e[g];j&&F(j.promise)&&
j.progress&&(1<c?j.progress(h(g)):j.progress(function(){b.notifyWith(d,p(arguments))}))}}return d},isPromise:B,loop:function(e,c,b){E(e)||m(5E3);var d=C(),l="number"===a.type(b)?b:20,i=0,g=e.length,h,f=null,j=function(){if(i===g)d.resolve(e);else{var a=c.call(e,i,e[i],f);i++;B(a)?a.done(function(){h()}).fail(function(){d.reject(e)}):h()}},n=function(){setTimeout(function(){var a=i-1;0<i&&d.notify({data:e,index:a,value:e[a]});j()},0)},p=!1;h=function(){p||(0===i%l?n():j())};var w=!1,f={resume:function(){!w&&
p&&(p=!1,h())},pause:function(){p=!0},stop:function(){w=!0;d.resolve(e)}};n();return d.promise()}})})();(function(){function c(a,c){for(var d=0,h=m.length;d<h;d++){var e=m[d];a[e]&&(c[n[e]](a[e]),a[e]=void 0)}}function d(c,d,h){for(var f in d)if(d.hasOwnProperty(f)&&(h||!F(d[f]))&&-1===a.inArray(f,j))c[f]=d[f]}function h(a,c){d(this,a,!0);c.promise(this);var h=this.always;this.always=function(){h.apply(this,arguments);return this}}var j=["error","success","complete"],m=["error","success","complete"],
n={success:"done",error:"fail",complete:"always"};f.u.obj.expose("h5",{ajax:function(){function j(a,c,h){d(k,h);e.resolveWith(this,arguments)}function n(b,c,h){if(0===m.retryCount||!1===m.retryFilter.apply(this,arguments))d(k,b),e.rejectWith(this,arguments);else if(m.retryCount--,this.async){var i=this;setTimeout(function(){a.ajax(i).done(j).fail(n)},m.retryInterval)}else a.ajax(this).done(j).fail(n)}var m={},w=arguments;t(w[0])?(a.extend(m,w[1]),m.url=w[0]):a.extend(m,w[0]);var m=a.extend({},f.settings.ajax,
m),e=f.async.deferred();c(m,e);var w=a.ajax(m),k=new h(w,e);w.done(j).fail(n);return k}})})();(function(){function c(a,c){this.id=a;this.content=c}function d(a,c,b){this.url=a;this.path=c;this.content=b}function h(a){this._resourceKey=a}function j(a){function c(a,b){if(0!==b.indexOf("../"))return a+b;b=b.slice(3);a=a.replace(/[^\/]+?\/$/,"");return c(a,b)}var b=f.settings.res.baseUrl;if(a===P(a)||0===a.indexOf("/"))return a;if(!b)return 0===a.indexOf("./")?a:"./"+a;f.u.str.endsWith(b,"/")||(b+="/");
return c(b,a)}function m(a,c,b){void 0===b&&F(a)&&(b=a,a=void 0);p.unshift({type:a,test:c,resolver:b})}var n=f.async.deferred,p=[],x={};waitingInfoMap={};waitingForImmediateDeferred=[];waitingImmediateTimer=null;var C={MAX_CACHE:10,cache:{},cacheUrls:[],accessingUrls:{},append:function(a){this.cacheUrls.length>=this.MAX_CACHE&&this.clearCache(this.cacheUrls[0]);var c=a.url;this.cache[c]=a;this.cacheUrls.push(c)},clearCache:function(a,c){var b=P(a);c||delete this.cache[b];for(var d=0,h=this.cacheUrls.length;d<
h;d++)if(this.cacheUrls[d]===b){this.cacheUrls.splice(d,1);break}},clearAllCache:function(){this.cacheUrls=[];this.cache={}},getResourceFromCache:function(a){var c=this.cache[a];this.clearCache(a,!0);this.cacheUrls.push(a);return c},loadResourceFromPath:function(a){var c=P(a);if(this.accessingUrls[c])return this.accessingUrls[c];var b=n(),h=b.promise();this.accessingUrls[c]=h;var l=this;f.ajax(a,{dataType:"text"}).done(function(i,g,h){delete l.accessingUrls[c];i=new d(c,a,h.responseText);l.append(i);
b.resolve(i)}).fail(function(d){delete l.accessingUrls[c];b.reject(da(17E3,[d.status,c],{url:c,path:a,error:d}))});return h}},B={load:function(a){var c=P(a);return C.cache[c]?n().resolve(C.getResourceFromCache(c)).promise():C.loadResourceFromPath(a)},clearCache:function(a){C.clearCache(a)},clearAllCache:function(){C.clearAllCache()}};a.extend(h.prototype,{resolve:function(e){function c(b){for(var d=0,g=p.length;d<g;d++)if(!(e&&e!==p[d].type)){var i=p[d].test;if(!e&&i)if("regexp"===a.type(i)){if(!i.test(b))continue}else if(!1===
i(b))continue;return p[d].resolver(b,e)}return!1}if(!E(this._resourceKey))return c(this._resourceKey);for(var b=this._resourceKey,d=[],h=0,i=b.length;h<i;h++){var g=c(b[h]);d.push(g)}var j=f.async.deferred();ea(d,function(a){E(a)||(a=[a]);a.unshift(a.slice(0));j.resolveWith(j,a)},function(a){j.reject(a)});return j.promise()},getKey:function(){return this._resourceKey}});m("namespace",null,function(a){var c=x[a]||f.u.obj.getByPath(a);if(c)return n().resolve(c).promise();if(waitingInfoMap[a])return waitingInfoMap[a].deferred.promise();
var c=j(a.replace(/\./g,"/"))+".js",b=n(),d=f.settings.res.resolveTimeout,h=null;0<d&&(h=setTimeout(function(){waitingInfoMap[a]&&(delete waitingInfoMap[a],b.reject(da(17001,[a])))},d));waitingInfoMap[a]={deferred:b,timer:h};f.u.loadScript(c).done(function(){var c=x[a]||f.u.obj.getByPath(a);c&&waitingInfoMap[a]&&(x[a]=c,delete waitingInfoMap[a],clearTimeout(h),b.resolve(c))}).fail(function(c){clearTimeout(h);delete waitingInfoMap[a];b.reject(c)});return b.promise()});m("ejsfile",/.*\.ejs(\?.*$|$)/,
function(e){var d=n();B.load(j(e)).done(function(b){var e=a(b.content).filter(function(){return 1===this.nodeType&&0!==this.tagName.indexOf("/")}),h=[];0<e.not('script[type="text/ejs"]').length?d.reject(da(7011,null,{url:b.url,path:b.path})):(0===e.length&&d.reject(da(7001,null,{url:b.url,path:b.path})),e.each(function(){var e=a.trim(this.id);e||d.reject(da(7002,null,{url:b.url,path:b.path}));var g=a.trim(this.innerHTML);h.push(new c(e,g))}),d.resolve({url:b.url,path:b.path,templates:h}))}).fail(function(a){var c=
a.detail,c=da(7003,[c.error.status,c.url],c);a.code=c.code;a.message=c.message;a.detail=a.detail;d.reject(a)});return d.promise()});m("jsfile",/.*\.js(\?.*$|$)/,function(a){return f.u.loadScript(j(a))});m("cssfile",/.*\.css(\?.*$|$)/,function(a){var c=document.getElementsByTagName("head")[0],b=document.createElement("link");b.type="text/css";b.rel="stylesheet";b.href=j(a);c.appendChild(b);return n().resolve(b).promise()});f.u.obj.expose("h5.res",{dependsOn:function(a){return new h(a)},isDependency:function(a){return a instanceof
h},register:function(a,c,b,d){b&&(d?f.u.obj.expose(d,c):f.u.obj.expose(a,c));x[a]=c;if(b=waitingInfoMap[a])delete waitingInfoMap[a],a=b.deferred,(b=b.timer)&&clearTimeout(b),waitingForImmediateDeferred.push({dfd:a,value:c}),waitingImmediateTimer||(waitingImmediateTimer=setTimeout(function(){waitingImmediateTimer=null;for(var a=waitingForImmediateDeferred.splice(0,waitingForImmediateDeferred.length),b=0,c=a.length;b<c;b++)a[b].dfd.resolve(a[b].value)},0))},get:function(a){return f.res.dependsOn(a).resolve()}})})();
(function(){function c(a){null!=a.style.transform&&(a.style.transform="");null!=a.style.mozTansform&&(a.style.mozTansform="");null!=a.style.webkitTansform&&(a.style.webkitTansform="")}function d(a,b,c,e){if(!Ya){Ya={};var a=new Oa(null,"a"),d;for(d in a)a.hasOwnProperty(d)&&"__name"!==d&&"__templates"!==d&&"__meta"!==d&&(Ya[d]=1);a=Oa.prototype;for(d in a)a.hasOwnProperty(d)&&(Ya[d]=null)}for(var g in c)g in Ya&&m(zb,[e,g],{controllerDefObj:c})}function h(b,c){function e(d,g){-1!==a.inArray(d,g)&&
m(Ab,[c],{controllerDefObj:b});k(d,function(a){e(a,g.concat([d]))},!0)}e(b,[])}function j(c){function e(d,g){-1!==a.inArray(d,g)&&m(Bb,[c.__name],{logicDefObj:c});b(d,function(a){e(a,g.concat(d))})}e(c,[])}function w(b,c,e){null==b&&m(r,[e],{controllerDefObj:c});!t(b)&&"object"!==typeof b&&m(vb,[e],{controllerDefObj:c});b=a(b);0===b.length&&m(sa,[e],{controllerDefObj:c});1<b.length&&m(Pa,[e],{controllerDefObj:c});b[0].nodeType!==jb&&b[0].nodeType!==$&&m(Cb,[e],{controllerDefObj:c})}function n(a,b,
c,e,d){this.controller=a;this.event=b;this.evArg=c;this.selector=e;this.selectorType=d}function p(a){if(!z(this)&&this.__controllerContext.executeListeners)return a.proceed()}function x(a,b,c){var e=C(a.__name,b);c&&e.push(p);return B(a[b],b,e)}function C(a,b){var c=[],e=f.settings.aspects;if(!e||0===e.length)return c;for(var e=I(e),d=e.length-1;-1<d;d--){var g=e[d];if(!g.target||g.compiledTarget.test(a)){var r=g.interceptors;if(!g.pointCut||g.compiledPointCut.test(b))if(E(r))for(g=r.length-1;-1<
g;g--)c=c.concat(r[g]);else c.push(r)}}return c}function B(a,b,c){for(var e=function(a,b,c){return function(){var e=this;return c.call(e,{target:e,func:a,funcName:b,args:arguments,proceed:function(){return a.apply(e,this.args)}})}},d=0,g=c.length;d<g;d++)a=e(a,b,c[d]);return a}function e(a,b,c){if(c&&a===kb)return c.rootElement;for(var e=["window","document","navigator"],d=0,g=e.length;d<g;d++){var r=e[d];if(a===r||xa(a,r+"."))return f.u.obj.getByPath(a,U(b))}return c&&xa(a,"this.")?f.u.obj.getByPath(a.slice(5),
c):a}function k(a,b,c){if(c){var e=Aa.get(a.__name);if(e){c=0;for(g=e.childControllerProperties.length;c<g;c++){var d=e.childControllerProperties[c];if((r=a[d])&&!1===b(a[d],a,d))return!1}}else for(d in a){var e=a,g=d,r=c,i=e[g];if(Za(g,Ha)&&"rootController"!==g&&"parentController"!==g&&i&&(r||i.__controllerContext&&!i.__controllerContext.isRoot&&(!i.parentController||i.parentController===e))&&!1===b(a[d],a,d))return!1}}else if(!z(a))for(var d=a.__controllerContext.childControllers,c=0,g=d.length;c<
g;c++){var r=d[c];if(!1===b(r,a))return!1}}function b(a,b){var c=Aa.get(a.__name);if(c)for(var e=0,d=c.logicProperties.length;e<d;e++){var g=c.logicProperties[e];if(!1===b(a[g],a,g))return!1}else for(g in a)if(a.hasOwnProperty(g)&&Za(g,o)&&!1===b(a[g],a,g))return!1}function q(a,b,c,e){return!1===b.call(this,a,c,e)?!1:k(a,function(a,c,e){if(q(a,b,c,e)===false)return false})}function l(a,b,c,e){if(!1===k(a,function(a,c,e){if(!a||!1===l(a,b,c,e))return!1})||!1===b.call(this,a,c,e))return!1}function i(a,
b){var c=[];k(a,function(a){(a=a[b])&&c.push(a)});return c}function g(a){var b=a.__controllerContext.cache.bindMap,c=M(a.rootElement),e;for(e in b)for(var d=v(a,b[e],a[e]),g=0,r=d.length;g<r;g++)y(d[g],c)}function v(b,c,e){function d(b){var c=b.handler,e=b.controller;b.originalHandler||(b.originalHandler=c);b.handler=function(){var d=!b.isNativeBind&&f.settings.listenerElementType===1?a(this):this;c.call(e,D(b,arguments),d)}}var g=c.selector,r=c.eventName,i=c.bindTarget,o=c.isGlobal,h=c.isBindRequested;
switch(r){case "mousewheel":e=Na(b,r,e);break;case s:case u:case la:var e=H(b,r,e),l=b.__controllerContext,r=!1;l.h5trackEventHandlerInfos=l.h5trackEventHandlerInfos||[];for(var k=l.h5trackEventHandlerInfos,l=0,j=k.length;l<j;l++){var q=k[l];if(i){if(ma(i,q.bindTarget)){r=!0;break}}else if(g===q.selector&&o===q.isGlobal&&h===q.isBindRequested){r=!0;break}}r||(e=yb(b).concat(e),k.push(c));break;default:e=N(b,r,e)}E(e)||(e=[e]);l=0;for(j=e.length;l<j;l++)c=e[l],d(c),c.isBindRequested=h,c.isGlobal=o,
c.bindTarget=i,c.selector=g,c.controller=b;return e}function y(b,c){var d=b.controller,g=d.rootElement,r=b.selector,i=b.eventName,o=b.handler,h=b.isBindRequested,l=b.isGlobal;b.bindTarget?(b.evSelectorType=oa.SELECTOR_TYPE_OBJECT,P(b)):l?(d=e(r,c,d),h||!t(d)?(b.evSelectorType=oa.SELECTOR_TYPE_OBJECT,b.bindTarget=t(d)?a(d):d,P(b)):(b.evSelectorType=oa.SELECTOR_TYPE_GLOBAL,a(c).delegate(d,i,o)),b.evSelector=d):(b.evSelectorType=oa.SELECTOR_TYPE_LOCAL,b.evSelector=r,h?(b.bindTarget=a(r,g),P(b)):a(g).delegate(r,
i,o));b.isBindCanceled||(b.controller.__controllerContext.boundHandlers.push(b),Fa&&i===s&&null!=f.settings.trackstartTouchAction&&(l?a(b.evSelector,c):a(b.evSelector,g)).each(function(){this.style[ya]=f.settings.trackstartTouchAction}))}function S(b,c,e){var d=b.controller,g=d.rootElement,r=b.selector,i=b.handler,o=b.eventName,h=b.isGlobal;if(b.bindTarget)c=b.bindTarget,g=b.eventName,r=b.handler,b.isNativeBind?c.removeEventListener(g,r):a(c).unbind(g,r);else if(h){if(null==U(c))return;a(c).undelegate(r,
o,i)}else a(g).undelegate(r,o,i);e||(e=d.__controllerContext.boundHandlers,e.splice(a.inArray(b,e),1))}function A(a,b){q(a,function(a){a.__controllerContext.executeListeners=b})}function G(a,b,c){return function(){var e=null,d=a[b],g=a.__name,r=!1,r="__init"===b?a.isInit:"__postInit"===b?a.isPostInit:a.isReady;if(!r&&d)try{e=a[b]({args:a.__controllerContext.args})}catch(i){ba(a,i)}e&&F(e.done)&&F(e.fail)?e.done(c).fail(function(){var b=da(Db,g,Qa(arguments));ba(a.rootController,null,b)}):c()}}function Y(a,
b){Ba(a)||q(a,function(c){var e,d;"__init"===b?(e=L(c),d=[c.preInitPromise],c.parentController&&d.push(c.parentController.initPromise)):"__postInit"===b?(e=T(c),d=ga(c)):(e=Va(c),d=za(c));var g=a.__controllerContext;g.waitingPromisesManagerMap=g.waitingPromsiesManager||{};g.waitingPromisesManagerMap[b]=ea(d,G(c,b,e))})}function ga(a){var b=i(a,"postInitPromise");b.push(a.initPromise);return b}function za(a){var b=i(a,"readyPromise");b.push(a.postInitPromise);return b}function L(b){return function(){function c(){var a=
!0;q(b.rootController,function(b){return a=b.isInit});return a}if(!ca(b))if(b.isInit)c()&&Xa(b.rootController);else{b.isInit=!0;var e=b.__controllerContext.initDfd;delete b.__controllerContext.templatePromise;delete b.__controllerContext.preInitDfd;delete b.__controllerContext.initDfd;var d=b.rootElement;try{var g=b.__meta,r=b.__controllerContext.childControllers,i;for(i in g)-1!==a.inArray(b[i],r)&&(b[i].__controllerContext.metaRootElement=g[i]&&g[i].rootElement);k(b,function(a){var c=a.__controllerContext.metaRootElement;
delete a.__controllerContext.metaRootElement;a.rootElement||(c=c?R(c,a,b):d,w(c,a.__controllerContext.controllerDef,a.__name),a.rootElement=c,a.view.__controller=a)})}catch(o){ba(b,o);return}g=c();e.resolveWith(b);!ca(b)&&g&&Xa(b.rootController)}}}function T(b){return function(){if(!ca(b)){b.isPostInit=!0;var c=b.__controllerContext;c.waitingPromsiesManager=c.waitingPromsiesManager||{};c.waitingPromsiesManager.__postInit=ea(ga(b),function(){if(!ca(b)){var e=c.postInitDfd;if(e&&(delete c.postInitDfd,
e.resolveWith(b),!ca(b)&&!c.isExecutedBind))if(c.isRoot){var e=b.__meta,d=c.childControllers,r;for(r in e)-1!==a.inArray(b[r],d)&&(b[r].__controllerContext.metaUseHandlers=e[r]&&e[r].useHandlers);q(b,function(a){var b=a.__controllerContext.metaUseHandlers;delete a.__controllerContext.metaUseHandlers;a.__controllerContext.isExecutedBind||(a.__controllerContext.isExecutedBind=!0,!1!==b&&g(a))});if(!1!==c.managed&&(a(b.rootElement).trigger("h5controllerbound",b),ca(b)))return;K(b)}else b.rootController.isPostInit&&
((!b.parentController.__meta||!1!==b.parentController.__meta.userHandlers)&&g(b),K(b.rootController))}})}}}function Va(b){return function(){if(!ca(b)){b.isReady=!0;var c=b.__controllerContext;c.waitingPromsiesManager=c.waitingPromsiesManager||{};c.waitingPromsiesManager.__ready=ea(za(b),function(){if(!ca(b)){var e=c.readyDfd;e&&(delete c.readyDfd,e.resolveWith(b),!ca(b)&&c.isRoot&&a(b.rootElement).trigger("h5controllerready",b))}})}}}function aa(b,c){if(!t(b))return a(b);var d=a.trim(b);return db.test(d)?
(d=a.trim(d.substring(1,d.length-1)),a(e(d,M(c.rootElement),c))):a(c.rootElement).find(b)}function N(a,b,c){return{controller:a,eventName:b,handler:c}}function Na(a,b,c){return{controller:a,eventName:typeof document.onmousewheel===ja?"DOMMouseScroll":b,handler:function(b){var e=b.event;null==e.wheelDelta&&e.originalEvent&&null!=e.originalEvent.wheelDelta&&(e.wheelDelta=e.originalEvent.wheelDelta);null==e.wheelDelta&&e.originalEvent&&null!=e.originalEvent.detail&&(e.wheelDelta=40*-e.originalEvent.detail);
c.call(a,b)}}}function H(b,c,e){var d=null;if(c===s)return N(b,c,e);d=N(b,c,function(b){var c=b.event,d=c.h5DelegatingEvent;if(!d)return e.apply(this,arguments);d=d.type;if("mousemove"===d||"mouseup"===d)d=a(c.currentTarget).offset()||{left:0,top:0},c.offsetX=c.pageX-d.left,c.offsetY=c.pageY-d.top;e.apply(this,arguments)});d.originalHandler=e;return d}function yb(b,c){function e(a,b){for(var c in a)a.hasOwnProperty(c)&&!b[c]&&"target"!==c&&"currentTarget"!==c&&"originalEvent"!==c&&"liveFired"!==c&&
(b[c]=a[c]);b.h5DelegatingEvent=a}function d(c,g,r){return function(f){var l;a:{switch(c){case "touchstart":case "mousedown":l=s;break a;case "touchmove":case "mousemove":l=u;break a;case "touchend":case "mouseup":l=la;break a}l=void 0}var k=l===s;if(!k||!h){var j=0===f.event.type.indexOf("touch");j&&Z(f.event,c);var q=new a.Event(l);e(f.event,q);var z=f.event.target;g&&(z=g);r&&r(q);var cb=f.event.originalEvent||f.event;k&&-1===a.inArray(cb,Ia)&&(Ia=[],Ra=[]);var n=a.inArray(cb,Ia);-1===n&&(n=Ia.push(cb)-
1,Ra[n]=!1);if(!Ra[n]&&(!j||h||k))Ra[n]=!0,a(z).trigger(q,f.evArg),h=!0;if(f.event.currentTarget===document&&(l===la&&(Ia=[],Ra=[]),-1!==a.inArray(cb,Ia)))Ia.splice(n,1),Ra.splice(n,1);if(k&&h){q.isDefaultPrevented()||q.h5DelegatingEvent.preventDefault();l=q.target;var v=q.clientX,m=q.clientY,sa=j?"touchmove":"mousemove",D=j?"touchend":"mouseup",rb=d(sa,l,function(a){var b=a.clientX,c=a.clientY;a.dx=b-v;a.dy=c-m;v=b;m=c}),y=d(D,l),p=function(a){f.event=a;f.evArg=Q(arguments);rb(f)},Pa=function(a){f.event=
a;f.evArg=Q(arguments);y(f)},K=j?a(l):i;o=function(){Ia=[];Ra=[];K.unbind(sa,p);K.unbind(D,Pa);if(!j&&b.rootElement!==document){a(b.rootElement).unbind(sa,p);a(b.rootElement).unbind(D,Pa)}};K.bind(sa,p);K.bind(D,Pa);!j&&b.rootElement!==document&&(a(b.rootElement).bind(sa,p),a(b.rootElement).bind(D,Pa))}else l===la&&(o(),h=!1)}}}function g(a){return{controller:b,selector:c,eventName:a,handler:d(a),isInnerBindObj:!0}}var r=typeof document.ontouchstart!==ja,i=a(M(b.rootElement)),o=null,h=!1,f=[g("mousedown")];
r&&f.push(g("touchstart"));return f}function ia(b){if("svg"!==b.tagName.toLowerCase()||Ga())return a(b).offset();var e=M(b).createElementNS(pa,"rect"),d=b.viewBox,g=d.baseVal.y;e.setAttribute("x",d.baseVal.x);e.setAttribute("y",g);e.setAttribute("width",1);e.setAttribute("height",1);c(e);b.appendChild(e);d=a(e).offset();b.removeChild(e);return d}function Z(a,b){var c=a.originalEvent;if(c){var e="touchend"===b||"touchcancel"===b?c.changedTouches[0]:c.touches[0],d=e.pageX,g=e.pageY;a.pageX=c.pageX=
d;a.pageY=c.pageY=g;a.screenX=c.screenX=e.screenX;a.screenY=c.screenY=e.screenY;a.clientX=c.clientX=e.clientX;a.clientY=c.clientY=e.clientY;e=a.target;if(e.ownerSVGElement)e=e.farthestViewportElement;else if(e===window||e===document)e=document.body;e=ia(e);g-=e.top;a.offsetX=c.offsetX=d-e.left;a.offsetY=c.offsetY=g}}function Q(a){return 3>a.length?a[1]:Qa(a).slice(1)}function D(a,b){var c=null,e=null;b&&(c=b[0],e=Q(b));var d=c;if(d&&null==d.offsetX&&null==d.offsetY&&d.pageX&&d.pageY){var g=d.target;
if(g.ownerSVGElement)g=g.farthestViewportElement;else if(g===window||g===document)g=document.body;g=ia(g);d.offsetX=d.pageX-g.left;d.offsetY=d.pageY-g.top}return new n(a.controller,c,e,a.evSelector,a.evSelectorType)}function J(a){q(a,function(a){a.rootElement=null;a.view.__controller=null})}function R(b,c,e){null==b&&m(r,[c.__name]);!t(b)&&"object"!==typeof b&&m(vb,[c.__name]);b=e?aa(b,e):a(b);0===b.length&&m(sa,[c.__name]);1<b.length&&m(Pa,[c.__name]);return b.get(0)}function K(b){var c=b.__controllerContext.managed,
e=Ja.controllers;-1===a.inArray(b,e)&&!1!==c&&e.push(b);b.__controllerContext.triggerReadyExecuted=!0;Y(b,"__ready")}function V(a,b){!1===b?Y(a,"__init"):setTimeout(function(){ca(a)||!a.__controllerContext.isRoot&&a.rootController.readyDfd||Y(a,"__init")},0)}function Xa(a){a.__controllerContext.triggerPostInitExecuted=!0;Y(a,"__postInit")}function lb(a,b){q(a,function(a){var c=ta();c.resolve();var e=a.__controllerContext;e.templatePromise=c.promise();e.initDfd=ta();e.postInitDfd=ta();e.readyDfd=ta();
e.isUnbinding=!1;e.isUnbinded=!1;e.isExecutedBind=!1;e.triggerPostInitExecuted=!1;e.triggerReadyExecuted=!1;e.args=b;a.initPromise=e.initDfd.promise();a.postInitPromise=e.postInitDfd.promise();a.readyPromise=e.readyDfd.promise();a.isInit=!1;a.isPostInit=!1;a.isReady=!1})}function Ca(b,c){var e=null,d=c;a.isPlainObject(d)?e=d.target:d={};e=e?aa(e,b):b.rootElement;return f.ui.indicator.call(b,e,d)}function ka(a,b){var c=[],e=null;l(a,function(a){if(a[b]&&F(a[b])){try{var d=a[b]()}catch(g){e=e||g}wa(d)&&
c.push(d)}});if(e)throw e;return c}function ba(a,b,c){function e(){var a=b||c||o||k;l(g,function(b){b.view&&b.view.__view&&b.view.__view.clear();if(a)b.__controllerContext.isDisposed=1;else for(var c in b)b.hasOwnProperty(c)&&(b[c]=null)});k?f.rejectWith(g,[k]):f.resolveWith(g);if(a&&(Ja.dispatchEvent({type:"lifecycleerror",detail:a,rootController:g}),b||o))throw b||o;}function d(){k=o||da(Eb,g.__name,Qa(arguments));e()}var g=a.__controllerContext&&(a.__controllerContext.isRoot?a:a.rootController);
if(g){if(!Ba(g)){g.__controllerContext.isDisposing=1;try{W(g,c||b)}catch(r){b=b||r}var i,o=null;try{i=ka(g,"__dispose")}catch(h){b=b||h,o=o||h}var f=g.deferred(),k=null;o?d():ea(i,e,d,!0);return f.promise()}}else if(b)throw b;}function W(b,c){if(!ca(b)){b.__controllerContext.isUnbinding=1;mb(b,c);var e;try{ka(b,"__unbind")}catch(d){e=d}q(b,function(a){var b=a.rootElement;if(b){for(var b=M(b),c=a.__controllerContext.boundHandlers,e=0,d=c.length;e<d;e++)S(c[e],b,!0);a.__controllerContext.boundHandlers=
[]}});b.__controllerContext.unbindList={};Ja.controllers=a.grep(Ja.controllers,function(a){return a!==b});b.isPostInit&&!1!==b.__controllerContext.managed&&a(b.rootElement).trigger("h5controllerunbound",b);J(b);b.__controllerContext.isUnbinded=1;if(e)throw e;}}function na(a,b){return b.view.__view.isAvailable(a)?b.view.__view:b.parentController?na(a,b.parentController):f.core.view}function z(a){return!a.__controllerContext||a.__controllerContext.isDisposed}function Ba(a){return z(a)||a.__controllerContext.isDisposing}
function ca(a){a=a.__controllerContext&&a.__controllerContext.isRoot?a:a.rootController;return!a||z(a)||a.__controllerContext.isUnbinding||a.__controllerContext.isUnbinded}function mb(a,b){var c=["postInitDfd","readyDfd"],e=[];q(a,function(a){e.push(a);var c=a.__controllerContext.initDfd;c&&!va(c)&&!Ma(c)&&c.rejectWith(a,[b])});for(var d=0,g=c.length;d<g;d++)for(var r=c[d],i=e.length-1;0<=i;i--){var o=e[i],h=o.__controllerContext[r];h&&!va(h)&&!Ma(h)&&h.rejectWith(o,[b])}}function eb(a,b){for(var c=
a.childNodes,e=0,d=c.length;e<d;e++){var g=c[e];if(1===g.nodeType){if(g=eb(g,b))return g}else if(8===g.nodeType){var r=g.nodeValue;if(0===r.indexOf(fb)){var i=r.indexOf("}");if(-1!==i&&(r=r.slice(0,i).match(/id="([A-Za-z][\w-:\.]*)"/))&&r[1]===b)return g}}}return null}function $a(a){var b=this;return function(){return a.apply(b,arguments)}}function Da(a){var b=this;return function(){var c=f.u.obj.argsToArray(arguments);c.unshift(this);return a.apply(b,c)}}function nb(a,b,c){function e(d){f.u.obj.getByPath("h5.core.view")||
m(Fb);c=E(c)?c:[c];for(var g=[],r=0,i=c.length;r<i;r++){var o=Wa(c[r])?c[r]:f.res.dependsOn(c[r]);g.push(o.resolve("ejsfile"))}ea(g,function(c){for(var c=E(c)?c:[c],e=0,d=c.length;e<d;e++)for(var g=c[e].templates,r=0,i=g.length;r<i;r++)try{a.view.__view.register(g[r].id,g[r].content)}catch(o){b.reject(o)}b.resolve()},function(a){var c=a.detail.error.status;d===f.settings.dynamicLoading.retryCount||0!==c&&c!==ub?setTimeout(function(){b.reject(a)},0):setTimeout(function(){e(++d)},f.settings.dynamicLoading.retryInterval)})}
e(0)}function ua(b,c,e,d){var g=t(b),r=g?null:b,b=g?a.trim(b):null,c=a.trim(c),i=!g||db.test(b),o=ob.test(c);o&&(c=a.trim(a.trim(c.substring(1,c.length-1))));g&&i&&(b=a.trim(b.substring(1,b.length-1)),"this"===b&&m(Gb,[e.__name],{controllerDef:e}));return{selector:b,bindTarget:r,isGlobal:i,isBindRequested:o,eventName:c,propertyKey:d}}function Ka(){this.logicProperties=[];this.eventHandlerProperties=[];this.functionProperties=[];this.otherProperties=[];this.bindMap={};this.childControllerProperties=
[]}function pb(b){var c=new Ka,e=c.logicProperties,d=c.eventHandlerProperties,g=c.functionProperties,r=c.otherProperties,i=c.bindMap,h=c.childControllerProperties,f={},l;for(l in b)if(-1!==l.indexOf(" ")&&F(b[l])){d.push(l);var k=a.trim(l),j=k.lastIndexOf(" "),k=ua(k.substring(0,j),k.substring(j+1,k.length),b,l),j=k.selector,q=k.eventName,s=k.isGlobal,z=k.isBindRequested;f[j]||(f[j]={});f[j][q]||(f[j][q]={});f[j][q][s]||(f[j][q][s]={});f[j][q][s][z]?m(Hb,[b.__name,j,q],{controllerDef:b}):f[j][q][s][z]=
1;i[l]=k}else Za(l,Ha)&&b[l]&&!F(b[l])?h.push(l):Za(l,o)&&b[l]&&!F(b[l])?e.push(l):F(b[l])?g.push(l):r.push(l);return c}function Sa(){this.logicProperties=[];this.functionProperties=[]}function Ta(a){var b=new Sa,c=b.functionProperties,e=b.logicProperties,d;for(d in a)a.hasOwnProperty(d)&&Za(d,o)?e.push(d):F(a[d])&&c.push(d);return b}function Ib(c,e){function d(b,c,e){c=c.__logicContext.waitingPromises=c.__logicContext.waitingPromises||[];-1===a.inArray(b,c)&&(c.push(b),b.done(e))}function g(i){function o(){if(!i.__logicContext.isCalledReady){var g=
!0;b(i,function(a){return g=a.__logicContext.isReady});if(g){var h=F(i.__ready)&&i.__ready();i.__logicContext.isCalledReady=!0;wa(h)?(r.push(h),h.done(function(){i.__logicContext.isReady=!0;r.splice(a.inArray(h,r),1);i.__logicContext.waitingPromises=null;i===c&&e.resolveWith(i)})):(i.__logicContext.isReady=!0,i.__logicContext.waitingPromises=null,i===c&&e.resolveWith(i))}else for(var f=0,l=r.length;f<l;f++)d(r[f],i,o)}}i.__logicContext.isReady=!1;i.__logicContext.isCalledReady=!1;b(i,g);o()}var r=
[];g(c)}function ma(a,b){if(a===b)return!0;var c=qa(a),e=qa(b);if(!c&&!e)return!1;c=c?a.toArray():[a];e=e?b.toArray():[b];if(c.length!==e.length)return!1;for(var d=0,g=c.length;d<g;d++)if(c[d]!==e[d])return!1;return!0}function X(a,b){(!a||!a.rootElement)&&m(Jb,b)}function O(a,b){(!a||z(a))&&m(Kb,b)}function P(b){var c=b.bindTarget,e=b.eventName,d=b.handler;c&&typeof c.nodeType!==ja||sb(c)||qa(c)?a(c).bind(e,d):!c||!c.addEventListener?b.isBindCanceled=!0:(c.addEventListener(e,d),b.isNativeBind=!0)}
function fa(a,b){b.parentController=a;a.__controllerContext.childControllers.push(b);b.__controllerContext.isRoot=!1;if(a.__controllerContext.isExecutedConstruct){var c=a.rootController;q(b,function(a){a.rootController=c})}}function Ua(a){this.__controller=a;f.u.obj.getByPath("h5.core.view")&&(this.__view=f.core.view.createView())}function Oa(b,c,e,d,g){for(var r=0,i=ra.length;r<i;r++)ra[r](this);this.__name=c;this.__templates=null;this.rootElement=b;this.__controllerContext={executeListeners:!0,
isRoot:g,boundHandlers:[],controllerDef:e,args:null};(b=e&&e.__defaultArgs)?this.__controllerContext.args=a.extend({},b,d):d&&(this.__controllerContext.args=d);this.isReady=this.isPostInit=this.isInit=!1;this.readyPromise=this.postInitPromise=this.initPromise=this.preInitPromise=this.parentController=this.rootController=null;this.log=f.log.createLogger(c);this.view=new Ua(this)}function ab(){this.rootElement=document;this.controllers=[];a(document).bind(gb,function(a,b){null==b.target&&(b.target=
document);b.indicator=Ca(this,b);a.stopPropagation()})}function hb(){this._init()}function La(b,c,e,g){var r=!g||!g.isInternal;if(!r&&z(g.rootController))return null;var i=c.__name;(!t(i)||0===a.trim(i).length)&&!Wa(c)&&m(qb,null,{controllerDefObj:c});e&&!a.isPlainObject(e)&&m(rb,[i],{controllerDefObj:c});c.__controllerContext&&m(Lb,null,{controllerDefObj:c});c.__defaultArgs&&(a.isPlainObject(c.__defaultArgs)||m(Mb,[i],{controllerDefObj:c}));var o=Aa.get(i);o||d(r,b,c,i);r&&h(c,i);o||(o=pb(c),Aa.register(i,
o));r&&w(b,c,i);var f=new Oa(b?a(b).get(0):null,i,c,e,r),l=r?f:g.rootController,k=ta(),i=k.promise().fail(ib),j=ta(),q=j.promise().fail(ib),s=ta(),n=s.promise().fail(ib),v=ta(),sa=v.promise(),D=g&&g.async;!1===D&&(k.resolve(),j.resolve(),s.resolve(),v.resolve());r||sa.fail(ib);b=f.__controllerContext;b.cache=o;b.preInitDfd=k;b.initDfd=j;b.postInitDfd=s;b.readyDfd=v;f.preInitPromise=i;f.initPromise=q;f.postInitPromise=n;f.readyPromise=sa;b.childControllers=[];for(var u=r?[]:g.promisesForTriggerInit,
j=0,q=o.logicProperties.length;j<q;j++)s=o.logicProperties[j],i=c[s],Wa(i)?(n=i.resolve("namespace"),u.push(n),n.done(function(b,c){return function(e){e=bb(e);f[b]=e;u.splice(a.inArray(c,u),1);u.push(e.readyPromise);e.readyPromise.done(function(b){return function(){u.splice(a.inArray(b,u),1)}}(e.readyPromise))}}(s,n))):f[s]=bb(i);i=a.extend(!0,{},c);c=c.__templates;j=ta();q=j.promise();Wa(c)||c&&0<c.length?nb(f,j,c):j.resolve();q.done(function(){Ba(f)||k.resolveWith(f)}).fail(function(a){k.rejectWith(f,
[a]);ba(f,null,a)});j=0;for(q=o.eventHandlerProperties.length;j<q;j++)s=o.eventHandlerProperties[j],f[s]=x(i,s,!0);j=0;for(q=o.functionProperties.length;j<q;j++)s=o.functionProperties[j],f[s]=x(i,s);j=0;for(q=o.otherProperties.length;j<q;j++)s=o.otherProperties[j],f[s]=i[s];b.managed=g&&g.managed;try{if(f.__construct&&f.__construct({args:f.__controllerContext.args}),Ba(f))return null}catch(p){return ba(l,p),null}r?(f.rootController=f,f.parentController=null):(f.parentController=g.parentController,
f.rootController=g.rootController);if(f.__controllerContext.childControllers){j=0;g=f.__controllerContext.childControllers;for(q=g.length;j<q;j++)g[j].rootController=f.rootController}f.__controllerContext.isExecutedConstruct=!0;g=f.__meta;j=0;for(q=o.childControllerProperties.length;j<q;j++)if(s=o.childControllerProperties[j],c=i[s],b=null,g&&g[s]&&g[s].inheritArgs&&(b=e),Wa(c))n=c.resolve("namespace"),u.push(n),n.done(function(b,c,e){return function(d){d=La(null,a.extend(true,{},d),e,{isInternal:true,
parentController:f,rootController:l,promisesForTriggerInit:u,async:D});if(d==null)return null;f[b]=d;f.__controllerContext.childControllers.push(d);u.splice(a.inArray(c,u),1)}}(s,n,b));else{b=La(null,a.extend(!0,{},i[s]),b,{isInternal:!0,parentController:f,rootController:l});if(null==b)return null;f.__controllerContext.childControllers.push(b);f[s]=b}if(r){var y=function(){u.length===0?V(f,D):ea(u,y)};ea(u,y)}return f}function bb(b){function c(b,e){var d=b.__name;(!t(d)||0===a.trim(d).length)&&m(Nb,
null,{logicDefObj:b});b.__logicContext&&m(Ob,null,{logicDefObj:b});var g=Aa.get(d);g||(e&&j(b),g=Ta(b));for(var i=a.extend(!0,{},b),o=g.functionProperties,h=0,l=o.length;h<l;h++){var k=o[h];i[k]=x(i,k)}i.deferred=ta;i.log=f.log.createLogger(d);i.__logicContext={logicDef:b};i.own=$a;i.ownWithOrg=Da;Aa.register(d,g);F(i.__construct)&&i.__construct();d=g.logicProperties;h=0;for(l=d.length;h<l;h++)k=d[h],g=i[k],Wa(g)?(g=g.resolve(),r.push(g),g.done(function(b,e){return function(d){i[b]=c(d);r.splice(a.inArray(e,
r),1)}}(k,g))):i[k]=c(g);return i}function e(){0===r.length?Ib(i,d):ea(r,e)}var d=f.async.deferred(),g=d.promise(),r=[],i=c(b,!0);i.readyPromise=g;ea(r,e);return i}var pa="http://www.w3.org/2000/svg",oa={SELECTOR_TYPE_LOCAL:1,SELECTOR_TYPE_GLOBAL:2,SELECTOR_TYPE_OBJECT:3},Ha="Controller",o="Logic",s="h5trackstart",u="h5trackmove",la="h5trackend",kb="rootElement",gb="triggerIndicator",db=/^\{.*\}$/,ob=/^\[.*\]$/,fb="{h5view ",r=6001,sa=6003,Pa=6004,qb=6006,rb=6007,Lb=6008,Ab=6009,Bb=6010,zb=6011,Gb=
6012,Hb=6013,Nb=6017,Ob=6018,Fb=6029,vb=6030,Db=6033,Cb=6034,Jb=6035,Kb=6036,Eb=6038,Mb=6046,ta=f.async.deferred,wa=f.async.isPromise,xa=f.u.str.startsWith,Za=f.u.str.endsWith,Ea=f.u.str.format,Qa=f.u.obj.argsToArray,qa=f.u.obj.isJQueryObject,Wa=f.res.isDependency,ib=function(){},Ja,Aa,Ia=[],Ra=[],ya="",Fa=function(){var a=document.createElement("div");return typeof a.style.touchAction!==ja?(ya="touchAction",!0):typeof a.style.msTouchAction!==ja?(ya="msTouchAction",!0):!1}(),ra=[],Ga=function(){var b=
null;return function(){if(null!=b)return b;var e=document.createElementNS(pa,"svg");e.setAttribute("width",1);e.setAttribute("height",1);var d=document.createElementNS(pa,"rect");d.setAttribute("x",1);d.setAttribute("y",1);d.setAttribute("width",1);d.setAttribute("height",1);c(d);a(function(){document.body.appendChild(e);var a=e.getBoundingClientRect().top;e.appendChild(d);b=a===e.getBoundingClientRect().top;document.body.removeChild(e)});return b}}();a.extend(n.prototype,oa);a.extend(Ua.prototype,
{get:function(a,b){X(this.__controller,"view#get");return na(a,this.__controller).get(a,b)},update:function(a,b,c){X(this.__controller,"view#update");a=aa(a,this.__controller);return na(b,this.__controller).update(a,b,c)},append:function(a,b,c){X(this.__controller,"view#append");a=aa(a,this.__controller);return na(b,this.__controller).append(a,b,c)},prepend:function(a,b,c){X(this.__controller,"view#prepend");a=aa(a,this.__controller);return na(b,this.__controller).prepend(a,b,c)},load:function(a){X(this.__controller,
"view#load");return this.__view.load(a)},register:function(a,b){X(this.__controller,"view#register");this.__view.register(a,b)},isValid:function(a){X(this.__controller,"view#isValid");return this.__view.isValid(a)},isAvailable:function(a){X(this.__controller,"view#isAvailable");return na(a,this.__controller).isAvailable(a)},clear:function(a){X(this.__controller,"view#clear");this.__view.clear(a)},getAvailableTemplates:function(){X(this.__controller,"view#getAvailableTemplates");return this.__view.getAvailableTemplates()},
bind:function(b,c){X(this.__controller,"view#bind");var e=b;if(t(b)&&0===b.indexOf("h5view#")){for(var d=eb(this.__controller.rootElement,b.slice(7)),e=d.nodeValue,e=e.slice(e.indexOf("}")+1),g=a("<div>").append(e),e=[],r=g[0].childNodes,i=0,o=r.length;i<o;i++)e.push(r[i]);g.empty();g=document.createDocumentFragment();i=0;for(o=e.length;i<o;i++)g.appendChild(e[i]);d.parentNode.insertBefore(g,d.nextSibling)}return this.__view.bind(e,c)}});a.extend(Oa.prototype,{$find:function(b){O(this,"$find");X(this,
"$find");return a(this.rootElement).find(b)},deferred:function(){O(this,"deferred");return ta()},trigger:function(b,c){O(this,"trigger");X(this,"trigger");var e=t(b)?a.Event(b):b;a(this.rootElement).trigger(e,c);return e},own:function(){O(this,"own");return $a.apply(this,Qa(arguments))},ownWithOrg:function(){O(this,"ownWithOrg");return Da.apply(this,Qa(arguments))},bind:function(a,b){O(this,"bind");this.__controllerContext.isRoot||m(6031);this.rootElement=R(a,this);this.view.__controller=this;lb(this,
b?b:null);V(this);return this},unbind:function(){O(this,"unbind");X(this,"unbind");this.__controllerContext.isRoot||m(6031);this.__controllerContext.isExecutedConstruct||m(6037);try{W(this)}catch(a){ba(this,a)}},dispose:function(){O(this,"dispose");this.__controllerContext.isRoot||m(6031);return ba(this)},triggerIndicator:function(b){O(this,"triggerIndicator");X(this,"triggerIndicator");var c={indicator:null};b&&a.extend(c,b);a(this.rootElement).trigger(gb,[c]);return c.indicator},indicator:function(a){O(this,
"indicator");X(this,"indicator");return Ca(this,a)},enableListeners:function(){O(this,"enableListeners");A(this,!0)},disableListeners:function(){O(this,"disableListeners");A(this,!1)},throwError:function(a,b){O(this,"throwError");var c=Qa(arguments);c.unshift(null);this.throwCustomError.apply(this,c)},throwCustomError:function(a,b,c){O(this,"throwCustomError");2>arguments.length&&m(6005);var e=null;b&&t(b)?e=Error(Ea.apply(null,Qa(arguments).slice(1))):(e=Error(),e.detail=b);e.customType=a;throw e;
},on:function(a,b,c){O(this,"on");X(this,"on");a=ua(a,b,this);b=C(this.__name,"");b.push(p);for(var a=v(this,a,B(c,"",b)),b=0,e=a.length;b<e;b++){var d=a[b];d.isInnerBindObj||(d.originalHandler=c);y(d,M(this.rootElement))}},off:function(a,b,c){O(this,"off");X(this,"off");for(var e=ua(a,b,this),a=this.__controllerContext.boundHandlers,d=null,g=e.bindTarget,b=e.eventName,r=e.selector,i=e.isGlobal,e=e.isBindRequested,o=0,f=a.length;o<f;o++){var h=a[o];if(g){if(ma(g,h.bindTarget)&&b===h.eventName&&h.originalHandler===
c){d=h;break}}else if(r===h.selector&&i===h.isGlobal&&e===h.isBindRequested&&c===h.originalHandler){d=h;break}}d&&S(d,M(this.rootElement))},manageChild:function(b){O(this,"manageChild");if(ca(this))m(6041);else if(!b||!b.__controllerContext)m(6039);else if(ca(b))m(6040);else{b.rootController!==b&&m(6042);fa(this,b);var c=Ja.controllers,b=a.inArray(b,c);-1!=b&&c.splice(b,1)}},unmanageChild:function(b,c){O(this,"unmanageChild");if(ca(this))m(6043);else if(b.parentController!==this)m(6044);else if(c=
!1===c?!1:!0,!c&&!b.rootElement)m(6045);else{b.parentController=null;b.rootController=b;b.__controllerContext.isRoot=!0;var e=this.__controllerContext.childControllers,d=a.inArray(b,e);-1!==d&&e.splice(d,1);c?b.dispose():(Ja.controllers.push(b),e=this.__controllerContext.waitingPromisesManagerMap,d=b.__controllerContext.waitingPromisesManagerMap,e&&(e.__postInit&&e.__postInit.remove(b.postInitPromise),e.__ready&&e.__ready.remove(b.readyPromise)),d&&d.__init&&d.__init.remove(this.initPromise),this.rootController.__controllerContext.triggerPostInitExecuted?
this.rootController.__controllerContext.triggerReadyInitExecuted||K(b):Xa(b))}}});f.mixin.eventDispatcher.mix(ab.prototype);a.extend(ab.prototype,{getAllControllers:function(){return this.controllers},getControllers:function(b,c){for(var e=c&&c.deep,d=c&&c.name?I(c.name):null,g=a(b)[0],r=this.controllers,i=[],o=0,f=r.length;o<f;o++){var h=r[o];!(d&&-1===a.inArray(h.__name,d))&&h.rootElement&&(g===h.rootElement?i.push(h):e&&M(g)===M(h.rootElement)&&a.contains(g,h.rootElement)&&i.push(h))}return i}});
a.extend(hb.prototype,{get:function(a){return this._cacheMap[a]},register:function(a,b){this._cacheMap[a]=b},clear:function(a){delete this._cacheMap[a]},clearAll:function(){this._cacheMap={}},_init:function(){this._cacheMap={}}});Aa=new hb;Ja=new ab;f.u.obj.expose("h5.core",{controllerManager:Ja,definitionCacheManager:{clear:function(a){Aa.clear(a)},clearAll:function(){Aa.clearAll()}}});var Ya=null;ha.controllerInternal=La;ha.addControllerInstantiationHook=function(a){ra.push(a)};ha.isDisposing=Ba;
f.u.obj.expose("h5.core",{controller:function(a,b,c){2>arguments.length&&m(6032);return La(a,b,c)},logic:bb,expose:function(a){var b=a.__name;b||m(6019,null,{target:a});var c=b.lastIndexOf(".");if(-1===c)window[b]=a;else{var e=b.substr(0,c),b=b.substr(c+1,b.length),c={};c[b]=a;f.u.obj.expose(e,c)}}})})();(function(){function c(a){return a instanceof Date}function d(a){return function(c){for(var e=a.queries,d=0,g=e.length;d<g;d++){var f=e[d],h=f.compareFunction;if(!h(c[f.prop],f.queryValue))return!1}e=
a.userFunctions;d=0;for(g=e.length;d<g;d++)if(!e[d](c))return!1;e=a.nestedCriterias;d=0;for(g=e.length;d<g;d++)if(!e[d].match(c))return!1;return!0}}function h(a){return function(c){for(var e=a.queries,d=0,g=e.length;d<g;d++){var f=e[d],h=f.compareFunction;if(h(c[f.prop],f.queryValue))return!0}e=a.userFunctions;d=0;for(g=e;d<g;d++)if(!e[d](c))return!0;e=a.nestedCriterias;d=0;for(g=e.length;d<g;d++)if(e[d].match(c))return!0;return!1}}function f(b){var k=[],l=[],i=[],g={queries:k,nestedCriterias:l,userFunctions:i},
n;for(n in b)if(n!==p)if(a.isPlainObject(b[n]))l.push(f(b[n]));else if(F(b[n]))i.push(b[n]);else{var y=b[n],w=E(y)?y[0]:y,A=null,A=w instanceof RegExp?C:c(w)?B:x,G=a.trim(n.replace(/ +/g," ")).split(" "),t=G[1]||"=";(A=A[t])||m(e,[t,a.type(w)]);k.push({prop:G[0],queryValue:y,compareFunction:A})}g.match="or"===b[p]?h(g):d(g);return g}function w(a){this.result=a}function n(a){this._model=a}var p="__op",x={"=":function(a,c){return a===c},"!=":function(a,c){return a!==c},"<":function(a,c){return a<c},
">":function(a,c){return a>c},"<=":function(a,c){return a<=c},">=":function(a,c){return a>=c},between:function(a,c){var e=c[1];return c[0]<=a&&a<=e},"!between":function(a,c){var e=c[1];return a<c[0]||e<a},"in":function(b,c){return-1!==a.inArray(b,c)},"!in":function(b,c){return-1===a.inArray(b,c)}},C={"=":function(a,c){return c.test(a)},"!=":function(a,c){return!c.test(a)}},B={"=":function(a,e){return!c(a)?!1:a.getTime()===e.getTime()},"!=":function(a,e){return!c(a)?!0:a.getTime()!==e.getTime()},"<":function(a,
e){return!c(a)?!1:a.getTime()<e.getTime()},">":function(a,e){return!c(a)?!1:a.getTime()>e.getTime()},"<=":function(a,e){return!c(a)?!1:a.getTime()<=e.getTime()},">=":function(a,e){return!c(a)?!1:a.getTime()>=e.getTime()},between:function(a,e){if(!c(a))return!1;var d=e[0].getTime(),i=e[1].getTime(),g=a.getTime();return d<=g&&g<=i},"!between":function(a,e){if(!c(a))return!1;var d=e[0].getTime(),i=e[1].getTime(),g=a.getTime();return g<d||i<g},"in":function(a,e){if(!c(a))return!1;for(var d=a.getTime(),
i=0,g=e.length;i<g;i++)if(d===e[i].getTime())return!0;return!1},"!in":function(a,e){if(!c(a))return!0;for(var d=a.getTime(),i=0,g=e.length;i<g;i++)if(d===e[i].getTime())return!1;return!0}},e=1,k={};k[e]='演算子"{0}"で"{1}"型の値を比較することはできません';k[2]="{0}の第1引数が不正です。指定されたキー({1})はモデル{2}に存在しません";k[3]="setOrderFunctionの第1引数が不正です。比較関数を関数で指定してください";k[4]="setOrderFunction()ですでにソート条件が設定済みです。addOrder()でソート条件を追加することはできません。";k[5]="addOrder()ですでにソート条件が追加済みです。setOrderFunction()でソート条件を設定することはできません。";xb(k);a.extend(n.prototype,
{setCriteria:function(a){this._criteria=f(a);return this},execute:function(){var a=[],c;for(c in this._model.items){var e=this._model.items[c];this._criteria.match(e.get())&&a.push(e)}if(this._orderFunction)a.sort(this._orderFunction);else if(this._addedOrders){var d=this._addedOrders,g=d.length;a.sort(function(a,b){for(var c=0;c<g;c++){var e=d[c],f=e.key,e=e.isAsc,h=a.get(f),f=b.get(f);if(h>f)return e?1:-1;if(h<f)return e?-1:1}return 0})}return new w(a)},setOrderFunction:function(a){F(a)||m(3);this._addedOrders&&
m(5);this._orderFunction=a;return this},addOrder:function(a,c){this._model.schema.hasOwnProperty(a)||m(2,["addOrder",a,this._model.name]);this._orderFunction&&m(4);this._addedOrders=this._addedOrders||[];this._addedOrders.push({key:a,isAsc:!1!==c});return this},clearOrder:function(){this._orderFunction=this._addedOrders=null;return this}});Ea={createQuery:function(){return new n(this)}}})();(function(){function c(a){return(a=a&&t(a)?a.match(/^(string|number|integer|boolean|any|enum|@(.+?))((\[\]){0,1})$/):
null)?{elmType:a[1],dataModel:a[2],dimension:a[3]?1:0}:{}}function d(b,c){return function qb(b,e){if(!c[b])return!1;for(var d=0,g=c[b].length;d<g;d++)if(-1<a.inArray(c[b][d],e)||qb(c[b][d],e.concat([b])))return!0;return!1}(b,[])}function h(a){return"number"===typeof a&&isNaN(a)}function j(a,b){return null==a||h(a)||"number"===typeof a||!b&&(a instanceof Number||!(!(t(a)||a instanceof String)||!a.match(/^[+\-]{0,1}[0-9]*\.{0,1}[0-9]+$/)))}function w(a,b){return null==a||"number"===typeof a&&parseInt(a)===
a||!b&&(a instanceof Number&&parseInt(a)===parseFloat(a)||("string"===typeof a||a instanceof String)&&!!a.match(/^[+\-]{0,1}[0-9]+$/))}function n(b,c,e){function d(){g.push(l.call(this,arguments));if(e)throw null;}var g=[];try{if(!a.isPlainObject(b))throw d(Ca),null;wa(b.name)||d(ka);var i=b.base,o=null;if(null!=i)if(!t(i)||0!==i.indexOf("@"))d(ba);else{var f=i.substring(1);c.models[f]?o=c.models[f].schema:d(W,f)}var h=b.schema;!o&&null==h&&d(na);if(!o&&!a.isPlainObject(h))throw d(z),null;}catch(j){m(Q,
null,g)}}function p(b,e,g,i){function o(){f.push(l.call(this,arguments));if(i)throw null;}"object"!==typeof b&&m(J);var f=[];try{if(e){var k=!1,s;for(s in b)b[s]&&!0===b[s].id&&(k&&o(Ba),k=!0);k||o(ca)}var z={},k=function(a){if(null!=a){D&&o(eb,u);v.hasOwnProperty("defaultValue")&&o(La,u);if(null==a.on)o($a,u);else for(var c=I(a.on),e=0,d=c.length;e<d;e++)if(!b.hasOwnProperty(c[e])){o($a,u);break}"function"!==typeof a.calc&&o(Da,u);z[u]=I(a.on)}};s=function(a){D&&null==a&&(a="string");var b={};null!=
a&&(t(a)?(D&&"string"!==a&&"integer"!==a&&o(pa,u),b=c(a),b.elmType?(b.dataModel&&(e||o(ua,u,b.dataModel),g.models[b.dataModel]||o(Ka,u,b.dataModel)),"enum"===b.elmType&&null==v.enumValue&&o(pb,u)):o(ua,u,a)):o(nb,u))};var n=function(b,c){if(null!=b)if(a.isPlainObject(b)){for(var e in b){var d=b[e];if(null!=d)switch(e){case "notNull":!0!==d&&!1!==d?o(Ta,u,e):D&&!d&&o(ha,u,e,d);break;case "min":case "max":switch(c.elmType){case "integer":(t(d)||!w(d)||h(d))&&o(P,u,e);break;case "number":(t(d)||t(d)||
!j(d)||Infinity===d||-Infinity===d||h(d))&&o(P,u,e);break;default:o(ma,u,e,c.elmType)}break;case "minLength":case "maxLength":switch(c.elmType){case "string":t(d)||!w(d)||h(d)||0>d?o(O,u,e):D&&"maxLength"===e&&0===d&&o(ha,u,e,d);break;default:o(ma,u,e,c.elmType)}break;case "notEmpty":switch(c.elmType){case "string":!0!==d&&!1!==d?o(Ta,u,e):D&&!d&&o(ha,u,e,d);break;default:o(ma,u,e,c.elmType)}break;case "pattern":switch(c.elmType){case "string":"regexp"!==a.type(d)&&o(X,u,e);break;default:o(ma,u,e,
c.elmType)}}}b.notEmpty&&0===b.maxLength&&o(U,u,"notEmpty","maxLength");null!=b.min&&null!=b.max&&b.min>b.max&&o(U,u,"min","max");null!=b.minLength&&null!=b.maxLength&&b.minLength>b.maxLength&&o(U,u,"minLength","maxLength")}else o(Sa,u)},q=function(b,c){null!=b&&("enum"!==c.elmType&&o(da,u),(!E(b)||0===b.length||-1<a.inArray(null,b)||-1<a.inArray(void 0,b))&&o(ea,u))},u;for(u in b){var v=null==b[u]?{}:b[u],D=e&&!!v.id;wa(u)||o(mb,u);k(v.depend);s(v.type);var p={},y=D&&null==y?"string":v.type;t(y)&&
(p=c(y));n(v.constraint,p);q(v.enumValue,p);D&&v.hasOwnProperty("defaultValue")&&o($,u)}for(var K in z)d(K,z)&&o(qa,K)}catch(la){m(R,null,f)}return!0}function x(a,b){var e=[];try{for(var d in a){var g=a[d];if(g&&(g.hasOwnProperty("defaultValue")||!g.type||!("array"===g.type||c(g.type).dimension))&&g.hasOwnProperty("defaultValue")){var o=g.defaultValue;b[d](o).length&&pushErrorReason(fa,d,o)}}return!0}catch(i){m(R,null,e)}}function C(a,b,d){var g={},o;for(o in a){var i=g,f=o,h;h=d;var l=a[o]||{},j=
[],s=null,z=0,s=l.type,n=l.constraint||{};b&&l.id&&(s=s||"string",n.notNull=!0,"string"===s&&(n.notEmpty=!0));s&&(z=c(s),s=z.elmType,z=z.dimension,j.push(e(s,{manager:h,enumValue:l.enumValue})));n&&j.push(B(n));h=k({checkFuncs:j,dimension:z});i[f]=h}return g}function B(a){return function(b){var c=[];a.notNull&&null==b&&c.push({notNull:a.notNull});a.notEmpty&&!b&&c.push({notEmpty:a.notEmpty});if(null==b)return c;null!=a.min&&b<a.min&&c.push({min:a.min});null!=a.max&&a.max<b&&c.push({max:a.max});null!=
a.minLength&&b.length<a.minLength&&c.push({minLength:a.minLength});null!=a.maxLength&&a.maxLength<b.length&&c.push({maxLength:a.maxLength});null!=a.pattern&&!b.match(a.pattern)&&c.push({pattern:a.pattern});return c}}function e(b,c){var e=[{type:b}];switch(b){case "number":return function(a,b){return j(a,b)?[]:e};case "integer":return function(a,b){return w(a,b)?[]:e};case "string":return function(a,b){return null==a||t(a)||!b&&a instanceof String?[]:e};case "boolean":return function(a,b){return null==
a||"boolean"===typeof a||!b&&a instanceof Boolean?[]:e};case "enum":return function(b){var d;a:if(d=c.enumValue,h(b)){for(var b=0,g=d.length;b<g;b++)if(h(d[b])){d=!0;break a}d=!1}else d=null===b||-1<a.inArray(b,d);return d?[]:e};case "any":return function(){return[]}}var d=b.match(/^@(.+?)$/)[1],g=c.manager;return function(a){var b=g.models[d];return!b||"object"!==typeof a&&null!=a?e:null==a||b.has(a)?[]:e}}function k(a){var b=a.checkFuncs;if(!b||0===b.length)return function(){return[]};var c=a.dimension||
0;return function(a,e){function d(a,o){if(!o){for(var i=0,r=b.length;i<r;i++){var h=b[i](a,e);if(h.length)return g=g.concat(h),!1}return!0}if(null==a)return!0;if(!E(a)&&!f.core.data.isObservableArray(a))return g.push({dimension:c}),!1;i=0;for(r=a.length;i<r;i++)if(!d(a[i],o-1))return!1;return!0}var g=[];d(a,c);return g}}function b(a,b){a._values={};a._nullProps={};for(var c in b)if(b[c]&&q(b[c].type)){var e=Na();e.relatedItem=a;a._values[c]=e;a._nullProps[c]=!0}}function q(a){return!a?!1:-1!==a.indexOf("[]")}
function l(){return{code:arguments[0]}}function i(b,c,e,d){function g(c){for(var c=I(f[c].depend.on),e=0,d=c.length;e<d;e++)if(-1===a.inArray(c[e],b._realProperty)&&-1!==a.inArray(c[e],i))return!1;return!0}function o(b,c){for(var e=0,d=c.length;e<d;e++){var g=h[c[e]];if(g)for(var i=0,f=g.length;i<f;i++){var r=g[i];-1===a.inArray(r,b)&&b.push(r)}}}var i=[],f=b.schema||b._model.schema,h=b._dependencyMap,l={};for(d?i=b._dependProps.slice():o(i,I(e));0!==i.length;){for(var e=[],d=0,j=i.length;d<j;d++){var k=
i[d];if(g(k)){var s=f[k].depend.calc.call(b,c);0!==b._validateItemValue(k,s,!0).length&&m(lb,[b._model?b._model.name:oa,k,s]);l[k]={oldValue:b._values[k],newValue:s};f[k]&&q(f[k].type)?s?(b._values[k].copyFrom(s),b._nullProps[k]=!1):(b._values[k].copyFrom([]),b._nullProps[k]=!0):b._values[k]=s}else e.push(k)}o(e,i);i=e}return l}function g(a,b,c,e){for(var d in c){d in a||m(Xa,[e?e.name:oa,d]);var g=c[d];if(!a[d]||!q(a[d].type)||c.hasOwnProperty(d))g=b(d,g,e&&e._idKey===d),0<g.length&&m(K,[e?e.name:
oa,d],g)}}function v(b,c,e,d){var g=b.schema||b._model.schema,o=[],k;for(k in c)if(!(e&&-1!==a.inArray(k,e))){var l=b._values[k],s=c[k];if(g[k]&&g[k].depend)l!==s&&m(V,[b._model?b._model.name:oa,k]);else{var z=g[k]&&g[k].type;q(z)&&(null==s?(s=[],b._nullProps[k]=!0):b._nullProps[k]=!1);if(z&&z.match(/string|number|integer|boolean/)){var n=s;if(E(n)){for(var n=n.slice(0),s=0,u=n.length;s<u;s++)n[s]=n[s]&&"object"===typeof n[s]?n[s]&&n[s].valueOf&&n[s].valueOf():n[s];s=n}else s=n&&"object"===typeof n&&
n.valueOf?n.valueOf():n}if(null!=s&&z&&z.match(/number|integer/)&&"number"!==typeof s)if(E(s)||f.core.data.isObservableArray(s)){n=0;for(u=s.length;n<u;n++)null!=s[n]&&j(s[n])&&(s[n]=parseFloat(s[n]))}else null!=s&&(s=parseFloat(s));if(!q(z)||!l||!l.equals(s))l===s||h(l)&&h(s)||(z&&-1!==z.indexOf("[]")&&f.core.data.isObservableArray(l)&&(l=l.toArray()),o.push({p:k,o:l,n:s}))}}if(o.length){c={};e=[];n=0;for(k=o.length;n<k;n++)l=o[n],g[l.p]&&q(g[l.p].type)?l.n&&b._values[l.p].copyFrom(l.n):b._values[l.p]=
l.n,c[l.p]={oldValue:l.o,newValue:b.get(l.p)},e.push(l.p);g={type:!0===d?"create":"change",target:b,props:c};a.extend(c,i(b,g,e,d));return g}}function y(a){var b=a._manager,a=a.name;b._updateLogs||(b._updateLogs={});b._updateLogs[a]||(b._updateLogs[a]={});return b._updateLogs[a]}function S(a,b,c){if(a._manager)for(var e=y(a),d=0,g=c.length;d<g;d++){var i=c[d],o=i._values[a._idKey];e[o]||(e[o]=[]);e[o].push({type:b,item:i})}}function A(a,b){if(a._manager){var c=y(a),e=b.target._values[a._idKey];c[e]||
(c[e]=[]);c[e].push({type:Ha,ev:b})}}function G(b){var c={},e;for(e in b)if(b.hasOwnProperty(e)){var d=b[e]?b[e].depend:null;if(d)for(var d=I(d.on),g=0,i=d.length;g<i;g++){var o=d[g];c[o]||(c[o]=[]);-1===a.inArray(e,c[o])&&c[o].push(e)}}return c}function Y(b,c){n(b,c,!0);var e;e=(e=b.base)?c.models[e.slice(1)].schema:{};e=a.extend({},e,b.schema);p(e,!0,c,!0);var d=C(e,!0,c);x(e,d,!0);return new T(e,b,d,c)}function ga(b,c){var e=[],d=[],g=[],o;for(o in b)b[o]&&b[o].depend?d.push(o):e.push(o),b[o]&&
b[o].type&&-1!==b[o].type.indexOf("[]")&&g.push(o);o=G(b);var i={},f;for(f in b){var h=b[f];if(!h||!h.depend){var l=null,l=h&&void 0!==h.defaultValue?h.defaultValue:null;i[f]=l}}return{_realProps:e,_dependProps:d,_aryProps:g,_dependencyMap:o,_createInitialValueObj:function(b){if(!b)return a.extend({},i);var c=a.extend({},i),e;for(e in b)c[e]=b[e];return c},_validateItemValue:function(a,b,e){return c[a](b,e)}}}function za(b,c,e,d){var g=!1,o=["sort","reverse","pop","shift"],i=null;e.addEventListener("changeBefore",
function(e){d&&(b._isRemoved||!d._manager)&&m(D,[b._values[d._idKey],e.method]);var h=f.u.obj.argsToArray(e.args);if(-1===a.inArray(e.method,o)){var l=!0;switch(e.method){case "splice":l=!1;h.shift();h.shift();break;case "copyFrom":h=h[0];break;case "set":h.shift()}l&&(e=b._validateItemValue(c,h),0<e.length&&m(K,c,e))}d?(d._manager&&(e=d._manager,h=d.name,e._oldValueLogs||(e._oldValueLogs={}),e._oldValueLogs[h]||(e._oldValueLogs[h]={}),e=e._oldValueLogs[h],h=b._values[d._idKey],e[h]||(e[h]={}),e[h][c]||
(e[h][c]=b._values[c].toArray())),(g=d._manager?d._manager.isInUpdate():!1)||d._manager.beginUpdate()):i=b._values[c].toArray()});e.addEventListener("change",function(a){if(!(b._isInSet||null===a.method)){var o={type:"change",target:b,props:{}};o.props[c]={};d?(A(d,o),g?a.stopImmediatePropagation():(d._manager._isArrayPropChangeSilentlyRequested=!0,d._manager.endUpdate(),d._manager._isArrayPropChangeSilentlyRequested=!1)):e.equals(i)||(o.props[c]={oldValue:i,newValue:b._values[c]},b.dispatchEvent(o))}})}
function L(a){wa(a)||m(Z);this.models={};this.name=a;this._updateLogs=null;this._isArrayPropChangeSilentlyRequested=!1}function T(a,b,c,e){this.items={};this.size=0;this.name=b.name;this._manager=e;for(var d in a)a[d]&&a[d].id&&(this._idKey=d);this._idType=(b=a[this._idKey].type)?"string"===b?M:ia:M;this.schema=a;this._itemConstructor=Va(a,c,this);e.models[this.name]=this}function Va(c,e,d){function i(a){b(this,c,h,a);a=h._createInitialValueObj(a);g(c,h._validateItemValue,a,d);v(this,a,null,!0);for(var a=
h._aryProps,e=0,o=a.length;e<o;e++)za(this,a[e],this.get(a[e]),d)}var h=ga(c,e);d._schemaInfo=h;f.mixin.eventDispatcher.mix(i.prototype);a.extend(i.prototype,h,o,{_model:d,_isRemoved:!1,getModel:function(){return this._isRemoved?null:this._model}});return i}function aa(){}function N(){this.length=0;this._src=[]}function Na(){return new N}function H(a){return a&&a.constructor===N?!0:!1}var M="string",ia="number",Z=15E3,Q=15001,D=15005,J=15008,R=15009,K=15011,V=15012,Xa=15013,lb=15016,Ca=15900,ka=15901,
ba=15902,W=15903,na=15904,z=6,Ba=15800,ca=15801,mb=15802,eb=15803,$a=15804,Da=15805,nb=15806,ua=15807,Ka=15808,pb=15809,Sa=15810,Ta=15811,P=15812,ma=15813,X=15814,O=15815,U=15816,da=15817,ea=15818,$=15819,fa=15820,ha=15821,La=15822,qa=15823,pa=15824,oa="n/a",Ha=2,o={get:function(b){if(0===arguments.length)return a.extend({},this._values);var c=this._model;if(!(c?c.schema:this.schema).hasOwnProperty(b))m(15014,[c?c.name:oa,b]);return this._values[b]},set:function(a){var b=a;2===arguments.length&&(b=
{},b[arguments[0]]=arguments[1]);var c=this._model;c&&(this._isRemoved||!c._manager)&&m(D,[this._values[this._model._idKey],"set"],this);if(c)c._idKey in b&&b[c._idKey]!==this._values[c._idKey]&&m(15003,[c.name,this._idKey]),g(c.schema,c._schemaInfo._validateItemValue,b,c);else{var e=this.validate(b);if(e)throw e;}var e=null,d=c?c._manager.isInUpdate():!1;c&&!d&&c._manager.beginUpdate();this._isInSet=!0;e=v(this,b);this._isInSet=!1;c?(e&&A(c,e),d||c._manager.endUpdate()):e&&this.dispatchEvent(e)},
regardAsNull:function(a){return this._isArrayProp(a)?!0===this._nullProps[a]:null===this._values[a]},_isArrayProp:function(a){var b=this._model?this._model.schema:this.schema;return b[a]&&b[a].type&&-1<b[a].type.indexOf("[]")?!0:!1}};f.mixin.eventDispatcher.mix(L.prototype);a.extend(L.prototype,{createModel:function(b){(!b||"object"!==typeof b)&&m(Q,null,[l(Ca)]);if(!E(b))return this.models[b.name]?this.models[b.name]:Y(b,this);var c=b.length;c||m(Q,null,[l(Ca)]);for(var e={},d=[],g=0;g<c;g++){var o=
b[g].name;if(this.models[o])s[g]=manager.models[b.name];else try{d.push(o);o=[];b[g].base&&o.push(b[g].base.substring(1));for(var i in b[g].schema){var h=b[g].schema[i];if(h){var f=h.type;f&&"@"===f.substring(0,1)&&(f=-1===f.indexOf("[]")?f.substring(1):f.substring(1,f.length-2),o.push(f))}}e[g]={depends:o}}catch(k){m(Q)}}for(var s={size:0};s.size<c;){i={};h=!1;for(g=0;g<c;g++)if(!e[g].registed){for(var o=e[g].depends,f=0,j=o.length;f<j;f++)if(!this.models[o[f]]){i[o[f]]=!0;break}f===j&&(s[g]=Y(b[g],
this),s.size++,h=!0,e[g].registed=!0)}if(!h){var g=!0,n;for(n in i)if(-1===a.inArray(n,d)){g=!1;break}g&&m(15004);m(Q,null,[l(W,n)])}}b=[];for(g=0;g<c;g++)b.push(s[g]);return b},dropModel:function(a){if((a=t(a)?a:"object"===typeof a?a.name:null)&&this.models[a]){var b=this.models[a];b._manager=null;delete this.models[a];return b}},isInUpdate:function(){return null!==this._updateLogs},beginUpdate:function(){this.isInUpdate()||(this._updateLogs={})},endUpdate:function(){if(this.isInUpdate()){var a=
!this._isArrayPropChangeSilentlyRequested,b=this._updateLogs,c=this._oldValueLogs;this._oldValueLogs=this._updateLogs=null;var e={},d;for(d in b)if(b.hasOwnProperty(d)){var g;g=this.models[d];var o=b[d],i=[],f=[],l=[],s=[],k=void 0;for(k in o){for(var j=o[k],n=!0,z=[],u=j.length-1;0<=u;u--){var q=j[u],m=q.type;if(m===Ha)z.push(q.ev);else{a:{for(n=0;n<u;n++){var v=j[n].type;if(1===v||3===v){u=j[n];break a}}u=null}if(1===m)u&&3===u.type?i.push({id:k,oldItem:u.item,newItem:q.item}):f.push(q.item);else if(u=
u&&3===u.type?u.item:u?null:q.item)s.push(u),u.dispatchEvent({type:"remove",model:g});n=!1;break}}if(n&&0<z.length){q={};for(u=z.length-1;0<=u;u--)for(var D in z[u].props)q[D]||(H(g.get(k).get(D))?(m=c&&c[g.name]&&c[g.name][k]&&c[g.name][k][D],g.get(k).get(D).equals(m)||(q[D]={oldValue:m})):q[D]={oldValue:z[u].props[D].oldValue});u=!1;for(D in q)m=q[D].oldValue,j=g.get(k).get(D),m===j||h(m)&&h(j)?delete q[D]:(u=g.get(k).get(D),a&&H(u)&&u.dispatchEvent({type:"change",method:null,args:null,returnValue:null}),
q[D].newValue=u,u=!0);u&&(z={type:"change",target:z[0].target,props:q},l.push(z),z.target.dispatchEvent(z))}}(g=0===f.length&&0===i.length&&0===s.length&&0===l.length?!1:{created:f,recreated:i,removed:s,changed:l})&&(e[d]=g)}a=!1;for(d in e)a=!0,g=e[d],this.models[d].dispatchEvent({type:"itemsChange",created:g.created,recreated:g.recreated,removed:g.removed,changed:g.changed});e={type:"itemsChange",models:e};a&&this.dispatchEvent(e)}},_dataModelItemsChangeListener:function(a){var b=a.target.manager,
c={};c[a.target.name]=a;b.dispatchEvent({type:"itemsChange",models:c})}});f.mixin.eventDispatcher.mix(T.prototype);a.extend(T.prototype,{create:function(a){this._manager||m(15006,[this.name,"create"]);var b=this.validate(a,!0);if(b)throw b;(b=this._manager?this._manager.isInUpdate():!1)||this._manager.beginUpdate();for(var c=[],e=I(a),d=[],g=this._idKey,o=0,i=e.length;o<i;o++){var h=e[o],f=h[g],l=this._findById(f);l?(d.push(l),(f=v(l,h,[g]))&&A(this,f)):(h=new this._itemConstructor(h),this.items[f]=
h,this.size++,c.push(h),d.push(h))}0<c.length&&S(this,1,c);b||this._manager.endUpdate();return E(a)?d:d[0]},validate:function(a,b){try{var c=this._idKey,e=I(a);"object"!==typeof a&&!E(a)&&m(15007);if(b)for(var d=0,o=e.length;d<o;d++){var i=e[d],h=i[c];(""===h||null==h)&&m(15002,[this.name,c]);var f=this._schemaInfo._createInitialValueObj(i);g(this.schema,this._schemaInfo._validateItemValue,f,this)}else for(var d=0,l=e.length;d<l;d++)i=e[d],g(this.schema,this._schemaInfo._validateItemValue,i,this)}catch(k){return k}return null},
get:function(a){if(E(a)||f.core.data.isObservableArray(a)){for(var b=[],c=0,e=a.length;c<e;c++)b.push(this._findById(a[c]));return b}return this._findById(a)},remove:function(a){this._manager||m(15006,[this.name,"remove"]);var b=this._manager?this._manager.isInUpdate():!1;b||this._manager.beginUpdate();for(var c=this._idKey,e=I(a),d=[],g=[],o=0,i=e.length;o<i;o++)if(this.has(e[o])){var h=t(e[o])||w(e[o],!0)?e[o]:e[o]._values[c],f=this.items[h];delete this.items[h];this.size--;g.push(f);f._model&&
(f._isRemoved=!0);d.push(f)}else g.push(null);0<d.length&&S(this,3,d);b||this._manager.endUpdate();return E(a)?g:g[0]},removeAll:function(){var a=this.toArray();0<a.length&&this.remove(a);return a},has:function(a){return t(a)||w(a,!0)?!!this._findById(a):"object"===typeof a?null!=a&&F(a.get)&&a===this.items[a.get(this._idKey)]:!1},getManager:function(){return this._manager},_findById:function(a){a=this.items[a];return typeof a===ja?null:a},_dispatchItemsChangeEvent:function(a){a={type:"itemsChange",
created:[],recreated:[],removed:[],changed:[a]};this.dispatchEvent(a);this._manager&&(a.target=this,this._manager._dataModelItemsChangeListener(a))},toArray:function(){var a=[],b=this.items,c;for(c in b)b.hasOwnProperty(c)&&a.push(b[c]);return a},createQuery:Ea.createQuery});f.mixin.eventDispatcher.mix(aa.prototype);a.extend(aa.prototype,o,{validate:function(a){try{var b=a;2===arguments.length&&(b={},b[arguments[0]]=arguments[1]);g(this.schema,this._validateItemValue,b)}catch(c){return c}return null}});
f.mixin.eventDispatcher.mix(N.prototype);var s={equals:function(a){var b=H(a);if(!b&&!E(a))return!1;a=b?a._src:a;b=this.length;if(a.length!==b)return!1;for(var c=0;c<b;c++){var e=this[c],d=a[c];if(!(e===d||h(e)&&h(d)))return!1}return!0},copyFrom:function(a){null==a&&(a=[]);a=H(a)?a._src:a;E(a)||m(15010,[0,a]);a=a.slice(0);a.unshift(0,this.length);Array.prototype.splice.apply(this,a)},get:function(a){return this[a]},set:function(a,b){this[a]=b},toArray:function(){return this.slice(0)},concat:function(){for(var a=
f.u.obj.argsToArray(arguments),b=0,c=a.length;b<c;b++)H(a[b])&&(a[b]=a[b].toArray());return this.concat.apply(this,a)}},u="concat,join,pop,push,reverse,shift,slice,sort,splice,unshift,indexOf,lastIndexOf,every,filter,forEach,map,some,reduce,reduceRight".split(","),la;for(la in s)s.hasOwnProperty(la)&&-1===a.inArray(la,u)&&u.push(la);var kb=["concat","slice","splice","filter","map"],gb=["reverse","sort"],db="sort,reverse,pop,shift,unshift,push,splice,copyFrom,set".split(",");la=0;for(var ob=u.length;la<
ob;la++){var fb=u[la];N.prototype[fb]=function(b){function c(){var d=e.apply(this._src,arguments);if(-1!==a.inArray(b,gb))d=this;else if(-1!==a.inArray(b,kb)){var g=Na();g.copyFrom(d);d=g}return d}var e=s[b]?s[b]:Array.prototype[b];return-1===a.inArray(b,db)?c:function(){if(!this.dispatchEvent({type:"changeBefore",method:b,args:arguments})){var a=c.apply(this,arguments);this.length=this._src.length;this.dispatchEvent({type:"change",method:b,args:arguments,returnValue:a});return a}}}(fb)}f.u.obj.expose("h5.core.data",
{createManager:function(a,b){wa(a)||m(Z);var c=new L(a);if(null!=b){""===b&&(b="window");var e={};e[a]=c;f.u.obj.expose(b,e)}return c},createObservableArray:Na,createObservableItem:function(a){p(a,!1,null,!0);var c=C(a);x(a,c,!0);var e=new aa,c=ga(a,c);b(e,a,c);e.schema=a;for(var d in c)e[d]=c[d];d=c._createInitialValueObj();g(a,c._validateItemValue,d);v(e,d,null,!0);a=0;for(c=e._aryProps.length;a<c;a++)za(e,e._aryProps[a],e.get(e._aryProps[a]));return e},isObservableArray:H,isObservableItem:function(a){return!(!a||
!a.constructor||!a._validateItemValue||F(a.getModel))},createSequence:function(b,c,e){function d(){return f}function g(){var a=f;f+=l;return a}function o(){return f.toString()}function i(){var a=f;f+=l;return a.toString()}function h(){}var f=null!=b?b:1,l=null!=c?c:1,b=1===e?{current:o,next:i,returnType:1}:{current:d,next:g,returnType:2};b.setCurrent=function(a){f=a};a.extend(h.prototype,b);return new h},SEQ_STRING:1,SEQ_INT:2})})();(function(){function c(c){return f.u.obj.isJQueryObject(c)?c:a(c)}
function d(){this.__cachedTemplates={}}var h=f.async.deferred,j={escapeHtml:function(a){return f.u.str.escapeHtml(a)}};a.extend(d.prototype,{load:function(c){var d=h(),j=null;switch(a.type(c)){case "string":a.trim(c)||m(7004);j=[c];break;case "array":j=c;0===j.length&&m(7004);for(var c=0,w=j.length;c<w;c++)t(j[c])?a.trim(j[c])||m(7004):m(7004);break;default:m(7004)}for(var w=[],c=0,B=j.length;c<B;c++)w.push(f.res.get(j[c]));var e=this;ea(w,function(a){for(var a=E(a)?a:[a],b=[],c,f=0,i=a.length;f<
i;f++){for(var g=a[f].templates,h=0,j=g.length;h<j;h++){if(!e.isValid(g[h].content)){c=g[h];break}b.push(g[h])}if(c)break}if(c)try{e.register(c.id,c.content)}catch(n){return n.detail.url=a[f].url,n.detail.path=a[f].path,d.reject(n)}f=0;for(i=b.length;f<i;f++)e.register(b[f].id,b[f].content);d.resolve()},function(a){d.reject(a)});return d.promise()},getAvailableTemplates:function(){var a=[],c;for(c in this.__cachedTemplates)a.push(c);return a},register:function(c,d){"string"!==a.type(d)?m(7E3,null,
{id:c}):(!t(c)||!a.trim(c))&&m(7002,[]);try{var f=new EJS.Compiler(d,"[");f.compile();this.__cachedTemplates[c]=f.process}catch(h){f=h.lineNumber,m(7010,[f?" line:"+f:"",h.message],{id:c})}},isValid:function(a){try{return(new EJS.Compiler(a,"[")).compile(),!0}catch(c){return!1}},get:function(c,d){var f=this.__cachedTemplates;(!t(c)||!a.trim(c))&&m(7002);(f=f[c])||m(7005,c);var h=d?a.extend(!0,{},d):{},w=h.hasOwnProperty("_h")?new EJS.Helpers(h):new EJS.Helpers(h,{_h:j}),e=null;try{e=f.call(h,h,w)}catch(k){m(7006,
k.toString(),k)}return e},update:function(a,d,f){return c(a).html(this.get(d,f))},append:function(a,d,f){return c(a).append(this.get(d,f))},prepend:function(a,d,f){return c(a).prepend(this.get(d,f))},isAvailable:function(a){return!!this.__cachedTemplates[a]},clear:function(c){if(typeof c===ja)this.__cachedTemplates={};else{var d=null;switch(a.type(c)){case "string":d=[c];break;case "array":c.length||m(7002);d=c;break;default:m(7002)}for(var c=0,f=d.length;c<f;c++){var h=d[c];(!t(h)||!a.trim(h))&&
m(7002)}c=0;for(f=d.length;c<f;c++)delete this.__cachedTemplates[d[c]]}},bind:function(c,d){var h=null;null==c&&m(7007);E(c)?h=c:(h=a(c),0===h.length&&m(7007),h=h.toArray());(null==d||"object"!==typeof d||E(d)||f.core.data.isObservableArray(d))&&m(7009);return qa.createBinding(h,d)}});var w=new d;w.createView=function(){return new d};a(function(){a('script[type="text/ejs"]').each(function(){var c=a.trim(this.id),d=a.trim(this.innerHTML);0!==d.length&&c&&(d=new EJS.Compiler(d,"["),d.compile(),w.__cachedTemplates[c]=
d.process)})});f.u.obj.expose("h5.core",{view:w})})();(function(){function c(a,b){return!a||a.nodeType!==$?void 0:a.getAttribute(b)}function d(a){if(!a)return null;for(var b=[],c=0,e=a.length;c<e;c++)b.push(a[c]);return b}function h(a,b,c,e){var d=[],b=I(b);if(!0===e)return j(d,a,b,c),d;for(var a=a.childNodes,e=0,g=a.length;e<g;e++)j(d,a[e],b,c);return d}function j(a,b,c,e){if(b.nodeType===$){for(var d=0,g=c.length;d<g;d++){var i=b.getAttribute(c[d]);if(typeof e===ja){if(null!==i){a.push(b);break}}else if(null!==
i&&i==e){a.push(b);break}}if(0<b.childNodes.length){b=b.childNodes;d=0;for(g=b.length;d<g;d++)j(a,b[d],c,e)}}}function w(b,e){for(var b=I(b),d=[],g=0,i=b.length;g<i;g++){var f=b[g];if(f.nodeType===$&&!(!0===e&&(null!=c(f,y)||null!=c(f,S))))for(var l=h(f,v,void 0,!0),k=0,j=l.length;k<j;k++){for(var n=!0,q=l[k];null!=q&&q!==f;q=q.parentNode)if(null!=c(q,y)||null!=c(q,S)){n=!1;break}n&&d.push(l[k])}}return a(d)}function n(b,e,d){for(var g=[],i=0,f=b.length;i<f;i++){var l=b[i];if(l.nodeType===$){if(!0===
d){if(null!=l.getAttribute(e)){g.push(l);continue}if(null!=c(l,y)||null!=c(l,S))continue}for(var k=h(l,e,void 0,!1),j=0,q=k.length;j<q;j++){var n=a(k[j])[0],m=n.parentNode;(null==c(m,y)&&null==c(m,S)||m===l)&&g.push(n)}}}return a(g)}function p(a){return a&&a.addEventListener&&a.getModel&&!E(a)&&!f.core.data.isObservableArray(a)||f.core.data.isObservableItem(a)?!0:!1}function x(a,b){for(var c=0,e=a.length;c<e;c++){var d=a[c];d.nodeType===$&&d.setAttribute(G,b)}}function t(b,e,g){var i=H++,h=e[0];a(h).empty();
if(g){!E(g)&&!f.core.data.isObservableArray(g)&&m(N);x(e,i);b._addBindingEntry(g,h,i);f.core.data.isObservableArray(g)&&!b._isWatching(g)&&(e=function(a){b._observableArray_changeListener(a)},b._listeners[b._getContextIndex(g)]=e,g.addEventListener("change",e));var e=c(h,A),e=d(b._getSrcCtxNode(e).childNodes),l=[];b._loopElementsMap[i]=l;for(var i=h.ownerDocument.createDocumentFragment(),k=g.get?function(a){return g.get(a)}:function(a){return g[a]},j=0,q=g.length;j<q;j++){for(var n=[],v=0,y=e.length;v<
y;v++){var z=Q(e[v]);n.push(z);i.appendChild(z)}l[j]=n;h.appendChild(i);B(b,n,k(j),!1,!0)}}}function B(a,b,c,d,g){b=I(b);if(d)t(a,b,c);else{d=H++;c&&(("object"!==typeof c||E(c)||f.core.data.isObservableArray(c))&&m(N),x(b,d),a._addBindingEntry(c,b,d));var i=p(c);i&&!a._isWatching(c)&&(d=function(b){a._observableItem_changeListener(b)},a._listeners[a._getContextIndex(c)]=d,c.addEventListener("change",d));w(b,g).each(function(){k(this,c,i)});e(a,b,c,!1,g);e(a,b,c,!0,g)}}function e(a,b,e,d,g){var i=
d?"data-h5-loop-context":"data-h5-context";n(b,i,g).each(function(){var b=c(this,i),g=null;e&&(g=p(e)?e.get(b):e[b]);B(a,this,g,d)})}function k(b,e,d){for(var g=c(b,v).split(L),i=[],f=[],h=[],l=0,k=g.length;l<k;l++){var j=g[l];if(-1===j.indexOf(F))0<a.trim(j).length&&(i.push(null),f.push(null),h.push(a.trim(j)));else{var n=j.split(F),j=a.trim(n[0]),n=a.trim(n[1]),q=null,z=T.exec(j);z&&(q=z[1],j=/(\S+)[\s\(]/.exec(j)[1]);0<j.length&&0<n.length&&(i.push(j),f.push(q),h.push(n))}}g=b.tagName.toLowerCase();
l=a(b);k=0;for(j=i.length;k<j;k++){var q=i[k],z=f[k],y=h[k],n=null;e&&(n=d?e.get(y):e[y]);null==q&&("input"===g?(q="attr",z="value"):q="text");switch(q){case "text":null==n?l.text(""):l.text(n);break;case "html":null==n?l.html(""):l.html(n);break;case "class":var q=c(b,ga),y=(z=null==q)?"":" ",w=!1;n&&(w=!RegExp("\\s"+n+"\\s").test(" "+q+" "));l[0].className=(z?"":q)+(w?y+n:"");break;case "attr":z||m(Va);"input"===g&&"value"===z?null==n?l.val(""):l.val(n):null==n?l.removeAttr(z):l.attr(z,n);break;
case "style":z||m(Va);null==n?l.css(z,""):l.css(z,n);break;default:m(aa)}}}function b(a,b,c){for(var e=0,d=c.length;e<d;e++){var g=c[e];b.removeChild(g);a._removeBinding(g)}}function q(a){for(var a=a.childNodes,b=[],c=0,e=a.length;c<e;c++)b.push(Q(a[c]));return b}function l(a,b,c,e,d){for(var g=c.ownerDocument.createDocumentFragment(),i=[],f=0,h=d.length;f<h;f++){var l=q(c);i[f]=l;for(var k=0,j=l.length;k<j;k++)g.appendChild(l[k]);B(a,l,d[f])}Array.prototype[e].apply(b,i);return g}function i(a,c,
e,d,g,i){var f=d.length;if(0!==f){for(var h=d[0],l=h,e=1===f?e.length:l+d[1];l<e;l++){var k=g[l];k&&b(a,c,k)}g.splice(h,d[1]);if(!(2>=f)){l=g.length;l=0===l||0===h?c.firstChild:h>=l?null:g[h][0];e=i.ownerDocument.createDocumentFragment();h=[h,0];for(k=2;k<f;k++){for(var j=q(i),n=0,z=j.length;n<z;n++)e.appendChild(j[n]);B(a,j,d[k]);h.push(j)}c.insertBefore(e,l);Array.prototype.splice.apply(g,h)}}}function g(a,b){void 0!==a.nodeType?a.nodeType===$&&(this._parent=a.parentNode,this._targets=[a]):(this._parent=
a[0].parentNode,this._targets=d(a));this._bindRootId=P++;ia[this._bindRootId]=this;for(var e=[],g=0,i=this._targets.length;g<i;g++){var f=this._targets[g];if(f.nodeType===$){f.setAttribute(Y,this._bindRootId);for(var l=h(f,[y,S],void 0,!0),k=0,j=l.length;k<j;k++){var n=M++;l[k].setAttribute(A,n)}l=h(f,v,void 0,!0);k=0;for(j=l.length;k<j;k++)n=l[k],/class\s*:/.test(c(n,v))&&""!=n.className&&n.setAttribute(ga,n.className)}e.push(f.cloneNode(!0))}this._srces=e;this._loopElementsMap={};this._rootContext=
b;this._usingContexts=[];this._srcToViewMap={};this._listeners={};B(this,this._targets,this._rootContext,!1,!0)}var v="data-h5-bind",y="data-h5-context",S="data-h5-loop-context",A="data-h5-dyn-ctx",G="data-h5-dyn-vid",Y="data-h5-dyn-bind-root",ga="data-h5-dyn-cn",F=":",L=";",T=/\(\s*(\S+)\s*\)/,Va=7100,aa=7101,N=7102,M=0,H=0,P=0,ia={},Z={},Q;(function(){var b=document.createElement("div");b.h5Dummy="a";var c=b.cloneNode(!1),e=void 0!==c.h5Dummy;b.h5Dummy=void 0;e?(c.h5Dummy=void 0,Q=function(b){var c=
b.ownerDocument;return b.nodeType===$?a(a.trim(b.outerHTML),c)[0]:b.cloneNode(!0)}):Q=function(a){return a.cloneNode(!0)}})();a.extend(g.prototype,{unbind:function(){for(var a=0,b=this._targets.length;a<b;a++){var c=this._targets[a];if(c.nodeType===$){this._removeBinding(c);c.removeAttribute(Y);for(var e=h(c,ga,void 0,!0),d=0,g=e.length;d<g;d++)e[d].removeAttribute(ga);c=h(c,A,void 0,!0);d=0;for(e=c.length;d<e;d++)c[d].removeAttribute(A)}}delete ia[this._bindRootId]},_observableArray_changeListener:function(a){var e=
this._getViewsFromSrc(a.target);if(e)for(var d in e)if(e.hasOwnProperty(d)){var g=e[d],f=this._getSrcCtxNode(c(g,A)),h=this._loopElementsMap[d];switch(a.method){case "set":i(this,g,a.target,[a.args[0],1,a.args[1]],h,f);break;case "shift":case "pop":var k=h[a.method]();k&&b(this,g,k);break;case "unshift":k=l(this,h,f,a.method,a.args);g.insertBefore(k,g.firstChild);break;case "push":k=l(this,h,f,a.method,a.args);g.appendChild(k);break;case "splice":i(this,g,a.target,a.args,h,f);break;case "reverse":for(var k=
g,j=h;k.firstChild;)k.removeChild(k.firstChild);for(var n=0,g=j.length;n<g;n++)for(var f=j[n],m=f.length-1;0<=m;m--)k.insertBefore(f[m],k.firstChild);h.reverse();break;case "sort":case "copyFrom":case null:for(var k=this._loopElementsMap,j=d,n=a.target,m=h,h=f,f=0,v=m.length;f<v;f++)b(this,g,m[f]);for(var m=g.ownerDocument.createDocumentFragment(),v=[],f=0,y=n.length;f<y;f++){var z=q(h);v[f]=z;for(var w=0,ca=z.length;w<ca;w++)m.appendChild(z[w]);B(this,z,n.get(f))}g.appendChild(m);k[j]=v}}},_observableItem_changeListener:function(a){var b=
this._getViewsFromSrc(a.target);if(b){var e=!1;a.target===this._rootContext&&(e=!0);var d=this,g;for(g in b)if(b.hasOwnProperty(g)){var f=b[g];w(f,e).each(function(){k(this,a.target,!0)});n(f,y).each(function(){var b=c(this,y);if(!(b in a.props))return!0;d._removeBinding(this);var e=c(this,A),e=d._getSrcCtxNode(e),e=Q(e);this.parentNode.replaceChild(e,this);B(d,e,a.props[b].newValue)});n(f,S).each(function(){var b=c(this,S);if(!(b in a.props)||a.target._isArrayProp(b))return!0;d._removeBinding(this);
B(d,this,a.props[b].newValue,!0)})}}},_getSrcCtxNode:function(a){for(var b=0,e=this._srces.length;b<e;b++){var d=this._srces[b];if(c(d,A)===a)return d;d=h(d,A,a);if(0<d.length)return d[0]}return null},_isWatching:function(a){a=this._getContextIndex(a);return-1===a?!1:null!=this._listeners[a]},_getContextIndex:function(b){return a.inArray(b,this._usingContexts)},_addBindingEntry:function(a,b,c){var e=this._getContextIndex(a);-1===e&&(this._usingContexts.push(a),e=this._usingContexts.length-1);Z[c]=
a;(a=this._srcToViewMap[e])?a[c]=b:(a={},a[c]=b,this._srcToViewMap[e]=a)},_hasBindingForSrc:function(a){for(var b in a)if(a.hasOwnProperty(b))return!0;return!1},_removeBindingEntry:function(a){var b=Z[a];if(b){var c=this._getContextIndex(b);if(-1!==c){var e=this._srcToViewMap[c];e&&e[a]&&(delete e[a],this._hasBindingForSrc(e)||(e=!1,p(b)?(b.removeEventListener("change",this._listeners[c]),e=!0):f.core.data.isObservableArray(b)&&(b.removeEventListener("change",this._listeners[c]),e=!0),e&&delete this._listeners[c],
delete this._srcToViewMap[c],this._usingContexts[c]=null))}Z[a]&&delete Z[a]}},_removeBinding:function(a){if(a.nodeType===$){var b=c(a,G);null!=b&&(this._removeBindingEntry(b),a.removeAttribute(G));for(var a=h(a,G),b=0,e=a.length;b<e;b++){var d=a[b];this._removeBindingEntry(c(d,G));d.removeAttribute(G)}}},_getViewsFromSrc:function(a){a=this._getContextIndex(a);return-1===a?null:this._srcToViewMap[a]}});qa={createBinding:function(a,b){return new g(a,b)}}})();(function(){function c(a,c){return null==
a||"number"===typeof a&&isNaN(a)||"number"===typeof a||!c&&(a instanceof Number||!(!(t(a)||a instanceof String)||!a.match(/^[+\-]{0,1}[0-9]*\.{0,1}[0-9]+$/)))}function d(a,c){return!!(null==a||t(a)||!c&&a instanceof String)}function h(a,c){return null==a||"boolean"===typeof a||!c&&a instanceof Boolean}function j(c){var d=c.name;c.isValid?(this.validProperties.push(d),this.validCount++):(this.isValid=!1,this.invalidProperties.push(d),this.invalidCount++,this.invalidReason=this.invalidReason||{},this.invalidReason[d]=
{name:d,value:c.value,violation:[c.violation]});this.validatingProperties.splice(a.inArray(d,this.validatingProperties),1);if(!this.isValid||!this.validatingProperties.length)this.isAllValid=this.isValid}function m(a){this.isValid=a.isValid;this.validProperties=a.validProperties;this.invalidProperties=a.invalidProperties;this.validatingProperties=a.validatingProperties;this.invalidReason=a.invalidReason;this.validCount=a.validProperties.length;this.invalidCount=a.invalidProperties.length;this.isAsync=
a.isAsync;this.isAllValid=a.isAllValid;this.properties=a.properties;this.addEventListener(x,j);this.dispatchEvent=function(){this._aborted||m.prototype.dispatchEvent.apply(this,arguments)}}function n(){this.rules=[];this.rulesMap={}}function p(a,c,b,d){B.addValidateRule(a,c,b,d)}var x="validate",C=f.async.isPromise,B=new n;f.mixin.eventDispatcher.mix(m.prototype);m.prototype.abort=function(){this.removeEventListener(x,j);this.dispatchEvent({type:"abort"});this._aborted=!0};a.extend(n.prototype,{addValidateRule:function(a,
c,b,d){if(this.rulesMap[a])for(var f=0,i=this.rules.length;f<i;f++)if(this.rules[f].ruleName===a){this.rules.splice(f,1);break}c={ruleName:a,func:c,priority:d,argNames:b};this.rules.push(c);this.rulesMap[a]=c},getValidateFunction:function(a){return this.rulesMap[a]&&this.rulesMap[a].func},getValidateArgNames:function(a){return this.rulesMap[a]&&this.rulesMap[a].argNames},sortRuleByPriority:function(a){var c=this.rulesMap;a.sort(function(a,e){var d=c[a],f=c[e],d=null==d.priority?-Infinity:d.priority,
f=null==f.priority?-Infinity:f.priority;return d===f?0:f-d})}});p("required",function(a){return null!=a&&""!==a},null,51);p("customFunc",function(a,c){return c(a)},["func"],50);p("assertNull",function(a){return null==a},null,50);p("assertNotNull",function(a){return void 0===a?!0:null!=a},null,50);p("assertFalse",function(a){return null==a||h(a)&&!1==a},null,50);p("assertTrue",function(a){return null==a||h(a)&&!0==a},null,50);p("max",function(a,d,b){return null==a||(c(a,!0)||a instanceof Number)&&
(b?a<=d:a<d)},["max","inclusive"],50);p("min",function(a,d,b){return null==a||(c(a,!0)||a instanceof Number)&&(b?d<=a:d<a)},["min","inclusive"],50);p("future",function(a){return null==a||a instanceof Date&&(new Date).getTime()<a.getTime()},null,50);p("past",function(a){return null==a||a instanceof Date&&a.getTime()<(new Date).getTime()},null,50);p("digits",function(a,c,b){if(null==a)return!0;if(!d(a)||!/^([+|-])?\d*(\.\d+)?$/.test(a))return!1;var f=parseInt(a);return null!=c&&(0>f?-f:f)>=Math.pow(10,
c)?!1:null!=b?(c=a.indexOf("."),-1===c?!0:a.slice(c+1).length<=b):!0},["integer","fraction"],50);p("pattern",function(a,c){return null==a||d(a)&&c.test(a)},["regexp"],50);p("size",function(c,f,b){f=f||0;b=b||Infinity;if(a.isPlainObject(c)){var h=0,l;for(l in c)h++;return f<=h&&h<=b}return null==c||(d(c)||E(c))&&f<=c.length&&c.length<=b},["min","max"],50);f.u.obj.expose("h5.validation",{defineRule:p});f.core.expose({__name:"h5.validation.FormValidationLogic",_rule:{},_disableProperties:[],validate:function(c,
d){var b={},f=[],h;for(h in c){if(a.isPlainObject(c[h]))for(var i in c[h])b[i]=c[h][i],f.push(i);b[h]=c[h]}h=null;d&&(h=(a.isArray(d)?d.slice(0):[d]).concat(f));return this._validate(b,h)},addRule:function(a){for(var c in a)this._rule[c]=a[c]},removeRule:function(a){E(a)||delete this._rule[a];for(var c=0,b=a.length;c<b;c++)delete this._rule[a[c]]},disableRule:function(c){for(var c=I(c),d=0,b=c.length;d<b;d++)-1===a.inArray(c[d],this._disableProperties)&&this._disableProperties.push(c[d])},enableRule:function(c){for(var c=
I(c),d=0,b=c.length;d<b;d++){var f=a.inArray(c[d],this._disableProperties);-1!==f&&this._disableProperties.splice(f,1)}},_validate:function(c,d){var b=[],f=[],h=[],i=[],g=null,j=d&&(E(d)?d:[d]),n=!1,p={},A;for(A in this._rule)if(!(d&&-1===a.inArray(A,j)||-1!==a.inArray(A,this._disableProperties))){var G=this._rule[A],t=c[A],ga=!1,F=!1,L=[],T;for(T in G)L.push(T);B.sortRuleByPriority(L);for(var I=0,M=L.length;I<M;I++){T=L[I];var N=G[T];if(c.hasOwnProperty(A)&&null!=N||"required"===T&&N){var P=this._convertBeforeValidate?
this._convertBeforeValidate(t,T):t,N=E(N)?[P].concat(N):[P,N],H=B.getValidateFunction(T);if(!H)break;var H=H.apply(this,N),U={},ia=B.getValidateArgNames(T);if(ia)for(var Z=0,Q=ia.length;Z<Q;Z++)U[ia[Z]]=N[Z+1];C(H)&&!va(H)&&!Ma(H)&&(F=!0,p[A]=p[A]||[],p[A].push(H.promise({ruleName:T,value:P,ruleValue:U})));if(!H||C(H)&&va(H))g=g||{},g[A]||(g[A]={name:A,value:t,violation:[]}),g[A].violation.push(this._createViolation(T,U)),ga=!0}}F?(n=!0,i.push(A)):(ga?f:b).push(A);h.push(A)}var j=!f.length,D=new m({validProperties:b,
invalidProperties:f,validatingProperties:i,properties:h,invalidReason:g,isAsync:n,isValid:j,isAllValid:j?n?null:!0:!1});if(n){var J=function(a){a.validCount+a.invalidCount===a.properties.length&&(a.isAllValid=a.isValid,a.dispatchEvent({type:"validateComplete"}))},R=this;for(A in p)b=p[A],f=function(a){return function(){D.dispatchEvent({type:x,name:a,isValid:!0,value:c[a]});J(D)}}(A),h=function(b,c){return function(){if(-1===a.inArray(b,D.invalidProperties)){for(var d,e,g,f=0,h=c.length;f<h;f++){var i=
c[f];if(va(i)){d=i.ruleName;e=i.ruleValue;g=i.value;break}}D.dispatchEvent({type:x,name:b,isValid:!1,value:g,violation:R._createViolation(d,e,arguments)});J(D)}}}(A,b),a.when.apply(a,b).done(f).fail(h)}return D},_createViolation:function(a,c,b){a={ruleName:a,ruleValue:c};b&&(a.reason=f.u.obj.argsToArray(b));return a},_convertBeforeValidate:function(a,d){if(null==a)return a;switch(d){case "max":case "min":return c(a)?parseFloat(a):NaN;case "future":case "past":return new Date(a)}return a}})})();(function(){function c(b){var c=
{},d;for(d in Z){var e=a("<div></div>").addClass(b).addClass(d).appendTo("body"),g=a.camelCase(d);c[g]={};a.map(Z[d],function(a){c[g][a]="width"===a||"height"===a?parseInt(e.css(a).replace(/\D/g,""),10):e.css(a)});e.remove()}return c}function d(a,b,c){var a=b.createElement("v:"+a),d;for(d in c)a.style[d]=c[d];return a}function h(a,b){for(var c=[],d=a/2,e=0.8*a/2,g=360/b*Math.PI/180,f=1;f<=b;f++){var h=g*f,i=Math.cos(h),h=Math.sin(h);c.push({from:{x:d+e/2*i,y:d+e/2*h},to:{x:d+e*i,y:d+e*h}})}return c}
function j(a){return function(){var b=document.body,c=document.documentElement,d=J?b:R?c:null;return d?"Height"===a?d["client"+a]>d["scroll"+a]?d["client"+a]:d["scroll"+a]:d["client"+a]:Math.max(b["scroll"+a],c["scroll"+a],b["offset"+a],c["offset"+a],c["client"+a])}}function m(a){return function(){var b=J?document.body:document.documentElement;return window["page"+("Top"===a?"Y":"X")+"Offset"]||b["scroll"+a]}}function n(a){var b=J?document.body:document.documentElement;return H.isiOS?window["inner"+
a]:b["client"+a]}function p(b){var c=a(b)[0],d=document.body,e=a("html")[0],b={top:0,left:0};if(c===d&&R)return{top:parseFloat(e.currentStyle.paddingTop||0)+parseFloat(d.currentStyle.marginTop||0)+parseFloat(d.currentStyle.borderTop||0),left:parseFloat(e.currentStyle.paddingLeft||0)+parseFloat(d.currentStyle.marginLeft||0)+parseFloat(d.currentStyle.borderLeft||0)};"undefined"!==typeof c.getBoundingClientRect&&(b=c.getBoundingClientRect());d=J?d:document.documentElement;c=d.clientTop||0;d=d.clientLeft||
0;return{top:b.top+ka()-c,left:b.left+ba()-d}}function x(){a.each(ia(arguments),function(a,b){b.bind("click dblclick touchstart touchmove touchend mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave focus focusin focusout blur change select",function(){return!1})})}function C(a){a=da(a)?a[0]:a;return a===window||a===document||a===document.body}function B(a){return U(M(a)).getComputedStyle(a,null)}function e(b,c){return!U(M(b)).getComputedStyle?a(b).css(c):B(b)[c]}function k(b){if(!U(M(b)).getComputedStyle)return a(b).height();
var c=B(b);return b.offsetHeight-parseFloat(c.paddingTop)-parseFloat(c.paddingBottom)}function b(b){if(!U(M(b)).getComputedStyle)return a(b).width();var c=B(b);return b.offsetWidth-parseFloat(c.paddingLeft)-parseFloat(c.paddingRight)}function q(b,c){if(!U(M(b)).getComputedStyle)return a(b).outerHeight();var d=B(b);return k(b)+parseFloat(d.paddingTop)+parseFloat(d.paddingBottom)+parseFloat(d.borderTopWidth)+parseFloat(d.borderBottomWidth)+(c?parseFloat(d.marginTop)+parseFloat(d.marginBottom):0)}function l(c,
d){if(!U(M(c)).getComputedStyle)return a(c).outerWidth();var e=B(c);return b(c)+parseFloat(e.paddingLeft)+parseFloat(e.paddingRight)+parseFloat(e.borderLeftWidth)+parseFloat(e.borderRightWidth)+(d?parseFloat(e.marginLeft)+parseFloat(e.marginRight):0)}function i(b){if(!U(M(b)).getComputedStyle)return a(b).innerHeight();var c=B(b);return k(b)+parseFloat(c.paddingTop)+parseFloat(c.paddingBottom)}function g(c){if(!U(M(c)).getComputedStyle)return a(c).innerWidth();var d=B(c);return b(c)+parseFloat(d.paddingLeft)+
parseFloat(d.paddingRight)}function v(b,c,d,e){function g(){h+=f;h>d?(clearInterval(l),c.each(function(a){for(var c in b[a])this.style[c]=""}),e()):c.each(function(b){var c=i[b],d;for(d in c)c[d]+=j[b][d];a(this).css(c)})}var f=Na,h=0,i=[],j=[];c.each(function(a){var e=b[a];j[a]={};i[a]={};var g=B(c[a]),h;for(h in e)i[a][h]=parseFloat(g[h]),j[a][h]=(parseFloat(e[h])-parseFloat(g[h]))*f/d});g();var l=setInterval(g,f)}function y(a,b,c){var d=[];a.each(function(){var a=parseFloat(e(this,"opacity"));
d.push({opacity:a})});a.css({opacity:0,display:"block"});v(d,a,b,c)}function S(a,b,c){var d=[];a.each(function(){d.push({opacity:0})});v(d,a,b,c)}function A(b,c){this.style=a.extend(!0,{},b);if(!c.getElementById(P)){c.namespaces.add("v","urn:schemas-microsoft-com:vml");var e=c.createElement("style");c.getElementsByTagName("head")[0].appendChild(e);e.id=P;e.setAttribute("type","text/css");e.styleSheet.cssText="v\\:stroke,v\\:line,v\\:textbox { behavior:url(#default#VML); }"}e=this.style.throbber.width;
this.group=d("group",c,{width:e+"px",height:this.style.throbber.height+"px"});this.group.className=T;for(var e=h(e,this.style.throbber.lines),g=this.style.throbberLine.color,f=this.style.throbberLine.width,i=0,j=e.length;i<j;i++){var l=e[i],k=l.from,n=l.to,l=d("line",c);l.strokeweight=f;l.strokecolor=g;l.fillcolor=g;l.from=k.x+","+k.y;l.to=n.x+","+n.y;k=d("stroke",c);k.opacity=1;l.appendChild(k);this.group.appendChild(l)}this._createPercentArea(c)}function G(b,d){var e=this,g=a(b);if(g.length){var h=
C(g),g=h?a("body"):g,i=M(g[0]);if(i!==window.document&&(g[0]===i||U(i)===g[0]))g=a(i.body);var l=a.extend(!0,{},{message:"",percent:-1,block:!0,fadeIn:-1,fadeOut:-1,promises:null,theme:"a",showThrobber:!0},d);this._displayed=!1;this._throbbers=[];this._settings=l;this._styles=a.extend(!0,{},{throbber:{roundTime:1E3,lines:12},throbberLine:{},percent:{}},c(l.theme));l.throbber&&a.extend(this._styles.throbber,l.throbber);this._isScreenLock=h;this._$target=g;this._target=1===this._$target.length?this._$target[0]:
this._$target.toArray();this._scrollEventTimerId=null;this._scrollHandler=function(){e._handleScrollEvent()};this._resizeEventTimerId=null;this._resizeHandler=function(){e._handleResizeEvent()};this._redrawable=!0;this._lastPercent=-1;this._lastMessage=null;this._fadeInTime="number"===typeof l.fadeIn?l.fadeIn:-1;this._fadeOutTime="number"===typeof l.fadeOut?l.fadeOut:-1;this._$content=a();this._$overlay=a();this._$skin=a();this._showContent=l.showThrobber||l.message;for(var g=f.u.str.format(aa,""===
l.message?'style="display: none;"':"",l.message),h="https"===document.location.protocol?"return:false":"about:blank",j=0,k=this._$target.length;j<k;j++)this._$content=this._$content.add(a(i.createElement("div")).append(g).addClass(Y).addClass(l.theme).addClass(ga).css("display","none")),this._$overlay=this._$overlay.add((l.block?a(i.createElement("div")):a()).addClass(Y).addClass(l.theme).addClass(I).css("display","none")),this._$skin=this._$skin.add((R||J?a(i.createElement("iframe")):a()).attr("src",
h).addClass(Y).addClass(L).css("display","none"));var n=this._isScreenLock&&K?"fixed":"absolute";a.each([this._$overlay,this._$content],function(){this.css("position",n)});i=l.promises;l=function(){e.hide()};g=a.hasOwnProperty("curCSS")?"pipe":"then";E(i)?(i=a.map(i,function(a){return a&&F(a.promise)?a:null}),0<i.length&&ra(f.async.when(i),g,[l,l])):i&&F(i.promise)&&ra(i,g,[l,l])}}var Y="h5-indicator",ga="content",I="overlay",L="skin",T="vml-root",P="h5-vmlstyle",aa='<span class="indicator-throbber"></span><span class="indicator-message" {0}>{1}</span>',
N=500,Na=13,H=f.env.ua,da=f.u.obj.isJQueryObject,ia=f.u.obj.argsToArray,Z={throbber:["width","height"],"throbber-line":["width","color"]},Q=!!document.createElement("canvas").getContext,D=function(){var a=document.createDocumentFragment().appendChild(document.createElement("div"));a.innerHTML='<v:line strokeweight="1"/>';a=a.firstChild;a.style.behavior="url(#default#VML)";return"number"===typeof a.strokeweight}(),J="CSS1Compat"!==document.compatMode,R=H.isIE&&6>=H.browserVersion,K=!(H.isAndroidDefaultBrowser||
H.isiOS&&5>H.browserVersion||R||J||H.isWindowsPhone),V=null,ea=null,ha=null,$=null,ka=null,ba=null,W=function(){var b=document.createDocumentFragment().appendChild(document.createElement("div")),c=["Webkit","Moz","O","ms","Khtml"],d=c.length;return function(e){e=a.camelCase(e);if(e in b.style)return!0;for(var e=e.charAt(0).toUpperCase()+e.slice(1),g=0;g<d;g++)if(c[g]+e in b.style)return!0;return!1}}(),ea=function(a){return function(){var b=document.body,c=document.documentElement;return"number"===
typeof window["inner"+a]?window["inner"+a]:J?b["client"+a]:c["client"+a]}}("Height"),ha=j("Height"),$=j("Width"),ka=m("Top"),ba=m("Left"),V=W("animationName");A.prototype={show:function(a){a&&(this.root=a,this.highlightPos=1,this.hide(),this.root.appendChild(this.group),this._run())},hide:function(){this.root.innerHTML="";this._runId&&(clearTimeout(this._runId),this._runId=null)},_run:function(){var a=this.style.throbber.lines;if(0!==a){for(var b=this.style.throbber.roundTime,c=this.highlightPos,
d=this.group.childNodes,e=0,g=d.length;e<g;e++){var f=d[e];if("textbox"!==f.nodeName){var i=e+1;f.firstChild.opacity=i==c?"1":i==c+1||i==c-1?"0.75":"0.4"}}c==a?c=0:c++;this.highlightPos=c;var h=this;this._runId=setTimeout(function(){h._run.call(h)},Math.floor(b/a))}},_createPercentArea:function(b){var c=d("textbox",b),b=a(b.createElement("table"));b.append("<tr><td></td></tr>");var e=b.find("td");e.width(this.group.style.width);e.height(this.group.style.height);e.css("line-height",this.group.style.height);
e.addClass("throbber-percent");c.appendChild(b[0]);this.group.appendChild(c)},setPercent:function(b){a(this.group).find(".throbber-percent").html(b)}};var na=function(b,c){this.style=a.extend(!0,{},b);this.canvas=c.createElement("canvas");this.baseDiv=c.createElement("div");this.percentDiv=c.createElement("div");var d=this.canvas,e=this.baseDiv,g=this.percentDiv;d.width=this.style.throbber.width;d.height=this.style.throbber.height;d.style.display="block";d.style.position="absolute";e.style.width=
this.style.throbber.width+"px";e.style.height=this.style.throbber.height+"px";e.appendChild(d);g.style.width=this.style.throbber.width+"px";g.style.height=this.style.throbber.height+"px";g.style.lineHeight=this.style.throbber.height+"px";g.className="throbber-percent";e.appendChild(g);this.positions=h(d.width,this.style.throbber.lines)};na.prototype={show:function(a){a&&(this.root=a,this.highlightPos=1,this.hide(),this.root.appendChild(this.baseDiv),this._run())},hide:function(){a(this.baseDiv).remove();
this._runId&&(clearTimeout(this._runId),this._runId=null)},_run:function(){var a=this.style.throbber.lines;if(0!==a){var b=this.canvas,c=b.getContext("2d"),d=this.highlightPos,e=this.positions,g=this.style.throbberLine.color,f=this.style.throbberLine.width,i=this.style.throbber.roundTime;b.width=b.width;for(var h=0,l=e.length;h<l;h++){c.beginPath();c.strokeStyle=g;c.lineWidth=f;var j=h+1;c.globalAlpha=j==d?1:j==d+1||j==d-1?0.75:0.4;var k=e[h],j=k.from,k=k.to;c.moveTo(j.x,j.y);c.lineTo(k.x,k.y);c.stroke()}d==
a?d=0:d++;this.highlightPos=d;if(V)b.className="throbber-canvas";else{var n=this;this._runId=setTimeout(function(){n._run.call(n)},Math.floor(i/a))}}},setPercent:function(a){this.percentDiv.innerHTML=a}};G.prototype={show:function(){if(this._displayed||!this._$target||0<this._$target.children("."+Y).length)return this;this._displayed=!0;for(var b=this,c=this._fadeInTime,d=function(){var c=a(window);b._isScreenLock&&(x(b._$overlay,b._$content),K||(c.bind("touchmove",b._scrollHandler),c.bind("scroll",
b._scrollHandler)));c.bind("orientationchange",b._resizeHandler);c.bind("resize",b._resizeHandler)},g=0,f=this._$target.length;g<f;g++){var i=this._$target.eq(g),h=this._$content.eq(g),l=this._$skin.eq(g),j=this._$overlay.eq(g),k=this._settings,n=e(i[0],"position");!this._isScreenLock&&"static"===n&&(i.data("before-position",n),i.data("before-zoom",e(i[0],"zoom")),i.css({position:"relative",zoom:"1"}));var n=M(i[0]),m=null;k.showThrobber&&(m=Q?new na(this._styles,n):D?new A(this._styles,n):null);
m&&(b._throbbers.push(m),b.percent(this._settings.percent),m.show(h.children(".indicator-throbber")[0]));i.append(l).append(j);this._showContent&&i.append(h)}g=this._$skin.toArray();Array.prototype.push.apply(g,this._$content.toArray());Array.prototype.push.apply(g,this._$overlay.toArray());g=a(g);0>c?(g.css("display","block"),d()):y(g,c,d);this._reposition();this._resizeOverlay();return this},_resizeOverlay:function(){var a,b;if(!(this._isScreenLock&&K||0===this._$overlay.length))for(var c=0,d=this._$target.length;c<
d;c++){var e=this._$content.eq(c),g=this._$overlay.eq(c);b=this._$target.eq(c);var f=this._$skin.eq(c);if(this._isScreenLock)e=$(),b=ha();else{g.css("display","none");e.css("display","none");var i=b[0];a=i.scrollWidth;b=i.scrollHeight;if(R)a=Math.max(a,i.clientWidth),b=Math.max(b,i.clientHeight);else if(H.isIE&&"function"===typeof getComputedStyle){var i=U(M(i)).getComputedStyle(i,null),h=parseFloat(i.width)+parseFloat(i.paddingLeft)+parseFloat(i.paddingRight);a+=h-parseInt(h)-1;i=parseFloat(i.height)+
parseFloat(i.paddingTop)+parseFloat(i.paddingBottom);b+=i-parseInt(i)-1}g.css("display","block");e.css("display","block");e=a}g[0].style.width=e+"px";g[0].style.height=b+"px";if(R||J)f[0].style.width=e+"px",f[0].style.height=b+"px"}},_reposition:function(){for(var c=0,d=this._$target.length;c<d;c++){var f=this._$target.eq(c),h=this._$content.eq(c);if(this._isScreenLock){var j=ea();K?h.css("top",(j-q(h[0]))/2+"px"):h.css("top",ka()+j/2-q(h[0])/2+"px")}else h.css("top",f.scrollTop()+(i(f[0])-q(h[0]))/
2);var j=g(h[0])-b(h[0]),k=0;h.children().each(function(){var b=a(this);if("none"===e(b[0],"display"))return!0;k+=l(this,!0)});h.css("width",k+j);h.css("left",f.scrollLeft()+(g(f[0])-l(h[0]))/2)}},hide:function(){if(!this._displayed)return this;this._displayed=!1;var b=this,c=this._fadeOutTime,d=this._$skin.toArray();Array.prototype.push.apply(d,this._$content.toArray());Array.prototype.push.apply(d,this._$overlay.toArray());for(var e=a(d),d=function(){var c=a(window);e.remove();b._isScreenLock||
b._$target.each(function(b,c){var d=a(c);d.css({position:d.data("before-position"),zoom:d.data("before-zoom")});d.removeData("before-position").removeData("before-zoom")});c.unbind("touchmove",b._scrollHandler);c.unbind("scroll",b._scrollHandler);c.unbind("orientationchange",b._resizeHandler);c.unbind("resize",b._resizeHandler);b._resizeEventTimerId&&clearTimeout(b._resizeEventTimerId);b._scrollEventTimerId&&clearTimeout(b._scrollEventTimerId)},g=0,f=this._throbbers.length;g<f;g++)this._throbbers[g].hide();
0>c?(e.css("display","none"),d()):S(e,c,d);return this},percent:function(a){if("number"!==typeof a||!(0<=a&&100>=a))return this;if(!this._redrawable)return this._lastPercent=a,this;for(var b=0,c=this._throbbers.length;b<c;b++)this._throbbers[b].setPercent(a);return this},message:function(a){if(!t(a))return this;if(!this._redrawable)return this._lastMessage=a,this;(this._showContent=this._settings.showThrobber||!!a)?this._$target.append(this._$content):this._$content.remove();this._$content.children(".indicator-message").css("display",
"inline-block").text(a);this._reposition();return this},_handleScrollEvent:function(){this._scrollEventTimerId&&clearTimeout(this._scrollEventTimerId);if(this._redrawable){var a=this;this._scrollEventTimerId=setTimeout(function(){a._reposition();a._scrollEventTimerId=null},50)}},_handleResizeEvent:function(){function a(){b._resizeOverlay();b._reposition();b._redrawable=!0;b.percent(b._lastPercent);b.message(b._lastMessage);b._resizeEventTimerId=null}var b=this;this._resizeEventTimerId&&clearTimeout(this._resizeEventTimerId);
this._redrawable=!1;K||R||J?a():this._resizeEventTimerId=setTimeout(function(){a()},1E3)}};f.u.obj.expose("h5.ui",{indicator:function(b,c){return a.isPlainObject(b)?new G(b.target,b):new G(b,c)},isInView:function(b,c){var d,e,g,f,i=a(b);if(typeof c===ja)e=n("Height"),f=n("Width"),d=ka(),g=ba();else{f=a(c);if(0===f.find(i).length)return;g=p(f);d=g.top+parseInt(f.css("border-top-width"));g=g.left+parseInt(f.css("border-left-width"));e=f.innerHeight();f=f.innerWidth()}e=d+e;f=g+f;var h=p(i),l=h.top,
h=h.left,j=l+i.outerHeight(),i=h+i.outerWidth();return(d<=l&&l<e||d<j&&j<=e)&&(g<=h&&h<f||g<i&&i<=f)},scrollToTop:function(){function b(){1===window.scrollY&&(c=0);0<c&&(window.scrollTo(0,1),c--,setTimeout(b,N))}var c=3;window.scrollTo(0,1);1!==a(window).scrollTop()&&setTimeout(b,N)}})})();(function(){function c(){var b=a.mobile.activePage,b=b&&b[0]&&b[0].id;return t(b)&&0<b.length?b:null}function d(){var b=c();null!==b&&a(function(){n.addCSS(b);n.bindController(b)})}function h(a,b){for(var c in x)for(var d=
x[c],e=a===c,f=0,h=d.length;f<h;f++){var l=d[f];if(e)l[(b?"enable":"disable")+"Listeners"]()}for(c in C){d=C[c];e=a===c;f=0;for(h=d.length;f<h;f++)if(l=d[f],e)l[(b?"enable":"disable")+"Listeners"]()}}function j(a,b){a=a.replace(/(\.0+)+$/,"");b=b.replace(/(\.0+)+$/,"");if(a===b)return 0;for(var c=a.split("."),d=b.split("."),e=c.length,f=0;f<e;f++){if(null==d[f])return 1;var h=parseInt(c[f],10),l=parseInt(d[f],10);if(h!==l)return h<l?-1:1}return null!=d[e]?-1:0}var w,n=null,p={},x={},C={},B={},e={},
k=!1,b=!1,q=!1;f.u.obj.ns("h5.ui.jqm");f.ui.jqm.dataPrefix="h5";var l={__name:"JQMController",__ready:function(){var b=this,d=c();a(':jqmData(role="page"), :jqmData(role="dialog")').each(function(){b.loadScript(this.id)});var e=this.$find("#"+d);e.one("h5controllerready.emulatepageshow",function(){q&&e[0]===a.mobile.activePage[0]&&e.trigger("h5jqmpageshow",{prevPage:a("")})})},':jqmData(role="page"), :jqmData(role="dialog") pageinit':function(a){w||this._initPage(a.event.target.id)},':jqmData(role="page"), :jqmData(role="dialog") pagecreate':function(a){w&&
this._initPage(a.event.target.id)},_initPage:function(a){this.loadScript(a);this.addCSS(a);this.bindController(a)},"{rootElement} pageremove":function(c){a(c.event.target).trigger("h5jqmpagehide",{nextPage:a.mobile.activePage});b=!0;var c=c.event.target.id,d=x[c],e=C[c];if(d){for(var f=0,h=d.length;f<h;f++)d[f].dispose();x[c]=[]}if(e){f=0;for(h=e.length;f<h;f++)e[f].dispose();C[c]=[]}},"{rootElement} pagebeforeshow":function(a){a=a.event.target.id;this.addCSS(a);h(a,!0)},"{rootElement} pagehide":function(c){b||
a(c.event.target).trigger("h5jqmpagehide",{nextPage:c.evArg.nextPage});b=!1;c=c.event.target.id;h(c,!1);this.removeCSS(c)},"{rootElement} pageshow":function(b){var c=!1,d=a(b.event.target),e=b.evArg?b.evArg.prevPage:a("");if(b=x[d[0].id])for(var f=0,h=b.length;f<h;f++)if(!b[f].isReady){d.unbind("h5controllerready.emulatepageshow").one("h5controllerready.emulatepageshow",function(){a.mobile.activePage[0]===d[0]&&d.trigger("h5jqmpageshow",{prevPage:e})});c=!0;break}c||d.trigger("h5jqmpageshow",{prevPage:e})},
"{rootElement} h5controllerbound":function(b){b=b.evArg;if(this!==b){var d=c();null!==d&&-1===a.inArray(b,x[d])&&(C[d]||(C[d]=[]),C[d].push(b))}},"{rootElement} h5controllerunbound":function(b){var d=b.evArg,b=c();null!==b&&(d=a.inArray(d,C[b]),-1!==d&&C[b].splice(d,1))},loadScript:function(b){var b=a("#"+b),c=a.trim(b.data(this.getDataAttribute("script")));if(0!==c.length)return c=a.map(c.split(","),function(b){return a.trim(b)}),b=!0==b.data(this.getDataAttribute("async")),f.u.loadScript(c,{async:b})},
getDataAttribute:function(a){var b=f.ui.jqm.dataPrefix;null==b&&(b="h5");return 0!==b.length?b+"-"+a:a},bindController:function(a){var b=p[a],c=B[a];if(b&&0!==b.length){x[a]||(x[a]=[]);for(var d=x[a],e=0,h=b.length;e<h;e++){for(var l=b[e],j=!1,k=0,n=d.length;k<n;k++){var m=d[k];if(m&&m.__name===l.__name){j=!0;break}}j||x[a].push(f.core.controller("#"+a,l,c[e]))}}},addCSS:function(b){if(b=e[b])for(var c=document.getElementsByTagName("head")[0],d=c.getElementsByTagName("link"),f=d.length,h=0,l=b.length;h<
l;h++){for(var j=a.mobile.path.parseUrl(b[h]).filename,k=!1,n=0;n<f;n++)if(a.mobile.path.parseUrl(d[n].href).filename===j){k=!0;break}k||(j=document.createElement("link"),j.type="text/css",j.rel="stylesheet",j.href=b[h],c.appendChild(j))}},removeCSS:function(b){var d=e[b];if(d&&(b=c(),null!==b)){var f=e[b];a("link").filter(function(){var b=a(this).attr("href");return-1!==a.inArray(b,d)&&-1===a.inArray(b,f)}).remove()}}};f.u.obj.expose("h5.ui.jqm.manager",{init:function(){k||(k=!0,w=0<=j(a.mobile.version,
"1.4"),a(document).one("pageshow",function(){q=!0}),a(function(){n=ha.controllerInternal("body",l,null,{managed:!1});d()}))},define:function(b,g,f,h){t(b)||m(12E3,"id");null!=g&&!t(g)&&!E(g)&&m(12E3,"cssSrc");null!=f&&((t(f)||E(f))&&m(12001),(!a.isPlainObject(f)||!("__name"in f))&&m(12E3,"controllerDefObject"),null!=h&&!a.isPlainObject(h)&&m(12E3,"initParam"));e[b]||(e[b]=[]);p[b]||(p[b]=[]);B[b]||(B[b]=[]);a.merge(e[b],a.map(a.makeArray(g),function(c){return a.inArray(c,e[b])!==-1?null:c}));f&&-1===
a.inArray(f,p[b])&&(p[b].push(f),B[b].push(h));k&&null!==c()?d():this.init()}})})();(function(){function c(c,f,j){this._$arrowbox=a(c).css("display","none");this.setContent(f);a(j&&j.container||j.target.parentElement||document.body).append(this._$arrowbox);this._$arrowbox.data("validation-balloon",this);j=j||{};j.cls&&this._$arrowbox.addClass(j.cls)}a.extend(c.prototype,{show:function(c){if(!this._isDisposed){var f=this._$arrowbox;this.hide();f.css("display","block");if(c){var j=c.direction||"top";
f.addClass(j);var m=c.position,n=a(c.target),c=m?0:n.outerWidth(),p=m?0:n.outerHeight(),m=m?a.extend({},m):{top:n.offset().top,left:n.offset().left};"top"===j||"bottom"===j?(m.left+=(c-f.outerWidth())/2,m.top="top"===j?m.top-(f.outerHeight()+34):m.top+(p+34)):(m.top+=(p-f.outerHeight())/2,m.left="left"===j?m.left-(f.outerWidth()+34):m.left+(c+34));f.css(m)}}},hide:function(){this._isDisposed||this._$arrowbox&&this._$arrowbox.css("display","none")},setContent:function(a){this._isDisposed||(this._$arrowbox.children().remove(),
this._$arrowbox.append(a))},dispose:function(){this._isDisposed||(this.hide(),this._$arrowbox.remove(),this._$arrowbox=null,this._isDisposed=!0)}});f.core.expose({__name:"h5.ui.components.BalloonController",__init:function(){this.view.register("balloon",'<div class="validation-balloon"></div>')},create:function(a,f){var j=this.view.get("balloon");return new c(j,a,f)},getBalloonFromElement:function(c){return a(c).data("validation-balloon")}})})();(function(){var c={required:"{displayName}は必須項目です",
min:function(a){return f.u.str.format("{displayName}は{violation[0].ruleValue.min}{1}数値を入力してください。",a,a.violation[0].ruleValue.inclusive?"以上の":"より大きい")},max:function(a){return f.u.str.format("{displayName}は{violation[0].ruleValue.max}{1}数値を入力してください。",a,a.violation[0].ruleValue.inclusive?"以下の":"未満の")},pattern:"{displayName}は正規表現{violation[0].ruleValue.regexp}を満たす文字列を入力してください。",digits:"{displayName}は整数部分{violation[0].ruleValue.integer}桁、小数部分{fraction}桁以下の数値を入力してください。",size:function(a){var c="",j="",m=
a.violation[0].ruleValue.min,n=a.violation[0].ruleValue.max;null!=m&&(j=f.u.str.format("{0}以上",m));null!=n&&(c=f.u.str.format("{0}以下",n));return f.u.str.format("{displayName}は{1}{2}の長さでなければいけません。",a,j,c)},future:"{displayName}は現在時刻より未来の時刻を入力してください。",past:"{displayName}は現在時刻より過去の時刻を入力してください。",assertNull:"{displayName}はnullでなければなりません。",assertNotNull:"{displayName}はnullでない値を設定してください。",assertFalse:"{displayName}はfalseとなる値を入力してください。",assertTrue:"{displayName}はtrueとなる値を入力してください。",customFunc:"{displayName}は条件を満たしません"};
xa={createValidateErrorMessage:function(d,h,j){var m=j&&j.message,j=a.extend({},h,{displayName:j&&j.displayName||d});if(t(m))return f.u.str.format(m,j);if(F(m))return m(j);var m=h.violation[0].ruleName,n=c[m];return n?F(n)?n(j):f.u.str.format(n,j):f.u.str.format("{0}:{1}はルール{2}を満たしません",d,h.value,m)}};f.core.expose({__name:"h5.ui.validation.MessageOutputController",_container:null,_wrapper:null,_setting:{},setContainer:function(a){this._container=a},setWrapper:function(a){this._wrapper=a},addMessageSetting:function(a){if(this._setting)for(var c in a)this._setting[c]=
a[c];else this._setting=a},clearMessage:function(){this._container&&a(this._container).empty()},appendMessage:function(c){var h=a(this._container);if(h.length){var j=this._wrapper;j?f.u.str.startsWith(a.trim(j),"<")?(msgElement=a(j),msgElement.text(c)):msgElement=a(document.createElement(j)).html(c):msgElement=document.createTextNode(c);h.append(msgElement)}},getMessageByValidationResult:function(a,c){var f=a.invalidReason[c];return!f?null:xa.createValidateErrorMessage(c,f,this._setting[c])},appendMessageByValidationResult:function(c,
f){for(var j=c.invalidProperties,f=t(f)?[f]:f,m=0,n=j.length;m<n;m++){var p=j[m];f&&-1===a.inArray(p,f)||this.appendMessage(this.getMessageByValidationResult(c,p))}null===c.isAllValid&&c.addEventListener("validate",this.own(function(c){(!c.isValid&&!f||-1!==a.inArray(c.name,f))&&this.appendMessage(xa.createValidateErrorMessage(c.name,c.target.invalidReason[c.name],this._setting[c.name]))}))}})})();(function(){f.core.expose({__name:"h5.ui.validation.Style",_setting:{},_styleAppliedElements:{},_setSetting:function(a){this._setting=
a},_onValidate:function(a){for(var d=a.properties,f=0,j=d.length;f<j;f++){var m=d[f];this._setStyle(this.parentController._getElementByName(m),m,a)}},_onFocus:function(a,d,f){this._setStyle(a,d,f)},_onKeyup:function(a,d,f){this._setStyle(a,d,f)},reset:function(){for(var c in this._styleAppliedElements){var d=this._styleAppliedElements[c],f=a.extend({},this._setting,this._setting.property&&this._setting.property[c]);this._setValidateState(null,d,f,c)}},_setStyle:function(c,d,f){var j=a.extend({},this._setting,
this._setting.property&&this._setting.property[d]);if(!j.off){var m=j.replaceElement;if(c=F(m)?m(c):m||c)-1!==a.inArray(d,f.validatingProperties)?(this._setValidateState("validating",c,j),f.addEventListener("validate",this.own(function(a){a.name===d&&this._setValidateState(a.isValid?"success":"error",c,j,d)}))):this._setValidateState(-1===a.inArray(d,f.invalidProperties)?"success":"error",c,j,d)}},_setValidateState:function(c,d,f,j){var m=f.errorClassName,n=f.successClassName,p=f.validatingClassName;
a(d).removeClass(m).removeClass(n).removeClass(p);c&&(c=f[c+"ClassName"],a(d).addClass(c),this._styleAppliedElements[j]=d)}})})();(function(){f.core.expose({__name:"h5.ui.validation.Composition",_messageOutputController:f.ui.validation.MessageOutputController,_setting:{},_setSetting:function(a){this._setting=a;this.isInit?this._setChildSetting():this.initPromise.done(this.own(this._setChildSetting))},_onValidate:function(a){this._messageOutputController.clearMessage();this._messageOutputController.appendMessageByValidationResult(a)},
reset:function(){this._messageOutputController.clearMessage()},_setChildSetting:function(){var a=this._setting;this._messageOutputController.setContainer(a.container);this._messageOutputController.setWrapper(a.wrapper);var d=a.property,f={},j;for(j in d)f[j]={displayName:d[j].displayName||a.displayName,message:d[j].message||a.message,formatter:d[j].formatter||a.formatter};this._messageOutputController.addMessageSetting(f)}})})();(function(){f.core.expose({__name:"h5.ui.validation.ErrorBalloon",_executedOnValidate:!1,
_messageOutputController:f.ui.validation.MessageOutputController,_setting:{},_balloonTargets:[],_setSetting:function(a){this._setting=a;this.isInit?this._setChildSetting():this.initPromise.done(this.own(this._setChildSetting))},_onValidate:function(){this._executedOnValidate=!0},_onFocus:function(a,d,f){this._setErrorBalloon(a,d,f,"focus")},_onBlur:function(a,d,f){this._setErrorBalloon(a,d,f,"blur")},_onKeyup:function(a,d,f){this._setErrorBalloon(a,d,f,"keyup")},reset:function(){a(this._balloonTargets).each(this.own(function(a){this._hideBalloon(a)}));
this._executedOnValidate=!1},_setErrorBalloon:function(c,d,f,j){if(this._executedOnValidate){var m=a.extend({},this._setting,this._setting.property&&this._setting.property[d]);if(!m.off){var n=m.replaceElement,p=F(n)?n(c):n||c;if(p)if("blur"===j||c!==document.activeElement&&!a(document.activeElement).closest(c).length)this._hideBalloon(c);else{var t=m.placement||"top",C=m.container||null;-1!==a.inArray(d,f.validatingProperties)?f.addEventListener("validate",this.own(function(a){c===document.activeElement&&
(a.isValid?this._hideBalloon(c):this._showBalloon(p,t,C,this._messageOutputController.getMessageByValidationResult(f,a.name)))})):!f.invalidReason||!f.invalidReason[d]?this._hideBalloon(c):this._showBalloon(p,t,C,this._messageOutputController.getMessageByValidationResult(f,d))}}}},_showBalloon:function(a,d,h,j){this._hideBalloon(a);if(this._balloonController){var m=this._balloonController.create(j,{target:a,container:h});m.show({target:a,direction:d});this._currentBalloon=m;this._addBalloonTarget(a)}else{var n=
f.core.controller(this.rootElement,f.ui.components.BalloonController);this.manageChild(n);n.readyPromise.done(this.own(function(){this._balloonController=n;this._showBalloon(a,d,h,j)}))}},_hideBalloon:function(a){this._currentBalloon&&(this._currentBalloon.dispose(),this._currentBalloon=null);this._removeBalloonTarget(a)},_setChildSetting:function(){var a=this._setting,d=a.property,f={},j;for(j in d)f[j]={displayName:d[j].displayName||a.displayName,message:d[j].message||a.message,formatter:d[j].formatter||
a.formatter};this._messageOutputController.addMessageSetting(f)},_addBalloonTarget:function(c){-1<a.inArray(c,this._balloonTargets)||this._balloonTargets.push(c)},_removeBalloonTarget:function(c){c=a.inArray(c,this._balloonTargets);-1!==c&&this._balloonTargets.splice(c,1)}})})();(function(){var c={__name:"h5.ui.validation.BootstrapErrorBalloon",_hideBalloon:function(c){a(c).tooltip("hide");this._removeBalloonTarget(c)},_showBalloon:function(c,f,j,m){a(c).removeAttr("title").attr({"data-placement":f,
"data-container":j,"data-original-title":m,"data-animation":!1}).tooltip({trigger:"manual"}).tooltip("show");this._addBalloonTarget(c)}},c=a.extend({},f.ui.validation.ErrorBalloon,c);f.core.expose(c)})();(function(){f.core.expose({__name:"h5.ui.validation.Message",_executedOnValidate:!1,_messageElementMap:{},_messageOutputController:f.ui.validation.MessageOutputController,_setSetting:function(a){this._setting=a;this.isInit?this._setChildSetting():this.initPromise.done(this.own(this._setChildSetting))},
_onValidate:function(a){this._executedOnValidate=!0;for(var d=a.validProperties,f=0,j=d.length;f<j;f++){var m=d[f];this._setMessage(this.parentController._getElementByName(m),m,a)}},_onFocus:function(a,d,f){this._setMessage(a,d,f,"focus")},_onBlur:function(a,d,f){this._setMessage(a,d,f,"blur")},reset:function(){for(var a in this._messageElementMap){var d=this._messageElementMap[name];d&&d.remove()}this._executedOnValidate=!1},_setMessage:function(c,d,f,j){if(this._executedOnValidate){var m=a.extend({},
this._setting,this._setting.property&&this._setting.property[d]);if(!m.off)if("blur"===j)this._removeMessage(d);else if(-1!==a.inArray(d,f.validatingProperties))this._removeMessage(d),f.addEventListener("validate",this.own(function(a){a.name===d&&!a.isValid&&("focus"!==j||document.activeElement===c)&&this._setMessage(c,d,f,j)}));else{this._removeMessage(d);var n=m.appendMessage,m=m.replaceElement,m=F(m)?m(c):m||c,p=this._messageElementMap[d];p||(p=a('<span class="message">'),this._messageElementMap[d]=
p);p.html(this._messageOutputController.getMessageByValidationResult(f,d));n?n(p[0],m,d):m&&a(m).after(p)}}},_removeMessage:function(a){this._messageElementMap[a]&&this._messageElementMap[a].remove()},_setChildSetting:function(){var a=this._setting,d=a.property,f={},j;for(j in d)f[j]={displayName:d[j].displayName||a.displayName,message:d[j].message||a.message,formatter:d[j].formatter||a.formatter};this._messageOutputController.addMessageSetting(f)}})})();(function(){f.core.expose({__name:"h5.ui.validation.AsyncIndicator",
_indicators:{},_setSetting:function(a){this._setting=a},_onValidate:function(c){for(var d=c.validatingProperties,f=c.properties,j=0,m=f.length;j<m;j++){var n=f[j];-1!==a.inArray(n,d)?this._showIndicator(this.parentController._getElementByName(n),n,c):this._hideIndicator(n)}},_onFocus:function(c,d,f){-1!==a.inArray(d,f.validatingProperties)?(c=this.parentController._getElementByName(d),this._showIndicator(c,d,f)):this._hideIndicator(d)},_onKeyup:function(c,d,f){-1!==a.inArray(d,f.validatingProperties)&&
this._showIndicator(c,d,f)},reset:function(){for(var a in this._indicators)this._hideIndicator(a);this._executedOnValidate=!1},_showIndicator:function(c,d,h){var j=a.extend({},this._setting,this._setting.property&&this._setting.property[d]);if(!j.off&&(j=j.replaceElement,c=F(j)?j(c):j||c))this._indicators[d]=this._indicators[d]||f.ui.indicator({target:c,block:!1}),this._indicators[d].show(),h.addEventListener("validate",this.own(function(a){d===a.name&&this._hideIndicator(a.name)})),h.addEventListener("abort",
this.own(function(){this._hideIndicator(d)}))},_hideIndicator:function(a){this._indicators[a]&&this._indicators[a].hide()}})})();(function(){var c={style:f.ui.validation.Style,composition:f.ui.validation.Composition,balloon:f.ui.validation.ErrorBalloon,bsBalloon:f.ui.validation.BootstrapErrorBalloon,message:f.ui.validation.Message,asyncIndicator:f.ui.validation.AsyncIndicator},d=function(b){if(null!=a(b).data("required"))return!0},h=function(b){if(null!=a(b).data("assertFalse"))return!0},j=function(b){if(null!=
a(b).data("assertTrue"))return!0},m=function(b){if(null!=a(b).data("nul"))return!0},n=function(b){if(null!=a(b).data("notNull"))return!0},p=function(b){b=a(b).data("max");if(null!=b)return"number"===typeof b?b:E(b)?[parseFloat(b[0]),"true"===a.trim(b[1])]:parseFloat(b)},t=function(b){b=a(b).data("min");if(null!=b)return"number"===typeof b?b:E(b)?[parseFloat(b[0]),"true"===a.trim(b[1])]:parseFloat(b)},C=function(b){b=a(b).data("future");if(null!=b)return new Date(b)},B=function(b){b=a(b).data("past");
if(null!=b)return new Date(b)},e=function(b){b=a(b).data("pattern");if(null!=b)return RegExp(b)},k=function(b){b=a(b).data("size");if(null!=b){if(E(b)){for(var c=0,d=b.length;c<d;c++)b[c]=parseInt(b[c]);return b}return parseInt(b)}};f.core.expose({__name:"h5.ui.FormController",_config:{},_bindedForm:null,_ruleCreators:[],_plugins:[],_validationLogic:f.validation.FormValidationLogic,_waitingValidationResultMap:{},_waitingAllValidationResult:null,_setting:{},_pluginSetting:{},setSetting:function(a){this._setting=
a;var a=this._plugins,c;for(c in a){var d=a[c];d._setSetting&&d._setSetting(this._margePluginSettings(c))}},_margePluginSettings:function(b){this._pluginSetting;var c=this._setting,d=c.output,c=c.property,d=a.extend({},d&&d[b]);d.property={};for(var e in c){var g=a.extend({},c[e]);a.extend(g,g[b]);var h=f.u.obj.getByPath("output."+b,g);delete g.output;d.property[e]=a.extend({},g,h)}return d},__construct:function(){this._addRuleCreator("required",d);this._addRuleCreator("assertFalse",h);this._addRuleCreator("assertTrue",
j);this._addRuleCreator("nul",m);this._addRuleCreator("notNull",n);this._addRuleCreator("max",p);this._addRuleCreator("min",t);this._addRuleCreator("future",C);this._addRuleCreator("past",B);this._addRuleCreator("pattern",e);this._addRuleCreator("size",k)},__init:function(){"FORM"===this.rootElement.tagName.toUpperCase()&&(this._bindedForm=this.rootElement,a(this._bindedForm).prop("novalidate",!0));var b={};a(this._getElements()).each(this.ownWithOrg(function(a){var c=a.getAttribute("name");if(c!=
null){var d={};b[c]=d;for(var c=0,e=this._ruleCreators.length;c<e;c++){var f=this._ruleCreators[c].key,h=this._ruleCreators[c].func,h=h(a);h!==void 0&&(d[f]=h)}}}));this.addRule(b);if(this._bindedForm)this.on(this._bindedForm,"submit",this._submitHandler)},addOutput:function(b){if(this.isInit)for(var b=a.isArray(b)?b:[b],d=0,e=b.length;d<e;d++){var f=b[d],g=c[f];g?this._addOutputPlugin(f,g):this.log.warn('プラグイン"{0}"は存在しません',f)}else this.initPromise.done(this.own(function(){this.addOutput(b)}))},addRule:function(a){this._validationLogic.addRule(a)},
removeRule:function(a){this._validationLogic.removeRule(a);this.validate(a)},enableRule:function(a){this._validationLogic.enableRule(a)},disableRule:function(a){this._validationLogic.disableRule(a)},getValue:function(b){var b=b&&(!E(b)?[b]:b),c=a(this._getElements()),d=a(this._getInputGroupElements()),e=this._setting&&this._setting.property||{},g={},f=[],h=this.rootElement;c.each(function(){var c=this.name;f.push(c);var j=g;if(d.find(this).length)var k=a(this).closest("[data-h5-input-group-container]").data("h5-input-group-container");
if(k){f.push(k);if(b&&-1===a.inArray(c,b)&&-1===a.inArray(k,b))return;g[k]=g[k]||{};j=g[k]}else if(b&&-1===a.inArray(c,b))return;if("file"===this.type){var k=this.files,m=k.length;if(m){j[c]=j[c]||[];for(var n=0;n<m;n++)j[c].push(k[n])}}else if(c&&!(("radio"===this.type||"checkbox"===this.type)&&!1===this.checked))m=(k=e[c]&&e[c].valueFunc)?k(h,c):a(this).val(),k&&void 0===m||null==m||(e[c]&&e[c].isArray&&(m=I(m)),void 0!==j[c]?(a.isArray(j[c])||(j[c]=[j[c]]),a.isArray(m)?Array.prototype.push.apply(j[c],
m):j[c].push(m)):j[c]=m)});for(var j in e)if((!b||-1!==a.inArray(j,b))&&-1===a.inArray(j,f))c=(c=e[j]&&e[j].valueFunc)&&c(h,j),void 0!==c&&(g[j]=c);return g},setValue:function(b){var c=a(this._getElements()),d={},e={},g;for(g in b)if(a.isPlainObject(b[g]))for(var f in b[g])e[f]=b[g][f];else e[g]=b[g];b=e;c.each(function(){var c=this.name;if(c){var e=b[c];if("radio"===this.type||"checkbox"===this.type)a.isArray(e)&&(d[c]=d[c]?d[c]+1:0,e=e[d[c]]),a(this).prop("checked",e);else if(a(this).is("select[multiple]")){if(a(this).val([]),
a.isArray(e)&&(d[c]=d[c]||0,e=e.slice(d[c])),null!=e)for(var g=[],f=0,h=e.length;f<h;f++){g.push(e[f]);a(this).val(g);d[c]++;var i=a(this).val(),i=a.isArray(i)?i:[i];if(i.length<g.length){d[c]--;break}}}else a.isArray(e)&&(d[c]=d[c]||0,e=e[d[c]++]),a(this).val(e)}})},clearValue:function(){a(this._getElements()).each(function(){"radio"===this.type||"checkbox"===this.type?a(this).prop("checked",!1):a(this).val(null)})},resetValue:function(){this._bindedForm&&this._bindedForm.reset()},resetValidation:function(){this._waitingValidationResultMap=
{};var a=this._plugins,c;for(c in a)this._resetPlugin(c,a[c])},validate:function(a){a=this._validate(a);this._callPluginValidateEvent("_onValidate",a);return a},getOutput:function(a){return this._plugins[a]},"{rootElement} focusin":function(a){this._pluginElementEventHandler(a,"_onFocus")},"{rootElement} focusout":function(a){this._pluginElementEventHandler(a,"_onBlur")},"{rootElement} keyup":function(a){this._pluginElementEventHandler(a,"_onKeyup")},"{rootElement} change":function(a){this._pluginElementEventHandler(a,
"_onChange")},"{rootElement} click":function(a){this._pluginElementEventHandler(a,"_onClick")},_getElementByName:function(b){var c=this._setting.property&&this._setting.property[b]&&this._setting.property[b].srcElement;return c||(c=a(this._getElements()).filter('[name="'+b+'"]')[0])?c:(b=a(this._getInputGroupElements()).filter('[data-h5-input-group-container="'+b+'"]')[0])?b:null},_getElements:function(){var b=this.$find("input,select,textarea").not('[type="submit"],[type="reset"],[type="image"]');
if(!this._bindedForm)return b;var c=a(this._bindedForm).attr("id");return a("input,select,textarea").not('[type="submit"],[type="reset"],[type="image"]').filter(function(){var d=a(this),e=d.attr("form");return e&&e===c||!e&&-1!==b.index(d)}).toArray()},_getInputGroupElements:function(){var b=a("[data-h5-input-group-container]");return this.$find("[data-h5-input-group-container]").filter(function(){var c=a(this),d=c.attr("form");return d&&d===formId||!d&&-1!==b.index(c)}).toArray()},_addRuleCreator:function(a,
c){this._ruleCreators.push({key:a,func:c})},_resetPlugin:function(a,c){c.reset&&c.reset.call(c)},_addOutputPlugin:function(a,c){if(this._plugins[a])this.log.warn('プラグイン"{0}"は登録済みです。',a);else{var d=f.core.controller(this._bindedForm||this.rootElement,c);d._setSetting&&d._setSetting(this._margePluginSettings(a));this.manageChild(d);this._plugins[a]=d}},_validate:function(a){var c=this.getValue(a),d=this._validationLogic.validate(c,a);this.log.debug("-----------------------------------------");this.log.debug("・validateするデータ");
this.log.debug(c);this.log.debug("・validate対象のプロパティ:"+a);this.log.debug("・validate結果");this.log.debug(d);this.log.debug(d.isAsync?"非同期":"同期");this.log.debug("-----------------------------------------");if(d.isAsync){for(var a=d.validatingProperties,c=0,e=a.length;c<e;c++)this._waitingValidationResultMap[a[c]]=d;d.addEventListener("validate",this.own(function(a){delete this._waitingValidationResultMap[a.name]}))}return d},_createPluginElementEventArgs:function(){},_pluginElementEventHandler:function(b,
c){var d=b.event.target;if(this._isFormControls(d)){var e=d.name;if(e){var g;a(this._getInputGroupElements()).find(d).length&&(g=a(d).closest("[data-h5-input-group-container]").data("h5-input-group-container"));var f=this._validate(g||e);this._callPluginElementEvent(c,d,e,f);g&&(d=this._getElementByName(g),this._callPluginElementEvent(c,d,g,f))}}},_callPluginValidateEvent:function(a,c){var d=this._plugins,e;for(e in d){var g=d[e];g[a]&&g[a].call(g,c)}},_callPluginElementEvent:function(a,c,d,e){var g=
this._plugins,f;for(f in g){var h=g[f];if(h[a])h[a](c,d,e)}},_submitHandler:function(a,c){a.event.preventDefault();var d=this.validate();d.isAsync?d.addEventListener("validateComplete",function(){this.isAllValid&&c[0].submit()}):d.isAllValid&&c[0].submit()},_isFormControls:function(b){return-1!==a(this._getElements()).index(b)}})})();(function(){function c(){j||(j=navigator.geolocation);return j}function d(a,c){this.oblateness=a;this.semiMajorAxis=c}function h(){}var j=null,t=f.env.ua;d.prototype.getOblateness=
function(){return this.oblateness};d.prototype.getSemiMajorAxis=function(){return this.semiMajorAxis};var n=new d(298.257222,6378137),p=new d(299.152813,6377397.155),x=Math.PI/180;a.extend(h.prototype,{isSupported:t.isIE&&9<=t.browserVersion?!0:!!c(),getCurrentPosition:function(a){var d=f.async.deferred();c().getCurrentPosition(function(a){d.resolve(a)},function(a){d.reject(da(2002,null,a))},a);return d.promise()},watchPosition:function(a){function d(){}var e=f.async.deferred(),h=c().watchPosition(function(a){e.notify(a)},
function(a){c().clearWatch(h);e.reject(da(2002,null,a))},a);d.prototype.unwatch=function(){c().clearWatch(h);e.resolve()};return e.promise(new d)},getDistance:function(a,c,e,f,b){(!isFinite(a)||!isFinite(c)||!isFinite(e)||!isFinite(f))&&m(2E3);var h=b?b:n;h instanceof d||m(2001);var b=h.getSemiMajorAxis(),j=h.getOblateness(),a=a*x,c=c*x,e=e*x,h=f*x,f=(a+e)/2,j=Math.sqrt(2*j-1)/j,j=Math.pow(j,2),i=Math.sqrt(1-j*Math.pow(Math.sin(f),2)),j=b*(1-j)/Math.pow(i,3),b=b/i,c=c-h;return Math.sqrt(Math.pow(j*
(a-e),2)+Math.pow(b*Math.cos(f)*c,2))},GS_GRS80:n,GS_BESSEL:p});f.u.obj.expose("h5.api",{geo:new h})})();(function(){function c(a){if(a){var b=a.deferred;(va(b)||Ma(b)||!a.result)&&m(k)}}function d(c,d,e){if(a.isPlainObject(c))for(var f in c){var h=a.trim(f).replace(/ +/g," ").split(" "),i=[];""===h[0]?m(q):1===h.length?(i.push(h[0]),i.push("="),i.push("?")):/^(<=|<|>=|>|=|!=|like)$/i.test(h[1])?3===h.length&&/^like$/i.test(h[1])?(i.push(h[0]),i.push(h[1]),i.push("?"),i.push("ESCAPE"),i.push('"'+
h[2]+'"')):(i.push(h[0]),i.push(h[1]),i.push("?")):m(b);d.push(i.join(" "));e.push(c[f])}}function h(){}function j(){this._multiple=!1}function w(a){this._db=a;this._df=l();this._tx=null;this._tasks=[];this._queue=[]}function n(a,b,c){this._statements=[];this._parameters=[];this._executor=a;this._tableName=b;this._columns=E(c)?c.join(", "):"*";this._orderBy=this._where=null}function p(a,b,c){this._statements=[];this._parameters=[];this._executor=a;this._tableName=b;this._values=c?I(c):[];this._df=
l();this._multiple=!0}function x(a,b,c){this._statements=[];this._parameters=[];this._executor=a;this._tableName=b;this._values=c;this._where=null}function C(a,b){this._statements=[];this._parameters=[];this._executor=a;this._tableName=b;this._where=null}function B(a,b,c){this._statements=[];this._parameters=[];this._executor=a;this._statements.push(b);this._parameters.push(c||[])}function e(a){this._db=a}var k=3E3,b=3003,q=3011,l=f.async.deferred,i=f.u.str.format;a.extend(j.prototype,{execute:function(){return this._executor.add(this)._execute(function(a){return a[0]})}});
a.extend(w.prototype,{_runTransaction:function(){return null!=this._tx},_addTask:function(a){this._tasks.push({deferred:a,result:null})},_setResult:function(a){this._getRecentTask().result=a},_getRecentTask:function(){return this._tasks[this._tasks.length-1]},add:function(a){a instanceof j||m(3009);var b=this._getRecentTask();(!b||b.result)&&this._queue.push(a);return this},_execute:function(a){function b(){if(0===f.length){var c=a(h);d._setResult.apply(d,[c]);e.notify(c,d)}else{for(var i=f.shift(),
j=i._statements,k=i._parameters,m=l().resolve().promise(),c=[],n=0,p=j.length;n<p;n++)(function(a,b){m=fa(m,function(){var e=l();d._tx.executeSql(a,b,function(a,b){c.push(i._onComplete(b));e.resolve()});return e.promise()})})(j[n],k[n]);fa(m,function(){h.push(i._multiple?c:c[0]);b()})}}var d=this,e=this._df,f=this._queue,h=[];try{c(this._getRecentTask());this._addTask(e);for(var i=0,j=f.length;i<j;i++)f[i]._buildStatementAndParameters();this._runTransaction()?b():this._db.transaction(function(a){d._tx=
a;b()},function(a){d._tx=null;for(var b=d._tasks,c=b.length-1;0<=c;c--)b[c].deferred.reject(da(3010,["SQLDB ERROR(code="+a.code+")",a.message],a))},function(){d._tx=null;for(var a=d._tasks,b=a.length-1;0<=b;b--){var c=a[b];c.deferred.resolve(c.result)}})}catch(k){e.reject(k)}this._df=l();return e.promise()},execute:function(){return this._execute(function(a){return a})},promise:function(){return this._df.promise()}});n.prototype=new j;a.extend(n.prototype,{where:function(b){!a.isPlainObject(b)&&!t(b)&&
m(3004,["Select","where"]);this._where=b;return this},orderBy:function(b){!a.isPlainObject(b)&&!t(b)&&m(3004,["Select","orderBy"]);this._orderBy=I(b);return this},_buildStatementAndParameters:function(){var b="",c=this._where,b=i("SELECT {0} FROM {1}",this._columns,this._tableName);if(a.isPlainObject(c)){var e=[];d(c,e,this._parameters);b+=" WHERE "+e.join(" AND ")}else t(c)&&(b+=" WHERE "+c);E(this._orderBy)&&(b+=" ORDER BY "+this._orderBy.join(", "));this._statements.push([b]);this._parameters=
[this._parameters]},_onComplete:function(a){return a.rows}});p.prototype=new j;a.extend(p.prototype,{_buildStatementAndParameters:function(){var b=this._values,c=this._statements,d=this._parameters;if(0===b.length)c.push(i("INSERT INTO {0} DEFAULT VALUES",this._tableName)),d.push([]);else for(var e=0,f=b.length;e<f;e++){var h=b[e];if(null==h)c.push(i("INSERT INTO {0} DEFAULT VALUES",this._tableName)),d.push([]);else if(a.isPlainObject(h)){var j=[],k=[],l=[],m;for(m in h)j.push("?"),k.push(m),l.push(h[m]);
c.push(i("INSERT INTO {0} ({1}) VALUES ({2})",this._tableName,k.join(", "),j.join(", ")));d.push(l)}}},_onComplete:function(a){return a.insertId}});x.prototype=new j;a.extend(x.prototype,{where:function(b){!a.isPlainObject(b)&&!t(b)&&m(3004,["Update","where"]);this._where=b;return this},_buildStatementAndParameters:function(){var b="",c=this._where,b=this._values,e=[],f;for(f in b)e.push(f+" = ?"),this._parameters.push(b[f]);b=i("UPDATE {0} SET {1}",this._tableName,e.join(", "));a.isPlainObject(c)?
(f=[],d(c,f,this._parameters),b+=" WHERE "+f.join(" AND ")):t(c)&&(b+=" WHERE "+c);this._statements.push([b]);this._parameters=[this._parameters]},_onComplete:function(a){return a.rowsAffected}});C.prototype=new j;a.extend(C.prototype,{where:function(b){!a.isPlainObject(b)&&!t(b)&&m(3004,["Del","where"]);this._where=b;return this},_buildStatementAndParameters:function(){var b="",c=this._where,b=i("DELETE FROM {0}",this._tableName);if(a.isPlainObject(c)){var e=[];d(c,e,this._parameters);b+=" WHERE "+
e.join(" AND ")}else t(c)&&(b+=" WHERE "+c);this._statements.push([b]);this._parameters=[this._parameters]},_onComplete:function(a){return a.rowsAffected}});B.prototype=new j;a.extend(B.prototype,{_buildStatementAndParameters:function(){},_onComplete:function(a){return a}});a.extend(e.prototype,{select:function(a,b,c){t(a)||m(3001,"select");!E(b)&&"*"!==b&&m(3005,"select");return new n(this.transaction(c),a,b)},insert:function(b,c,d){t(b)||m(3001,"insert");null!=c&&!E(c)&&!a.isPlainObject(c)&&m(3006,
"insert");return new p(this.transaction(d),b,c)},update:function(b,c,d){t(b)||m(3001,"update");a.isPlainObject(c)||m(3006,"update");return new x(this.transaction(d),b,c)},del:function(a,b){t(a)||m(3001,"del");return new C(this.transaction(b),a)},sql:function(a,b,c){t(a)||m(3007,"sql");null!=b&&!E(b)&&m(3008,"sql");return new B(this.transaction(c),a,b)},transaction:function(a){void 0!=a&&!(a instanceof w)&&m(3002,"transaction");return a?a:new w(this._db)}});a.extend(h.prototype,{isSupported:!!window.openDatabase,
open:function(a,b,c,d){if(this.isSupported)return a=openDatabase(a,b,c,d),new e(a)}});f.u.obj.expose("h5.api",{sqldb:new h})})();(function(){function c(a){this._storage=a}a.extend(c.prototype,{getLength:function(){return this._storage.length},key:function(a){return this._storage.key(a)},getItem:function(a){a=this._storage.getItem(a);return null===a?null:f.u.obj.deserialize(a)},setItem:function(a,c){this._storage.setItem(a,f.u.obj.serialize(c))},removeItem:function(a){this._storage.removeItem(a)},
clear:function(){this._storage.clear()},each:function(a){for(var c=this._storage,f=0,m=c.length;f<m;f++){var n=c.key(f);a(f,n,this.getItem(n))}}});f.u.obj.expose("h5.api.storage",{isSupported:window.localStorage?function(){try{return window.localStorage.setItem("__H5_WEB_STORAGE_CHECK__","ok"),window.localStorage.removeItem("__H5_WEB_STORAGE_CHECK__"),!0}catch(a){return!1}}():!1,local:new c(window.localStorage),session:new c(window.sessionStorage)})})();(function(){var c,d,h,j;function w(a){for(var a=
f.core.controllerManager.getControllers(a,{deep:!0}),b=0,c=a.length;b<c;b++)Da(a[b])||a[b].dispose()}function n(b,c){var d=a(b).filter(c),e=a(b).find(c);if(0===d.length)return e;if(0===e.length)return d;d=a.makeArray(d);e=a.makeArray(e);return a(d.concat(e))}function p(b){b=a(b).closest("["+J+"],["+R+"]");return b.length?b.get(0):null}function x(b){b=a(b).closest("["+V+"],["+K+"]");return b.length?b.get(0):null}function C(a,b){if(a===b)return!0;var c=x(a),d=b?x(b):null;return c!==d?!1:p(a)===b}function B(b,
c,d){var g=b?b:document.body,b=a(g);if(0!==b.length){1!==b.length&&m(Ba);if(!pa){var h=n(g,"["+V+"]");0===h.length&&(h=n(g,"main"),0===h.length&&g===document.body&&(h=a(g)),0<h.length&&h.eq(0).attr(V,V))}if(b.is("["+K+"]"))fa(g);else if(b.is("["+V+"]"))fa(g,!0);else{var i=a(g).is("["+J+"],["+R+"]")&&!e(g),j=i?f.async.deferred():null,l=a(g).is("["+J+"],["+R+"]")?g:p(g),t=!1;n(g,"["+Q+"]").each(function(){for(var b=this.getAttribute(Q).split(","),f=0,h=b.length;f<h;f++){var o=a.trim(b[f]);if(""===o||
c&&o!==c)return!0;if(!e(this,o)){if(!C(this,l))return!0;var m=!1;i&&!t&&this===g&&(m=t=!0);k(this,o);o=q(o,this,m?d:null);m&&o.done(function(a){j.resolve(a)})}}});b.find("["+V+"],["+K+"]").each(function(){if(C(this,l))return!0;var b=a(this);b.is("["+V+"]")?fa(this,!0):b.is("["+K+"]")&&fa(this)});if(i)return j.promise()}}}function e(b,c){var d=a(b).attr(D);if(!d)return!1;d=d.split(",");if(!c&&0<d.length)return!0;for(var e=0;e<d.length;e++)if(a.trim(d[e])===c)return!0;return!1}function k(b,c){var d=
a(b).attr(D)||"";d&&(d+=",");a(b).attr(D,d+c)}function b(b,c,d){var g=b?b:document.body,h=f.async.deferred(),b=!1,i=null,j=a(g).find(">["+J+"]");0<j.length&&(i=j.eq(0),e(i)||(b=!0,i.is("["+Q+"]")||(k(i,Ua.__name),i=f.core.controller(i,Ua,d),h.resolve(i))));b||(g=a(g).children().eq(0).filter("["+R+"]"),0<g.length&&!e(g)&&(b=!0,g.attr(J,J),j=g,g.is("["+Q+"]")||(k(g,Ua.__name),i=f.core.controller(g,Ua,d),h.resolve(i))));b||m(ca);c=B(j.get(0),c,d);Ma(h)||c.done(function(a){h.resolve(a)});return h.promise()}
function q(a,b,c){var d=f.async.deferred();f.res.get(a).then(function(a){a=f.core.controller(b,a,c);d.resolve(a)});return d.promise()}function l(a,b){this.type=a;this.data=b}function i(b,c){this.type=b;this._targetWindow=c;this._closed=!1;this._subscribers=[];var d=this;this._recv=function(a){d._receiveMessage(a.originalEvent)};a(window).on("message",this._recv)}function g(a,b){var c=Oa[a];c||(c=new i(a,b),Oa[a]=c);return c}function v(){this._recvChannel=new i(na,window.opener);this._recvChannel.subscribe(this._receive,
this);this._sendChannel=new i(z,window.opener)}function y(a){this.targetWindow=a;this.id="FIXME";this._invocationMap={};this._invocationSeq=f.core.data.createSequence(1,1,f.core.data.SEQ_INT);this._sendChannel=g(na,a);this._recvChannel=g(z,a);this._recvChannel.subscribe(this._receive,this)}function E(a){var a=a||{},b;if(E._instance)b=E._instance;else{b=E._instance=this;var e=!!window.history.pushState;b.urlHistoryMode=a.urlHistoryMode||W.HISTORY;switch(b.urlHistoryMode){case W.HASH:b.urlHistoryActualMode=
c;break;case W.NONE:b.urlHistoryActualMode=d;break;case W.FULLRELOAD:b.urlHistoryActualMode=h;break;case W.HISTORY:case W.HISTORY_OR_HASH:case W.HISTORY_OR_ERROR:case W.HISTORY_OR_NONE:case W.HISTORY_OR_FULLRELOAD:e&&(b.urlHistoryActualMode=j)}if(!b.urlHistoryActualMode&&!e)switch(b.urlHistoryMode){case W.HISTORY_OR_ERROR:m(xa);return;case W.HISTORY:case W.HISTORY_OR_HASH:b.urlHistoryActualMode=c;break;case W.HISTORY_OR_NONE:b.urlHistoryActualMode=d;break;case W.HISTORY_OR_FULLRELOAD:b.urlHistoryActualMode=
h}b.urlHistoryActualMode||m(ya,b.urlHistoryMode);a.baseUrl&&(e=new A(a.baseUrl),b._baseUrl=e.pathname.replace(/^\/?(.*?)\/?$/,"/$1/"));b._urlMaxLength=a.urlMaxLength||URL_MAX_LENGTH;var f=b._onChange;b._onChange=function(){return f.apply(b,arguments)}}a.routes&&(b._routes=b._routes.concat(a.routes));return b}function A(a){null!=a&&(a=a.match(A.regExp),this.href=a[0]||"",this.protocol=a[1]||"",this.host=a[2]||"",this.hostname=a[3]||"",this.port=a[4]||"",this.pathname=a[5]||"",this.dir=a[6]||"",this.file=
a[7]||"",this.search=a[8]||"",this.hash=a[9]||"")}function G(a){this.__controller=a}function M(){}function U(b){b=a(b);if(!1===b.children().eq(0).is("["+J+"],["+R+"]")){b.wrapInner(a("<div "+J+"></div>"));var c=b.attr(Q);c&&b.removeAttr(Q).children().attr(Q,c)}}function ea(b,c,d){var e=f.async.deferred();f.ajax({url:b,dataType:"html",method:c||"get",data:d}).done(function(b){var c=b.replace(ab,"").match(hb),b=c?"<div "+qa+" "+c[1]+">"+c[2]+"</div>":b;La.test(b)&&(b="<div "+K+">"+b+"</div>");b=a(b);
c=n(b,"["+V+"]");0===c.length&&(c=n(b,"main"));0<c.length&&(b=c.eq(0),b.attr(V,V));if(1<b.length||!a(b).is("["+V+"],["+K+"]")&&!b.is("["+qa+"]"))b=a("<div "+K+"></div>").append(b);U(b);e.resolve(b.children())}).fail(function(a){e.reject(a)});return e}function L(b,c,d){t(b)?c=ea(b,c,d):(c=f.async.deferred(),b=null==b?a(bb).get(0):f.u.obj.isJQueryObject(b)?b[0]:b,c.resolve(b));return c.promise()}function T(){}function da(b,c){var d="";a.each(b,function(a,b){d&&(d+="&");if(!c&&("args"===a||"serverArgs"===
a))d+=da(b,a);else if("serverArgs"===c){var e=encodeURIComponent(a);if(b instanceof Array){for(var g="",h=0;h<b.length;h++)g&&(g+="&"),g+=e+"[]",g+="=",g+=encodeURIComponent(b[h]);d+=g}else d+=e,d+="=",d+=encodeURIComponent(b)}else d="args"===c?d+encodeURIComponent(ua+a):d+encodeURIComponent(Ka+a),d+="=",d+=encodeURIComponent(f.u.obj.serialize(b).substring(2))});return d}function aa(b){aa._checkKeyRegExp||(aa._checkKeyRegExp=RegExp("^("+ra+"|"+Sa+")?(.+)"),aa._checkArrayRegExp=/^(.*)\[\]$/);var c=
{},d=aa._checkKeyRegExp,e=aa._checkArrayRegExp;a.each(b.split("&"),function(a,b){var b=b.split("="),g=decodeURIComponent(b[0]),h=decodeURIComponent(b[1]),i=g.match(d);if(i){g=i[1]||"";i=i[2];if(!g){c.serverArgs=c.serverArgs||{};var j=i.match(e);if(j){j=j[1];j in c.serverArgs===false&&(c.serverArgs[j]=[]);c.serverArgs[j]instanceof Array&&c.serverArgs[j].push(h)}else c.serverArgs[i]=h}if(g===ua){c.args=c.args||{};c.args[i]=f.u.obj.deserialize(Ca+h)}else g===Ka&&(c[i]=f.u.obj.deserialize(Ca+h))}});return c}
function N(a){if(!a)return"";N._regExp||(N._regExp=RegExp("(^|&)(?:"+ra+"|"+Sa+")[^=]*=.*?(?=&|$)","g"));var b=N._regExp,c=new A(a),a=c.pathname,c=c.search||"";(c=c.substring(1).replace(b,""))&&(c="?"+c);return a+c}function $(a){var b=new A(a),a=b.pathname||"",b=aa((b.search||"").substring(1));b.to||(b.to=a);return b}function H(b){var b=a.extend(!0,{},b),c=b.to,d="",e="";ma.test(c)||(delete b.to,c=N(c),e=new A(c),d=e.pathname,e=e.search);(b=da(b))&&(e=e+(e?"&":"?")+b);return d+e}function fa(b,c){null==
b&&(b=a("<div></div>").get(0));a(b).is("["+ja+"]")&&m(wa);var d=c;c?a(b).is(":not(["+V+"])")&&a(b).attr(V,V):(a(b).is(":not(["+K+"])")&&a(b).attr(K,K),d=f.settings.scene.followTitle);d=ha.controllerInternal(b,Ha,{isMain:c,followTitle:d},{async:!1});a(b).attr(ja,ja);return d}function ia(){va||(va=!0,B())}function Z(a,b){return f.core.controllerManager.getControllers(a||document.body,{name:Ha.__name,deep:b&&!1===b.deep?!1:!0})}var Q="data-h5-controller",D="data-h5-dyn-controller-bound",J="data-h5-default-scene",
R="data-h5-scene",K="data-h5-scene-container",V="data-h5-main-scene-container",ja="data-h5-dyn-container-bound",qa="data-h5-dyn-dummy-body",Ca="2|",ka={NORMAL:"normal",ONCE:"once",SILENT:"silent"},ba={GET:"get",POST:"post"},W={HASH:"hash",HISTORY:"history",NONE:"none",FULLRELOAD:"fullreload",HISTORY_OR_HASH:"historyOrHash",HISTORY_OR_ERROR:"historyOrError",HISTORY_OR_NONE:"historyOrNone",HISTORY_OR_FULLRELOAD:"historyOrFullreload"};c="hash";j="history";d="none";h="fullreload";var na="__h5__RMI",z=
"__h5__RMI_Result",Ba=1E5,ca=100001,wa=100007,xa=100011,ya=100012,Da=ha.isDisposing,va=!1,ua=f.settings.scene.clientQueryStringPrefix,Ka=f.settings.scene.clientFWQueryStringPrefix,ra=null,Sa=null,Ta=f.settings.scene.urlHistoryMode,Ea=null,ma=/Controller$/,X=null,O=null,Fa=null,Ga=null,Ua={__name:"h5.scene.DummyController"};f.mixin.eventDispatcher.mix(i.prototype);a.extend(i.prototype,{send:function(a){this._closed?alert("クローズ済みのチャネルです。送信できません。"):(a=new l(this.type,a),this._targetWindow.postMessage(f.u.obj.serialize(a),
location.origin))},subscribe:function(a,b){this._subscribers.push({func:a,thisObj:b?b:null})},close:function(){this._closed=!0;this.off(window,"message",this._recv)},_receiveMessage:function(a){var b;try{if(b=f.u.obj.deserialize(a.data),b.type!==this.type)return}catch(c){return}for(var a=this._subscribers,d=0,e=a.length;d<e;d++){var g=a[d];g.func.call(g.thisObj,b.data)}this.dispatchEvent({type:"message",data:b.data})}});var Oa={};a.extend(v.prototype,{_receive:function(a){var b=f.core.controllerManager.getControllers(document.body)[0],
c=a.id,d=a.method,a=a.args;!b[d]||F(b[d])?this._callFunction(c,b,d,a):this._sendChannel.send({id:c,isAsync:!1,status:4,result:null})},_callFunction:function(a,b,c,d){var d=I(d),e=void 0;try{e=b[c].apply(b,d)}catch(g){this._sendChannel.send({id:a,isAsync:!1,status:1,result:null});return}var h=this;f.async.isPromise(e)?e.done(function(){var b=f.u.obj.argsToArray(arguments);h._sendChannel.send({id:a,isAsync:!0,status:2,result:b})}).fail(function(){var b=f.u.obj.argsToArray(arguments);h._sendChannel.send({id:a,
isAsync:!0,status:3,result:b})}):this._sendChannel.send({id:a,isAsync:!1,status:0,result:e})}});a.extend(y.prototype,{invoke:function(a,b){var c=f.async.deferred(),d={id:this._invocationSeq.next(),method:a,args:b};this._invocationMap[d.id]=c;this._sendChannel.send(d);return c.promise()},_receive:function(a){var b=a.id,c=this._invocationMap[b];if(c){delete this._invocationMap[b];var b=a.result,d=a.status;a.isAsync?2===d?c.resolve.apply(c,b):c.reject.apply(c,b):0===d?c.resolve(b):c.reject()}}});a.extend(E.prototype,
{_routes:[],_baseUrl:null,_started:!1,_urlMaxLength:null,_silentOnce:!1,urlHistoryMode:null,urlHistoryActualMode:null,_urlForSimulate:null,_onChange:function(){if(this._silentOnce)this._silentOnce=!1;else{var a,b=null;this._urlForSimulate?(a=this._urlForSimulate,b=this._contextualData,this._urlForSimulate=this._contextualData=null):(a=this._getRouterLocation(),a=a.pathname+a.search);for(var c=this._removeBaseUrl(a),d=null,e=0;e<this._routes.length;e++){var f=this._routes[e];if(t(f.test)){if(c===f.test){d=
f.func(a,b);break}}else if(f.test instanceof RegExp){if(f.test.test(c)){d=f.func(a,b);break}}else if("function"===typeof f.test&&f.test(c)){d=f.func(a,b);break}}d&&this.evaluate(d,b)}},start:function(b){b=b||{};if(!this._started)switch(this._checkUrlLength(location.href,{throwOnError:!0}),this._started=!0,(!b||!b.silent)&&this._onChange(),this.urlHistoryActualMode){case c:a(window).on("hashchange",this._onChange);break;case j:a(window).on("popstate",this._onChange)}},navigate:function(a,b){b=b||{};
if(this._started){this._checkUrlLength(a,{throwOnError:!0});var e=!1,f=this.urlHistoryActualMode;switch(b.mode){case "silent":e=!0;break;case "none":f=d;break;case "fullreload":f=h}var g=this._toAbusolute(a);switch(f){case c:e&&(this._silentOnce=!0);this.compareUrl(g)?this._onChange():b.replaceHistory?location.replace("#"+g):location.hash=g;break;case j:e&&(this._silentOnce=!0);this.compareUrl(g)||(b.replaceHistory?history.replaceState(null,null,g):history.pushState(null,null,g));this._onChange();
break;case h:this.compareUrl(g)?location.reload():b.replaceHistory?location.replace(g):location.href=g;break;case d:this.evaluate(g)}}},stop:function(){if(this._started)switch(this._started=!1,this.urlHistoryActualMode){case c:a(window).off("hashchange",this._onChange);break;case j:a(window).off("popstate",this._onChange)}},_checkUrlLength:function(a,b){b=b||{};if(null==this._urlMaxLength)return!0;if((new A(a)).protocol)return a.length<=this._urlMaxLength;var d=this._toAbusolute(a);this.urlHistoryActualMode===
c&&(d=window.location.pathname+(window.location.search||"")+"#"+d);d=P(d);b.writeBack&&(b.url=d,b.urlLength=d.length,b.urlMaxLength=this._urlMaxLength);return d.length<=this._urlMaxLength?!0:!1},_getBaseDir:function(){return this._baseUrl?this._baseUrl:this._getRouterLocation().dir},_removeBaseUrl:function(a){var b=this._baseUrl;b&&0===a.indexOf(b)&&(a=a.replace(b,""));return a},evaluate:function(a,b){this._urlForSimulate=this._toAbusolute(a);this._contextualData=b;this._onChange()},_toAbusolute:function(a){var b=
null,a=new A(a),b=this._getRouterLocation();a.isSearch()?b=b.pathname+a.search+a.hash:a.isHash()?b=b.pathname+b.search+a.hash:(b=a.pathname+a.search+a.hash,0!==b.indexOf("/")&&(b=this._getBaseDir()+b));b=P(b);a=new A(b);return a.pathname+a.search+a.hash},compareUrl:function(a,b){if(null==b)var c=this._getRouterLocation(),b=c.pathname+c.search;0!==a.indexOf("/")&&(a=this._toAbusolute(a));0!==b.indexOf("/")&&(b=this._toAbusolute(b));return a===b},_getRouterLocation:function(){return this.urlHistoryActualMode===
c&&location.hash?new A(location.hash.substring(1)):new A(location.href)}});a.extend(A.prototype,{href:void 0,protocol:void 0,host:void 0,hostname:void 0,port:void 0,pathname:void 0,dir:void 0,file:void 0,search:void 0,hash:void 0,isSearch:function(){return!this.protocol&&!this.host&&!this.pathname&&this.search},isHash:function(){return!this.protocol&&!this.host&&!this.pathname&&!this.search&&this.hash}});A.regExp=/^(?:(\w+:)?\/\/(([^\/:]+)(?::(\d+))?))?((\/?.*?)([^\/]*?))(\?.*?)?(#.*)?$/;window.opener&&
new v;a.extend(G.prototype,{navigate:function(a){Da(this.__controller)||this.__controller.trigger("sceneChangeRequest",a)},getParentContainer:function(){if(Da(this.__controller))return null;var a=x(this.__controller.rootElement);return!a?null:Z(a)[0]}});a.extend(function(a,b,c,d){this.window=a=window.open(a,b,c);this._isModal=!1;this._parentBlocker=null;this.setModal(!0===d?!0:!1);this._rmi=new y(a);this._watchChild()}.prototype,{invoke:function(a,b){return this._rmi.invoke(a,b)},getControllerProxy:function(){return new M},
setModal:function(a){this._isModal!=a&&(this._isModal?(this._parentBlocker.hide(),this._parentBlocker=null):this._parentBlocker=f.ui.indicator({target:"body",block:!0,message:"子ウィンドウを開いている間は操作できません。",showThrobber:!1}).show(),this._isModal=a)},close:function(){var a=f.async.deferred();this.window.close();return a.promise()},_watchChild:function(){var a=this,b=setInterval(function(){a.window.closed&&(clearInterval(b),a.setModal(!1))},300)}});var ab=/<\!--(?:\s|\S)*?--\>/g,hb=/<body\b([^>]*)>((?:\s|\S)*?)(?:<\/body\s*>|<\/html\s*>|$)/i,
La=/^\s*(?!\s|<)/,bb='<div class="h5-scene"></div>';a.extend(T.prototype,{onChange:function(b,c){var d=f.async.deferred();a(b).empty();a(c).appendTo(b);d.resolve();return d.promise()},onChangeStart:function(a){this._ind=f.ui.indicator({target:a,block:!0,message:"遷移中..."}).show()},onChangeEnd:function(){this._ind.hide()}});var pa=null,oa={__name:"h5.scene.NotReshowableController",__init:function(b){b=b.args._notReshowableMessage;a(this.rootElement).html("<h1>"+b+"</h1>")}},Ha={__name:"h5.scene.SceneContainerController",
isMain:!1,_transition:null,_currentController:null,_isClickjackEnabled:!1,_dfd:null,_isNavigated:!1,_detour:{},_router:null,_first:!0,_title:"",__init:function(c){var c=c.args||{},d=this.rootElement,e=c.isMain,f=this;this.isMain=!!e;this.followTitle=e&&c.followTitle;this.isMain&&pa&&m(100003);this._containerName=a(d).attr(V)||a(d).attr(K);this._currentController=null;U(d);this._transition=new T;this._transition.onChangeStart(d);this.on("{rootElement}","sceneChangeRequest",this.own(this._onSceneChangeRequest));
this._router=Ga;if(this.isMain){pa=this;if(this._isClickjackEnabled)this.on("{a}","click",this.own(this._onAClick));Ea=this._router.urlHistoryActualMode;this._router.start()}else b(d).done(function(a){f._currentController=a;f._transition.onChangeEnd(f.rootElement,null,a.rootElement);f._transition=null;a=f._getTitleFromCurrentScene();null!=a&&f.setTitle(a)})},__dispose:function(){Da(this._currentController)||this._currentController.dispose();this._currentController=null;this.isMain&&(this._router.stop(),
pa=this._router=null)},_onAClick:function(a){a.event.preventDefault();this.navigate(a.event.originalEvent.target.href)},_onSceneChangeRequest:function(a){a.event.stopPropagation();setTimeout(this.own(function(){this.navigate(a.evArg)}),0)},navigate:function(b){if(t(b))return this.navigate({to:b});this._navigateParam=b;b=a.extend(!0,{},b);this._transition=new T;this._transition.onChangeStart(this.rootElement,(this._currentController||{}).rootElement);var c=this._dfd=f.async.deferred();this._isNavigated=
!0;var d=b.to;if(this.isMain&&b.navigationType!==ka.SILENT){t(d)||m(100004,[d]);-1!==d.indexOf("#")&&m(100005,[d]);b.method===ba.POST&&(this._detour.serverArgs=b.serverArgs,delete b.serverArgs);if(b.navigationType===ka.ONCE||b.method===ba.POST)this._detour.args=f.u.obj.deserialize(f.u.obj.serialize(b.args)),delete b.args;d=b.replaceHistory;delete b.replaceHistory;b=H(b);this._router.navigate(b,{replaceHistory:d})}else b=H(b),this._router.evaluate(b,{container:this});return c.promise()},setTitle:function(a){this._title=
a;this.followTitle&&(document.title=a)},getTitle:function(){return this._title},_navigate:function(c,d){if(c){var d=d||{},e=(this._currentController||{}).rootElement;this._isNavigated||(this._transition=new T,this._transition.onChangeStart(this.rootElement,e));e&&w(e);var f=this,g=null;if(d.navigationType===ka.ONCE||d.method===ba.POST){if(!this._isNavigated){this._onNotReshowable(d);return}g=this._detour.args;delete this._detour.args}else g=d.args;e=null;d.method===ba.POST?(e=this._detour.serverArgs,
delete this._detour.serverArgs):e=d.serverArgs;t(c)?ma.test(c)?q(c,a("<div></div>"),g).done(function(a){f._navigateEnd(a,d)}):L(c,d.method,e).done(function(c){b(a("<div></div>").append(c),null,g).done(function(a){f._navigateEnd(a,d)})}).fail(function(a){m(100008,[c],a)}):c.__name&&ma.test(c.__name)&&f._navigateEnd(c,d)}},_navigateEnd:function(b,c){var d=this,e=(this._currentController||{}).rootElement,f=b.rootElement;d._currentController=b;var g=c&&c.title;null==g?this._navigateParam&&ma.test(this._navigateParam.to)&&
null!=b.sceneTitle?this.setTitle(b.sceneTitle):(g=this._getTitleFromCurrentScene(),null!=g&&this.setTitle(g)):this.setTitle(g);this._navigateParam=null;this._transition.onChange(this.rootElement,f).done(this.own(function(){this._dfd&&this._dfd.resolve({from:e,to:f});e&&a(e).remove();d._transition.onChangeEnd(d.rootElement,e,f);d._isNavigated=false;d._dfd=null;d._transition=null}))},_getTitleFromCurrentScene:function(){var b=this._currentController.rootElement,c=a(b).data("h5-scene-title");if(null!=
c)return c;b=a(b).find("title");if(b.length)return b.text()},_onNotReshowable:function(b){O.__name&&ma.test(O.__name)?this._navigateEnd(ha.controllerInternal(a("<div></div>"),O,{_notReshowableMessage:"この画面は再表示できません。"}),b):(b=null,b=t(O)?{to:O}:a.extend(!0,{},O),b.args=b.args||{},b.args._notReshowableMessage="この画面は再表示できません。",this._navigate(b.to,b))},_defaultFuncForRouter:function(a){var d=this,e=$(a),f=e.to;if(this.isMain&&this._first){if(e.navigationType===ka.ONCE||e.method===ba.POST){this._onNotReshowable(e);
this._first=!1;return}var g=f&&ma.test(f),h=Ea===c&&location.hash.substring(1);if(this._router.compareUrl(a)&&!h&&!g){b(this.rootElement,null,e.args).done(function(a){d._currentController=a;d._transition.onChangeEnd(d.rootElement,null,a.rootElement);d._transition=null;a=d._getTitleFromCurrentScene();null!=a&&d.setTitle(a)});this._first=!1;return}}f=f||location.pathname+location.search;f=N(f);this._first&&(this._navigated=!0);this._navigate(f,e);this._first=!1}};ha.addControllerInstantiationHook(function(a){a.scene=
new G(a)});a(function(){ua=f.settings.scene.clientQueryStringPrefix;ra=ua.replace(/\\/g,"\\\\");Ka=f.settings.scene.clientFWQueryStringPrefix;Sa=Ka.replace(/\\/g,"\\\\");Ta=f.settings.scene.urlHistoryMode;X=parseInt(f.settings.scene.urlMaxLength);O=oa;Fa=f.settings.scene.baseUrl;var b=[];f.settings.scene.routes&&(b=b.concat(f.settings.scene.routes));b=a.map(b,function(a){var b=a.test;if(F(b))var c=b,b=function(a){var b=$(a);return c(a,b)};return{test:b,func:function(b,c){var c=c||{},d=a.navigationInfo;
if(F(d))var e=$(b),d=d(b,e);if(null==d)return(c.container||pa)._defaultFuncForRouter(b),null;t(d)&&(d={to:d});return H(d)}}});b.push({test:/.*/,func:function(a,b){b=b||{};(b.container||pa)._defaultFuncForRouter(a)}});Ga=new E({routes:b,urlHistoryMode:Ta,baseUrl:Fa,urlMaxLength:X});f.settings.scene.autoInit&&ia()});f.u.obj.expose("h5.scene",{createSceneContainer:fa,init:ia,getMainSceneContainer:function(){return pa},getSceneContainers:Z,getSceneContainerByName:function(a){if(null==a)return null;var b=
Z();if(0===b.length)return null;if(a){for(var c=0;c<b.length;c++)if(b[c]._containerName===a)return b[c];return null}return b[0]},navigationType:ka,method:ba,urlHistoryMode:W})})()})(jQuery);